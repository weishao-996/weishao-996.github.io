

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Wei Shao">
  <meta name="keywords" content="">
  
    <meta name="description" content="è¯¾ç¨‹ä»‹ç» äº†è§£Mybatis-Plus  æ•´åˆMybatis-Plus  é€šç”¨CRUD  Mybatis-Plusçš„é…ç½®  æ¡ä»¶æ„é€ å™¨  1ã€äº†è§£Mybatis-Plus1.1ã€Mybatis-Plusä»‹ç»MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜ æ•ˆç‡è€Œç”Ÿã€‚ å®˜ç½‘ï¼šhttps:&#x2F;&#x2F;mybatis.plu">
<meta property="og:type" content="article">
<meta property="og:title" content="é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus">
<meta property="og:url" content="https://weishao-996.github.io/2022/10/25/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/index.html">
<meta property="og:site_name" content="ğŸ”ğŸŸWeiBlog">
<meta property="og:description" content="è¯¾ç¨‹ä»‹ç» äº†è§£Mybatis-Plus  æ•´åˆMybatis-Plus  é€šç”¨CRUD  Mybatis-Plusçš„é…ç½®  æ¡ä»¶æ„é€ å™¨  1ã€äº†è§£Mybatis-Plus1.1ã€Mybatis-Plusä»‹ç»MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜ æ•ˆç‡è€Œç”Ÿã€‚ å®˜ç½‘ï¼šhttps:&#x2F;&#x2F;mybatis.plu">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://weishao-996.github.io/img/bg/WX20221120-235348@2x.png">
<meta property="article:published_time" content="2022-10-25T03:09:28.000Z">
<meta property="article:modified_time" content="2022-11-20T15:58:21.922Z">
<meta property="article:author" content="Wei Shao">
<meta property="article:tag" content="MyBatis-Plus">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://weishao-996.github.io/img/bg/WX20221120-235348@2x.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus - ğŸ”ğŸŸWeiBlog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"weishao-996.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"Java"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>å¨å°‘ã®Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg/WX20221120-235521@2x.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-25 11:09" pubdate>
          2022å¹´10æœˆ25æ—¥ ä¸Šåˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="è¯¾ç¨‹ä»‹ç»"><a href="#è¯¾ç¨‹ä»‹ç»" class="headerlink" title="è¯¾ç¨‹ä»‹ç»"></a>è¯¾ç¨‹ä»‹ç»</h1><ul>
<li>äº†è§£Mybatis-Plus </li>
<li>æ•´åˆMybatis-Plus </li>
<li>é€šç”¨CRUD </li>
<li>Mybatis-Plusçš„é…ç½® </li>
<li>æ¡ä»¶æ„é€ å™¨</li>
</ul>
<h1 id="1ã€äº†è§£Mybatis-Plus"><a href="#1ã€äº†è§£Mybatis-Plus" class="headerlink" title="1ã€äº†è§£Mybatis-Plus"></a>1ã€äº†è§£Mybatis-Plus</h1><h2 id="1-1ã€Mybatis-Plusä»‹ç»"><a href="#1-1ã€Mybatis-Plusä»‹ç»" class="headerlink" title="1.1ã€Mybatis-Plusä»‹ç»"></a>1.1ã€Mybatis-Plusä»‹ç»</h2><p>MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜ æ•ˆç‡è€Œç”Ÿã€‚</p>
<p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://mybatis.plus/">https://mybatis.plus/</a> æˆ– <a target="_blank" rel="noopener" href="https://mp.baomidou.com/">https://mp.baomidou.com/</a></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025121634953.png" srcset="/img/loading.gif" lazyload alt="image-20221025121634953"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025121654252.png" srcset="/img/loading.gif" lazyload alt="image-20221025121654252"></p>
<h2 id="1-2ã€ä»£ç ä»¥åŠæ–‡æ¡£"><a href="#1-2ã€ä»£ç ä»¥åŠæ–‡æ¡£" class="headerlink" title="1.2ã€ä»£ç ä»¥åŠæ–‡æ¡£"></a>1.2ã€ä»£ç ä»¥åŠæ–‡æ¡£</h2><p>æ–‡æ¡£åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://mybatis.plus/guide/">https://mybatis.plus/guide/</a> </p>
<p>æºç åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">https://github.com/baomidou/mybatis-plus</a></p>
<h2 id="1-3ã€ç‰¹æ€§"><a href="#1-3ã€ç‰¹æ€§" class="headerlink" title="1.3ã€ç‰¹æ€§"></a>1.3ã€ç‰¹æ€§</h2><ul>
<li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘ </li>
<li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ </li>
<li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œ æ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚ </li>
<li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™ </li>
<li><strong>æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€ SQLServer2005ã€SQLServer ç­‰å¤šç§æ•°æ®åº“ æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£ å†³ä¸»é”®é—®é¢˜ </li>
<li><strong>æ”¯æŒ XML çƒ­åŠ è½½</strong>ï¼šMapper å¯¹åº”çš„ XML æ”¯æŒçƒ­åŠ è½½ï¼Œå¯¹äºç®€å•çš„ CRUD æ“ä½œï¼Œç”šè‡³å¯ä»¥æ—  XML å¯åŠ¨ æ”¯æŒ ActiveRecord æ¨¡å¼ï¼š</li>
<li><strong>æ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨</strong>ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ ä½œ </li>
<li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰ </li>
<li><strong>æ”¯æŒå…³é”®è¯è‡ªåŠ¨è½¬ä¹‰</strong>ï¼šæ”¯æŒæ•°æ®åº“å…³é”®è¯ï¼ˆorderã€keyâ€¦â€¦ï¼‰è‡ªåŠ¨è½¬ä¹‰ï¼Œè¿˜å¯è‡ªå®šä¹‰å…³é”®è¯ </li>
<li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œ æ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨ </li>
<li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢ å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶ï¼šå¯è¾“å‡º Sql è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢ </li>
<li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ </li>
<li><strong>å†…ç½® Sql æ³¨å…¥å‰¥ç¦»å™¨</strong>ï¼šæ”¯æŒ Sql æ³¨å…¥å‰¥ç¦»ï¼Œæœ‰æ•ˆé¢„é˜² Sql æ³¨å…¥æ”»å‡»</li>
</ul>
<h2 id="1-4ã€æ¶æ„"><a href="#1-4ã€æ¶æ„" class="headerlink" title="1.4ã€æ¶æ„"></a>1.4ã€æ¶æ„</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025122017908.png" srcset="/img/loading.gif" lazyload alt="image-20221025122017908"></p>
<h2 id="1-5ã€ä½œè€…"><a href="#1-5ã€ä½œè€…" class="headerlink" title="1.5ã€ä½œè€…"></a>1.5ã€ä½œè€…</h2><p>Mybatis-Plusæ˜¯ç”±baomidouï¼ˆè‹ç±³è±†ï¼‰ç»„ç»‡å¼€å‘å¹¶ä¸”å¼€æºçš„ï¼Œç›®å‰è¯¥ç»„ç»‡å¤§æ¦‚æœ‰30äººå·¦å³ã€‚</p>
<p>ç äº‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://gitee.com/organizations/baomidou">https://gitee.com/organizations/baomidou</a></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025122245055.png" srcset="/img/loading.gif" lazyload alt="image-20221025122245055"></p>
<h1 id="2ã€å¿«é€Ÿå¼€å§‹"><a href="#2ã€å¿«é€Ÿå¼€å§‹" class="headerlink" title="2ã€å¿«é€Ÿå¼€å§‹"></a>2ã€å¿«é€Ÿå¼€å§‹</h1><p>å¯¹äºMybatisæ•´åˆMPæœ‰å¸¸å¸¸æœ‰ä¸‰ç§ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯<code>Mybatis+MP</code>ã€<code>Spring+Mybatis+MP</code>ã€<code>Spring Boot+Mybatis+MP</code>ã€‚</p>
<h2 id="2-1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨"><a href="#2-1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨" class="headerlink" title="2.1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨"></a>2.1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025122741423.png" srcset="/img/loading.gif" lazyload alt="image-20221025122741423"></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- åˆ›å»ºæµ‹è¯•è¡¨</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¸»é”®ID'</span><span class="token punctuation">,</span>
<span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ç”¨æˆ·å'</span><span class="token punctuation">,</span>
<span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å¯†ç '</span><span class="token punctuation">,</span>
<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å§“å'</span><span class="token punctuation">,</span>
<span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å¹´é¾„'</span><span class="token punctuation">,</span>
<span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'é‚®ç®±'</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
<span class="token comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">,</span> <span class="token string">'test1@itcast.cn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'æå››'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'test2@itcast.cn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'wangwu'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'ç‹äº”'</span><span class="token punctuation">,</span> <span class="token string">'28'</span><span class="token punctuation">,</span> <span class="token string">'test3@itcast.cn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'zhaoliu'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'èµµå…­'</span><span class="token punctuation">,</span> <span class="token string">'21'</span><span class="token punctuation">,</span> <span class="token string">'test4@itcast.cn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>user_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'sunqi'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'å­™ä¸ƒ'</span><span class="token punctuation">,</span> <span class="token string">'24'</span><span class="token punctuation">,</span> <span class="token string">'test5@itcast.cn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="2-2ã€åˆ›å»ºå·¥ç¨‹"><a href="#2-2ã€åˆ›å»ºå·¥ç¨‹" class="headerlink" title="2.2ã€åˆ›å»ºå·¥ç¨‹"></a>2.2ã€åˆ›å»ºå·¥ç¨‹</h2><p><strong>åˆ›å»ºmavenå·¥ç¨‹</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025142419290.png" srcset="/img/loading.gif" lazyload alt="image-20221025142419290"></p>
<p><strong>é…ç½®ä¾èµ–</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- mybatis-plusæ’ä»¶ä¾èµ– --></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token comment">&lt;!-- MySql --></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token comment">&lt;!-- è¿æ¥æ±  --></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token comment">&lt;!--ç®€åŒ–beanä»£ç çš„å·¥å…·åŒ…--></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.10.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>
                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="2-3ã€Mybatis-MP"><a href="#2-3ã€Mybatis-MP" class="headerlink" title="2.3ã€Mybatis + MP"></a>2.3ã€Mybatis + MP</h2><p>ä¸‹é¢æ¼”ç¤ºï¼Œé€šè¿‡çº¯Mybatisä¸Mybatis-Plusæ•´åˆã€‚</p>
<h3 id="2-3-1ã€åˆ›å»ºå­Module"><a href="#2-3-1ã€åˆ›å»ºå­Module" class="headerlink" title="2.3.1ã€åˆ›å»ºå­Module"></a>2.3.1ã€åˆ›å»ºå­Module</h3><p>![æˆªå±2022-10-25 14.41.43](/img/é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus/æˆªå±2022-10-25 14.41.43.png)</p>
<p>![æˆªå±2022-10-25 14.45.35](/img/é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus/æˆªå±2022-10-25 14.45.35.png)</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ–°å»ºé…ç½®æ–‡ä»¶</strong><code>log4j.properties</code></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">log4j.rootLogger=DEBUG,A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=[%t] [%c]-[%p] %m%n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025145455050.png" srcset="/img/loading.gif" lazyload alt="image-20221025145455050"></p>
<h3 id="2-3-2ã€Mybatiså®ç°æŸ¥è¯¢User"><a href="#2-3-2ã€Mybatiså®ç°æŸ¥è¯¢User" class="headerlink" title="2.3.2ã€Mybatiså®ç°æŸ¥è¯¢User"></a>2.3.2ã€Mybatiså®ç°æŸ¥è¯¢User</h3><p><strong>ç¬¬ä¸€æ­¥ï¼Œç¼–å†™mybatis-config.xmlæ–‡ä»¶</strong>ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>autoReconnect=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>allowMultiQueries=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Xuwei19941214~<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221025150511683.png" srcset="/img/loading.gif" lazyload alt="image-20221025150511683"></p>
<p>ç¬¬äºŒæ­¥ï¼Œç¼–å†™Userå®ä½“å¯¹è±¡ï¼šï¼ˆè¿™é‡Œä½¿ç”¨lombokè¿›è¡Œäº†è¿›åŒ–beanæ“ä½œï¼‰</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œç¼–å†™UserMapperæ¥å£ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬å››æ­¥ï¼Œç¼–å†™UserMapper.xmlæ–‡ä»¶ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.simple.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>findAll<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.example.cn.itcast.mp.simple.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        select * from tb_user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬äº”æ­¥ï¼Œç¼–å†™TestMybatisæµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMybatis</span> <span class="token punctuation">&#123;</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">"mybatis-config.xml"</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span>
                <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.logging.LogFactory<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Logging initialized using <span class="token string">'class org.apache.ibatis.logging.slf4j.Slf4jImpl'</span> adapter.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.datasource.pooled.PooledDataSource<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> PooledDataSource forcefully closed/removed all connections.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.datasource.pooled.PooledDataSource<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> PooledDataSource forcefully closed/removed all connections.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.datasource.pooled.PooledDataSource<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> PooledDataSource forcefully closed/removed all connections.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.datasource.pooled.PooledDataSource<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> PooledDataSource forcefully closed/removed all connections.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.transaction.jdbc.JdbcTransaction<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Opening JDBC Connection
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.datasource.pooled.PooledDataSource<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Created connection <span class="token number">1997287019</span>.
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.apache.ibatis.transaction.jdbc.JdbcTransaction<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Setting autocommit to <span class="token boolean">false</span> on JDBC Connection <span class="token punctuation">[</span>com.mysql.jdbc.JDBC4Connection@770c2e6b<span class="token punctuation">]</span>
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.findAll<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: <span class="token keyword">select</span> * from tb_user 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.findAll<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.findAll<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">5</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>null, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>å¼ ä¸‰, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">18</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test1@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>null, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>æå››, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test2@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>null, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>ç‹äº”, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">28</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test3@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>null, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test4@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>null, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>å­™ä¸ƒ, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">24</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test5@itcast.cn<span class="token punctuation">)</span>

Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="2-3-3ã€Mybatis-MPå®ç°æŸ¥è¯¢User"><a href="#2-3-3ã€Mybatis-MPå®ç°æŸ¥è¯¢User" class="headerlink" title="2.3.3ã€Mybatis+MPå®ç°æŸ¥è¯¢User"></a>2.3.3ã€Mybatis+MPå®ç°æŸ¥è¯¢User</h3><p>ç¬¬ä¸€æ­¥ï¼Œå°†UserMapperç»§æ‰¿BaseMapperï¼Œå°†æ‹¥æœ‰äº†BaseMapperä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨MPä¸­çš„MybatisSqlSessionFactoryBuilderè¿›ç¨‹æ„å»ºï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">MybatisSqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMybatisPlus</span> <span class="token punctuation">&#123;</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">"mybatis-config.xml"</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¿™é‡Œä½¿ç”¨çš„æ˜¯MPä¸­çš„MybatisSqlSessionFactoryBuilder</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span>
                <span class="token class-name">MybatisSqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å¯ä»¥è°ƒç”¨BaseMapperä¸­å®šä¹‰çš„æ–¹æ³•</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>è¿è¡ŒæŠ¥é”™ï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026110214512.png" srcset="/img/loading.gif" lazyload alt="image-20221026110214512"></p>
<p>è§£å†³ï¼šåœ¨<code>User</code>å¯¹è±¡ä¸­æ·»åŠ <code>@TableName</code>ï¼ŒæŒ‡å®šæ•°æ®åº“è¡¨å</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026110321585.png" srcset="/img/loading.gif" lazyload alt="image-20221026110321585"></p>
<p>æµ‹è¯•ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>user_name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>email <span class="token constant">FROM</span> tb_user 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token constant">DEBUG</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>zhangsan<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> name<span class="token operator">=</span>å¼ ä¸‰<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test1<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">)</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>lisi<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> name<span class="token operator">=</span>æå››<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test2<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">)</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>wangwu<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> name<span class="token operator">=</span>ç‹äº”<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">28</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test3<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">)</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>zhaoliu<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> name<span class="token operator">=</span>èµµå…­<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">21</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test4<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">)</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>sunqi<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> name<span class="token operator">=</span>å­™ä¸ƒ<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test5<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç®€å•è¯´æ˜ï¼š</p>
<p>ç”±äºä½¿ç”¨äº†<code>MybatisSqlSessionFactoryBuilder</code>è¿›è¡Œäº†æ„å»ºï¼Œç»§æ‰¿çš„<code>BaseMapper</code>ä¸­çš„æ–¹æ³•å°±è½½å…¥åˆ°äº† <code>SqlSession</code>ä¸­ï¼Œæ‰€ä»¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç›¸å…³çš„æ–¹æ³•ï¼›</p>
<p>å¦‚å›¾ï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026110808833.png" srcset="/img/loading.gif" lazyload alt="image-20221026110808833"></p>
<h2 id="2-4ã€Spring-Mybatis-MP"><a href="#2-4ã€Spring-Mybatis-MP" class="headerlink" title="2.4ã€Spring + Mybatis + MP"></a>2.4ã€Spring + Mybatis + MP</h2><p>å¼•å…¥äº†Springæ¡†æ¶ï¼Œæ•°æ®æºã€æ„å»ºç­‰å·¥ä½œå°±äº¤ç»™äº†Springç®¡ç†ã€‚</p>
<h3 id="2-4-1ã€åˆ›å»ºå­Module"><a href="#2-4-1ã€åˆ›å»ºå­Module" class="headerlink" title="2.4.1ã€åˆ›å»ºå­Module"></a>2.4.1ã€åˆ›å»ºå­Module</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026111546338.png" srcset="/img/loading.gif" lazyload alt="image-20221026111546338"></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mybatis-plus-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.version</span><span class="token punctuation">></span></span>5.1.6.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="2-4-2ã€å®ç°æŸ¥è¯¢User"><a href="#2-4-2ã€å®ç°æŸ¥è¯¢User" class="headerlink" title="2.4.2ã€å®ç°æŸ¥è¯¢User"></a>2.4.2ã€å®ç°æŸ¥è¯¢User</h3><p>ç¬¬ä¸€æ­¥ï¼Œç¼–å†™<code>jdbc.properties</code></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/mp?</span>
<span class="token key attr-name">useUnicode</span><span class="token punctuation">=</span><span class="token value attr-value">true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=false</span>
<span class="token key attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬äºŒæ­¥ï¼Œç¼–å†™<code>applicationContext.xml</code></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:*.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token comment">&lt;!-- å®šä¹‰æ•°æ®æº --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span>
          <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driver&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minIdle<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--è¿™é‡Œä½¿ç”¨MPæä¾›çš„sqlSessionFactoryï¼Œå®Œæˆäº†Springä¸MPçš„æ•´åˆ--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--æ‰«æmapperæ¥å£ï¼Œä½¿ç”¨çš„ä¾ç„¶æ˜¯MybatisåŸç”Ÿçš„æ‰«æå™¨--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>basePackage<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.example.cn.itcast.mp.simple.mapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œç¼–å†™Userå¯¹è±¡ä»¥åŠUserMapperæ¥å£ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"tb_user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
  
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬å››æ­¥ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token string">"classpath:applicationContext.xml"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpringMP</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ·»åŠ æµ‹è¯•æ¨¡å—çš„é…ç½®</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026121206190.png" srcset="/img/loading.gif" lazyload alt="image-20221026121206190"></p>
<p>æµ‹è¯•</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.selectList<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,password,name,age,email FROM tb_user 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.selectList<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: 
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.example.cn.itcast.mp.simple.mapper.UserMapper.selectList<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">5</span>
<span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token punctuation">[</span>org.mybatis.spring.SqlSessionUtils<span class="token punctuation">]</span>-<span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Closing non transactional SqlSession <span class="token punctuation">[</span>org.apache.ibatis.session.defaults.DefaultSqlSession@24959ca4<span class="token punctuation">]</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhangsan, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>å¼ ä¸‰, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">18</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test1@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>lisi, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>æå››, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test2@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>wangwu, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>ç‹äº”, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">28</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test3@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test4@itcast.cn<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>sunqi, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>å­™ä¸ƒ, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">24</span>, <span class="token assign-left variable">email</span><span class="token operator">=</span>test5@itcast.cn<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="2-5ã€SpringBoot-Mybatis-MP"><a href="#2-5ã€SpringBoot-Mybatis-MP" class="headerlink" title="2.5ã€SpringBoot + Mybatis + MP"></a>2.5ã€SpringBoot + Mybatis + MP</h2><p>ä½¿ç”¨<code>SpringBoot</code>å°†è¿›ä¸€æ­¥çš„ç®€åŒ–<code>MP</code>çš„æ•´åˆï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä½¿ç”¨<code>SpringBoot</code>éœ€è¦ç»§æ‰¿<code>parent</code>ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°åˆ› å»ºå·¥ç¨‹ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºå­<code>Module</code>ã€‚</p>
<h3 id="2-5-1ã€åˆ›å»ºå·¥ç¨‹"><a href="#2-5-1ã€åˆ›å»ºå·¥ç¨‹" class="headerlink" title="2.5.1ã€åˆ›å»ºå·¥ç¨‹"></a>2.5.1ã€åˆ›å»ºå·¥ç¨‹</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026122123916.png" srcset="/img/loading.gif" lazyload alt="image-20221026122123916"></p>
<h3 id="2-5-2ã€å¯¼å…¥ä¾èµ–"><a href="#2-5-2ã€å¯¼å…¥ä¾èµ–" class="headerlink" title="2.5.2ã€å¯¼å…¥ä¾èµ–"></a>2.5.2ã€å¯¼å…¥ä¾èµ–</h3><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/></span></span> <span class="token comment">&lt;!-- lookup parent from repository --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>itcast-mp-springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>itcast-mp-springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>itcast-mp-springboot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--ç®€åŒ–ä»£ç çš„å·¥å…·åŒ…--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--mybatis-plusçš„springbootæ”¯æŒ--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--mysqlé©±åŠ¨--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>é…ç½®æ—¥å¿—æ–‡ä»¶</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG,A1</span>
<span class="token key attr-name">log4j.appender.A1</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token key attr-name">log4j.appender.A1.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token key attr-name">log4j.appender.A1.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token value attr-value">[%t] [%c]-[%p] %m%n</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026150031093.png" srcset="/img/loading.gif" lazyload alt="image-20221026150031093"></p>
<h3 id="2-5-3ã€ç¼–å†™application-properties"><a href="#2-5-3ã€ç¼–å†™application-properties" class="headerlink" title="2.5.3ã€ç¼–å†™application.properties"></a>2.5.3ã€ç¼–å†™application.properties</h3><figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">spring.application.name</span> <span class="token punctuation">=</span> <span class="token value attr-value">itcast-mp-springboot</span>
<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/mp?</span>
<span class="token key attr-name">useUnicode</span><span class="token punctuation">=</span><span class="token value attr-value">true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=false</span>
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>

<span class="token key attr-name">logging.level.com.baomidou.mybatisplus</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
<span class="token comment">#é¡¹ç›®mapperç›®å½•</span>
<span class="token key attr-name">logging.level.cn.itcast.mp.mapper</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
<span class="token key attr-name">mybatis-plus.configuration.log-impl</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.ibatis.logging.slf4j.Slf4jImpl</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027112128002.png" srcset="/img/loading.gif" lazyload alt="image-20221027112128002"></p>
<h3 id="2-5-4ã€ç¼–å†™pojo"><a href="#2-5-4ã€ç¼–å†™pojo" class="headerlink" title="2.5.4ã€ç¼–å†™pojo"></a>2.5.4ã€ç¼–å†™pojo</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"tb_user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026150647229.png" srcset="/img/loading.gif" lazyload alt="image-20221026150647229"></p>
<h3 id="2-5-5ã€ç¼–å†™mapper"><a href="#2-5-5ã€ç¼–å†™mapper" class="headerlink" title="2.5.5ã€ç¼–å†™mapper"></a>2.5.5ã€ç¼–å†™mapper</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026150733439.png" srcset="/img/loading.gif" lazyload alt="image-20221026150733439"></p>
<h3 id="2-5-6ã€ç¼–å†™å¯åŠ¨ç±»"><a href="#2-5-6ã€ç¼–å†™å¯åŠ¨ç±»" class="headerlink" title="2.5.6ã€ç¼–å†™å¯åŠ¨ç±»"></a>2.5.6ã€ç¼–å†™å¯åŠ¨ç±»</h3><p>æ–°å»ºspringbooté¡¹ç›®æ—¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>itcastmpspringboot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">MapperScan</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"cn.itcast.mp.mapper"</span><span class="token punctuation">)</span> <span class="token comment">//è®¾ç½®mapperæ¥å£çš„æ‰«æåŒ…</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastMpSpringbootApplication</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ItcastMpSpringbootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026151123697.png" srcset="/img/loading.gif" lazyload alt="image-20221026151123697"></p>
<h3 id="2-5-7ã€ç¼–å†™æµ‹è¯•ç”¨ä¾‹"><a href="#2-5-7ã€ç¼–å†™æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="2.5.7ã€ç¼–å†™æµ‹è¯•ç”¨ä¾‹"></a>2.5.7ã€ç¼–å†™æµ‹è¯•ç”¨ä¾‹</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ItcastMpSpringbootApplicationTests</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026153826286.png" srcset="/img/loading.gif" lazyload alt="image-20221026153826286"></p>
<p>å¯ä»¥æ­£å¸¸æŸ¥è¯¢å‡ºæ•°æ®ï¼Œä½†æ˜¯ideaå·¥å…·ä¼šæœ‰ä¸€ä¸ªæŠ¥çº¢</p>
<p><strong>è§£å†³æ–¹æ³•</strong></p>
<p>å°†mapperå±‚è¿›è¡Œæ³¨å…¥</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221026153924016.png" srcset="/img/loading.gif" lazyload alt="image-20221026153924016"></p>
<h1 id="3ã€é€šç”¨CRUD"><a href="#3ã€é€šç”¨CRUD" class="headerlink" title="3ã€é€šç”¨CRUD"></a>3ã€é€šç”¨CRUD</h1><p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬äº†è§£åˆ°é€šè¿‡ç»§æ‰¿BaseMapperå°±å¯ä»¥è·å–åˆ°å„ç§å„æ ·çš„å•è¡¨æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¯¦ç»†è®²è§£è¿™äº› æ“ä½œã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027103547226.png" srcset="/img/loading.gif" lazyload alt="image-20221027103547226"></p>
<h2 id="3-1ã€æ’å…¥æ“ä½œ"><a href="#3-1ã€æ’å…¥æ“ä½œ" class="headerlink" title="3.1ã€æ’å…¥æ“ä½œ"></a>3.1ã€æ’å…¥æ“ä½œ</h2><h3 id="3-1-1ã€æ–¹æ³•å®šä¹‰"><a href="#3-1-1ã€æ–¹æ³•å®šä¹‰" class="headerlink" title="3.1.1ã€æ–¹æ³•å®šä¹‰"></a>3.1.1ã€æ–¹æ³•å®šä¹‰</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ’å…¥ä¸€æ¡è®°å½•
*
* @param entity å®ä½“å¯¹è±¡
*/</span>
<span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-1-2ã€æµ‹è¯•ç”¨ä¾‹"><a href="#3-1-2ã€æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="3.1.2ã€æµ‹è¯•ç”¨ä¾‹"></a>3.1.2ã€æµ‹è¯•ç”¨ä¾‹</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperTest</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"test@itcast.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ›¹æ“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"caocao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿”å›çš„resultæ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå¹¶ä¸æ˜¯è‡ªå¢åçš„id</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è‡ªå¢åçš„idä¼šå›å¡«åˆ°å¯¹è±¡ä¸­</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-1-3ã€æµ‹è¯•"><a href="#3-1-3ã€æµ‹è¯•" class="headerlink" title="3.1.3ã€æµ‹è¯•"></a>3.1.3ã€æµ‹è¯•</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.222</span>  <span class="token constant">INFO</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span></span>UserMapperTest</span>              <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">UserMapperTest</span> in <span class="token number">3.961</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">5.2</span><span class="token punctuation">)</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.597</span> <span class="token constant">DEBUG</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>insert    <span class="token operator">:</span> <span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">INSERT</span> <span class="token class-name">INTO</span> tb_user <span class="token punctuation">(</span> id<span class="token punctuation">,</span> user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email <span class="token punctuation">)</span> <span class="token constant">VALUES</span> <span class="token punctuation">(</span> <span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token punctuation">)</span> 
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.620</span> <span class="token constant">DEBUG</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>insert    <span class="token operator">:</span> <span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token function">1585468910826754050</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">caocao</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">123456</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> æ›¹æ“<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">20</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.626</span> <span class="token constant">DEBUG</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>insert    <span class="token operator">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Updates</span><span class="token operator">:</span> <span class="token number">1</span>
result <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">1585468910826754050</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.654</span>  <span class="token constant">INFO</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Shutdown</span> initiated<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">27</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">19.690</span>  <span class="token constant">INFO</span> <span class="token number">1387</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Shutdown</span> completed<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027112345047.png" srcset="/img/loading.gif" lazyload alt="image-20221027112345047"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®å·²ç»å†™å…¥åˆ°äº†æ•°æ®åº“ï¼Œä½†æ˜¯ï¼Œidçš„å€¼ä¸æ­£ç¡®ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯æ•°æ®åº“è‡ªå¢é•¿ï¼Œå®é™…æ˜¯MPç”Ÿæˆäº†idçš„å€¼ å†™å…¥åˆ°äº†æ•°æ®åº“ã€‚ å¦‚ä½•è®¾ç½®idçš„ç”Ÿæˆç­–ç•¥å‘¢ï¼Ÿ</p>
<p>MPæ”¯æŒçš„idç­–ç•¥ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span></span><span class="token punctuation">;</span>
<span class="token comment">/**
* ç”ŸæˆIDç±»å‹æšä¸¾ç±»
*
* @author hubin
* @since 2015-11-10
*/</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">IdType</span> <span class="token punctuation">&#123;</span>
<span class="token comment">/**
* æ•°æ®åº“IDè‡ªå¢
*/</span>
<span class="token function">AUTO</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/**
* è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹
*/</span>
<span class="token function">NONE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/**
* ç”¨æˆ·è¾“å…¥ID
* &lt;p>è¯¥ç±»å‹å¯ä»¥é€šè¿‡è‡ªå·±æ³¨å†Œè‡ªåŠ¨å¡«å……æ’ä»¶è¿›è¡Œå¡«å……&lt;/p>
*/</span>
<span class="token function">INPUT</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/* ä»¥ä¸‹3ç§ç±»å‹ã€åªæœ‰å½“æ’å…¥å¯¹è±¡ID ä¸ºç©ºï¼Œæ‰è‡ªåŠ¨å¡«å……ã€‚ */</span>
<span class="token comment">/**
* å…¨å±€å”¯ä¸€ID (idWorker)
*/</span>
<span class="token function">ID_WORKER</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/**
* å…¨å±€å”¯ä¸€ID (UUID)
*/</span>
<span class="token function">UUID</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/**
* å­—ç¬¦ä¸²å…¨å±€å”¯ä¸€ID (idWorker çš„å­—ç¬¦ä¸²è¡¨ç¤º)
*/</span>
<span class="token function">ID_WORKER_STR</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> key<span class="token punctuation">;</span>
<span class="token class-name">IdType</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ä¿®æ”¹å½“å‰è‡ªå¢é•¿çš„id</p>
<p>æ‰§è¡Œæ’å…¥æ“ä½œ</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027114545829.png" srcset="/img/loading.gif" lazyload alt="image-20221027114545829"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027121309606.png" srcset="/img/loading.gif" lazyload alt="image-20221027121309606"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027121339725.png" srcset="/img/loading.gif" lazyload alt="image-20221027121339725"></p>
<h3 id="3-1-4ã€-TableField"><a href="#3-1-4ã€-TableField" class="headerlink" title="3.1.4ã€@TableField"></a>3.1.4ã€@TableField</h3><p>åœ¨MPä¸­é€šè¿‡<code>@TableField</code>æ³¨è§£å¯ä»¥æŒ‡å®šå­—æ®µçš„ä¸€äº›å±æ€§ï¼Œå¸¸å¸¸è§£å†³çš„é—®é¢˜æœ‰2ä¸ªï¼š </p>
<p>1ã€å¯¹è±¡ä¸­çš„å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜ï¼ˆéé©¼å³°ï¼‰ </p>
<p>2ã€å¯¹è±¡ä¸­çš„å±æ€§å­—æ®µåœ¨è¡¨ä¸­ä¸å­˜åœ¨çš„é—®é¢˜</p>
<p>ä½¿ç”¨ï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027121954576.png" srcset="/img/loading.gif" lazyload alt="image-20221027121954576"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027122717595.png" srcset="/img/loading.gif" lazyload alt="image-20221027122717595"></p>
<p>æ·»åŠ <code>@TableField(exist = false )</code>åæ­£å¸¸æ’å…¥</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027122919602.png" srcset="/img/loading.gif" lazyload alt="image-20221027122919602"></p>
<p>å…¶ä»–ç”¨æ³•ï¼Œå¦‚å¤§å­—æ®µä¸åŠ å…¥æŸ¥è¯¢å­—æ®µï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027122023261.png" srcset="/img/loading.gif" lazyload alt="image-20221027122023261"></p>
<p>æ•ˆæœï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221027123203415.png" srcset="/img/loading.gif" lazyload alt="image-20221027123203415"></p>
<h2 id="3-2ã€æ›´æ–°æ“ä½œ"><a href="#3-2ã€æ›´æ–°æ“ä½œ" class="headerlink" title="3.2ã€æ›´æ–°æ“ä½œ"></a>3.2ã€æ›´æ–°æ“ä½œ</h2><p>åœ¨MPä¸­ï¼Œæ›´æ–°æ“ä½œæœ‰2ç§ï¼Œä¸€ç§æ˜¯æ ¹æ®idæ›´æ–°ï¼Œå¦ä¸€ç§æ˜¯æ ¹æ®æ¡ä»¶æ›´æ–°ã€‚</p>
<h3 id="3-2-1ã€æ ¹æ®idæ›´æ–°"><a href="#3-2-1ã€æ ¹æ®idæ›´æ–°" class="headerlink" title="3.2.1ã€æ ¹æ®idæ›´æ–°"></a>3.2.1ã€æ ¹æ®idæ›´æ–°</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® ID ä¿®æ”¹
*
* @param entity å®ä½“å¯¹è±¡
*/</span>
<span class="token keyword">int</span> <span class="token function">updateById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">ENTITY</span><span class="token punctuation">)</span> <span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">6L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¸»é”®</span>
       user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ›´æ–°çš„å­—æ®µ</span>
       <span class="token comment">//æ ¹æ®idæ›´æ–°ï¼Œæ›´æ–°ä¸ä¸ºnullçš„å­—æ®µ</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:14:47.302  INFO <span class="token number">1261</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">4.081</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">5.654</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:14:47.603 DEBUG <span class="token number">1261</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.updateById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: UPDATE tb_user SET <span class="token assign-left variable">age</span><span class="token operator">=</span>? WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span>? 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:14:47.637 DEBUG <span class="token number">1261</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.updateById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">21</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>, <span class="token number">6</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:14:47.643 DEBUG <span class="token number">1261</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.updateById      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028101737072.png" srcset="/img/loading.gif" lazyload alt="image-20221028101737072"></p>
<h3 id="3-2-2ã€æ ¹æ®æ¡ä»¶æ›´æ–°"><a href="#3-2-2ã€æ ¹æ®æ¡ä»¶æ›´æ–°" class="headerlink" title="3.2.2ã€æ ¹æ®æ¡ä»¶æ›´æ–°"></a>3.2.2ã€æ ¹æ®æ¡ä»¶æ›´æ–°</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® whereEntity æ¡ä»¶ï¼Œæ›´æ–°è®°å½•
*
* @param entity å®ä½“å¯¹è±¡ (set æ¡ä»¶å€¼,å¯ä»¥ä¸º null)
* @param updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ where è¯­å¥ï¼‰
*/</span>
<span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">ENTITY</span><span class="token punctuation">)</span> <span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span>
updateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateByQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

     <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//æ›´æ–°çš„æ¡ä»¶</span>
     <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     objectQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//æ‰§è¡Œæ›´æ–°æ“ä½œ</span>
     <span class="token keyword">int</span> update <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> objectQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result="</span><span class="token operator">+</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æˆ–è€…ï¼Œé€šè¿‡UpdateWrapperè¿›è¡Œæ›´æ–°ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">testUpdateByUpdateWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token comment">//æ›´æ–°çš„æ¡ä»¶ä»¥åŠå­—æ®µ</span>
       <span class="token class-name">UpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectUpdateWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       objectUpdateWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//æ‰§è¡Œæ›´æ–°æ“ä½œ</span>
       <span class="token keyword">int</span> update <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> objectUpdateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result="</span><span class="token operator">+</span>update <span class="token punctuation">)</span><span class="token punctuation">;</span>


   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.316  INFO <span class="token number">1314</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.449</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.88</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.640 DEBUG <span class="token number">1314</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.update    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: UPDATE tb_user SET <span class="token assign-left variable">age</span><span class="token operator">=</span>? WHERE <span class="token function">id</span> <span class="token operator">=</span> ? 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.698 DEBUG <span class="token number">1314</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.update    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">23</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>, <span class="token number">6</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.710 DEBUG <span class="token number">1314</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.update    <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.763  INFO <span class="token number">1314</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown initiated<span class="token punctuation">..</span>.
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:25:53.788  INFO <span class="token number">1314</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å‡å¯è¾¾åˆ°æ›´æ–°çš„æ•ˆæœã€‚ å…³äº<code>wrapper</code>æ›´å¤šçš„ç”¨æ³•åé¢ä¼šè¯¦ç»†è®²è§£ã€‚</p>
<h2 id="3-3ã€åˆ é™¤æ“ä½œ"><a href="#3-3ã€åˆ é™¤æ“ä½œ" class="headerlink" title="3.3ã€åˆ é™¤æ“ä½œ"></a>3.3ã€åˆ é™¤æ“ä½œ</h2><h3 id="3-3-1ã€deleteById"><a href="#3-3-1ã€deleteById" class="headerlink" title="3.3.1ã€deleteById"></a>3.3.1ã€deleteById</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® ID åˆ é™¤
*
* @param id ä¸»é”®ID
*/</span>
<span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Serializable</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       <span class="token comment">//æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
       <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">6L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:49.951  INFO <span class="token number">1326</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.916</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">5.418</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:50.205 DEBUG <span class="token number">1326</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: DELETE FROM tb_user WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span>? 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:50.236 DEBUG <span class="token number">1326</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">6</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:50.244 DEBUG <span class="token number">1326</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteById      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span>
result <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:50.293  INFO <span class="token number">1326</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown initiated<span class="token punctuation">..</span>.
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:28:50.318  INFO <span class="token number">1326</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028102951516.png" srcset="/img/loading.gif" lazyload alt="image-20221028102951516"></p>
<p>æ•°æ®è¢«åˆ é™¤ã€‚</p>
<h3 id="3-3-2ã€deleteByMap"><a href="#3-3-2ã€deleteByMap" class="headerlink" title="3.3.2ã€deleteByMap"></a>3.3.2ã€deleteByMap</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•
*
* @param columnMap è¡¨å­—æ®µ map å¯¹è±¡
*/</span>
<span class="token keyword">int</span> <span class="token function">deleteByMap</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">COLUMN_MAP</span><span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> columnMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span>  <span class="token keyword">void</span>  <span class="token function">testDeleteByMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> objectObjectHashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       objectObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       objectObjectHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">deleteByMap</span><span class="token punctuation">(</span>objectObjectHashMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result="</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:35:20.650  INFO <span class="token number">1365</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.496</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.92</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:35:20.937 DEBUG <span class="token number">1365</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteByMap     <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: DELETE FROM tb_user WHERE name <span class="token operator">=</span> ? AND age <span class="token operator">=</span> ? 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:35:20.967 DEBUG <span class="token number">1365</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteByMap     <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: å¼ ä¸‰<span class="token punctuation">(</span>String<span class="token punctuation">)</span>, <span class="token number">20</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:35:20.974 DEBUG <span class="token number">1365</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteByMap     <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">0</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-3-3ã€delete"><a href="#3-3-3ã€delete" class="headerlink" title="3.3.3ã€delete"></a>3.3.3ã€delete</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•
*
* @param wrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
*/</span>
<span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByQueryWapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

      <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> delete <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>objectQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result ="</span><span class="token operator">+</span> delete<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:45:13.485  INFO <span class="token number">1392</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">4.318</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">6.039</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:45:13.843 DEBUG <span class="token number">1392</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.delete    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: DELETE FROM tb_user WHERE <span class="token assign-left variable">name</span><span class="token operator">=</span>? AND <span class="token assign-left variable">age</span><span class="token operator">=</span>? 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:45:13.889 DEBUG <span class="token number">1392</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.delete    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: å¼ ä¸‰<span class="token punctuation">(</span>String<span class="token punctuation">)</span>, <span class="token number">20</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:45:13.896 DEBUG <span class="token number">1392</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.delete    <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">0</span>
result <span class="token operator">=</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-3-4ã€deleteBatchIds"><a href="#3-3-4ã€deleteBatchIds" class="headerlink" title="3.3.4ã€deleteBatchIds"></a>3.3.4ã€deleteBatchIds</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰
*
* @param idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)
*/</span>
<span class="token keyword">int</span> <span class="token function">deleteBatchIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">COLLECTION</span><span class="token punctuation">)</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span>
idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@Test
public void <span class="token function-name function">testDeleteByBatchIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    //æ ¹æ®idé›†åˆæ‰¹é‡åˆ é™¤
    int i <span class="token operator">=</span> this.userMapper.deleteBatchIds<span class="token punctuation">(</span>Arrays.asList<span class="token punctuation">(</span>1L, 2L, 3L<span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"result ="</span>+i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">10</span>:49:29.675  INFO <span class="token number">1415</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.402</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.826</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:49:29.939 DEBUG <span class="token number">1415</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: DELETE FROM tb_user WHERE <span class="token function">id</span> IN <span class="token punctuation">(</span> ? , ? , ? <span class="token punctuation">)</span> 
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:49:29.975 DEBUG <span class="token number">1415</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">2</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">3</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">10</span>:49:29.980 DEBUG <span class="token number">1415</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.deleteBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">3</span>
result <span class="token operator">=</span><span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028105100892.png" srcset="/img/loading.gif" lazyload alt="image-20221028105100892"></p>
<p>æ•°æ®å·²åˆ é™¤ã€‚</p>
<h2 id="3-4ã€æŸ¥è¯¢æ“ä½œ"><a href="#3-4ã€æŸ¥è¯¢æ“ä½œ" class="headerlink" title="3.4ã€æŸ¥è¯¢æ“ä½œ"></a>3.4ã€æŸ¥è¯¢æ“ä½œ</h2><p>MPæä¾›äº†å¤šç§æŸ¥è¯¢æ“ä½œï¼ŒåŒ…æ‹¬æ ¹æ®idæŸ¥è¯¢ã€æ‰¹é‡æŸ¥è¯¢ã€æŸ¥è¯¢å•æ¡æ•°æ®ã€æŸ¥è¯¢åˆ—è¡¨ã€åˆ†é¡µæŸ¥è¯¢ç­‰æ“ä½œã€‚</p>
<h3 id="3-4-1ã€selectById"><a href="#3-4-1ã€selectById" class="headerlink" title="3.4.1ã€selectById"></a>3.4.1ã€selectById</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/**
* æ ¹æ® ID æŸ¥è¯¢
*
* @param <span class="token function">id</span> ä¸»é”®ID
*/
T selectById<span class="token punctuation">(</span>Serializable <span class="token function">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//æ ¹æ®idæŸ¥è¯¢æ•°æ®</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result"</span><span class="token operator">+</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">11</span>:00:38.546  INFO <span class="token number">1591</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.542</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">5.09</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:00:38.806 DEBUG <span class="token number">1591</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span>? 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:00:38.836 DEBUG <span class="token number">1591</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">4</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:00:38.863 DEBUG <span class="token number">1591</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
resultUser<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test4@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-2ã€selectBatchIds"><a href="#3-4-2ã€selectBatchIds" class="headerlink" title="3.4.2ã€selectBatchIds"></a>3.4.2ã€selectBatchIds</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰
*
* @param idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)
*/</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">selectBatchIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">COLLECTION</span><span class="token punctuation">)</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span>
idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByBatchIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//æ ¹æ®idé›†åˆæ‰¹é‡æŸ¥è¯¢</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectBatchIds</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">,</span> <span class="token number">5L</span><span class="token punctuation">,</span> <span class="token number">6L</span><span class="token punctuation">,</span> <span class="token number">7L</span><span class="token punctuation">,</span> <span class="token number">8L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token operator">:</span>users<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">11</span>:04:38.814 DEBUG <span class="token number">1607</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE <span class="token function">id</span> IN <span class="token punctuation">(</span> ? , ? , ? , ? , ? <span class="token punctuation">)</span> 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:04:38.848 DEBUG <span class="token number">1607</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">4</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">5</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">6</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">7</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">8</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:04:38.875 DEBUG <span class="token number">1607</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectBatchIds  <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">4</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test4@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>sunqi, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>å­™ä¸ƒ, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">24</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test5@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">7</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“1, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">8</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“2, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-3ã€selectOne"><a href="#3-4-3ã€selectOne" class="headerlink" title="3.4.3ã€selectOne"></a>3.4.3ã€selectOne</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•
*
* @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
*/</span>
<span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">testSelectOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"èµµå…­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        æ ¹æ®æ¡ä»¶æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œå¦‚æœè¶…è¿‡ä¸€æ¡ä¼šæŠ¥é”™</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>objectQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p> ç»“æœ;</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">11</span>:11:44.288  INFO <span class="token number">1631</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.242</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.637</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:11:44.616 DEBUG <span class="token number">1631</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.itcast.mp.mapper.UserMapper.selectOne  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE name <span class="token operator">=</span> ? 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:11:44.646 DEBUG <span class="token number">1631</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.itcast.mp.mapper.UserMapper.selectOne  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: èµµå…­<span class="token punctuation">(</span>String<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:11:44.677 DEBUG <span class="token number">1631</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.itcast.mp.mapper.UserMapper.selectOne  <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test4@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-4ã€selectCount"><a href="#3-4-4ã€selectCount" class="headerlink" title="3.4.4ã€selectCount"></a>3.4.4ã€selectCount</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°
*
* @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
*/</span>
<span class="token class-name">Integer</span> <span class="token function">selectCount</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span>  <span class="token keyword">void</span>  <span class="token function">testSelectByCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userQueryWrapper<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¹´é¾„å¤§äº23</span>
    <span class="token class-name">Integer</span> integer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectCount</span><span class="token punctuation">(</span>userQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"count="</span><span class="token operator">+</span> integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">11</span>:22:52.858  INFO <span class="token number">1668</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.627</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">5.165</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:22:53.203 DEBUG <span class="token number">1668</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectCount     <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT COUNT<span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span> FROM tb_user WHERE age <span class="token operator">></span> ? 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:22:53.241 DEBUG <span class="token number">1668</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectCount     <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">23</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:22:53.272 DEBUG <span class="token number">1668</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectCount     <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-5ã€selectList"><a href="#3-4-5ã€selectList" class="headerlink" title="3.4.5ã€selectList"></a>3.4.5ã€selectList</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•
*
* @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
*/</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       userQueryWrapper<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>userQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token operator">:</span>users<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">40.742</span>  <span class="token constant">INFO</span> <span class="token number">1700</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>m<span class="token punctuation">.</span></span>ItcastMpSpringbootApplicationTests</span> <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">ItcastMpSpringbootApplicationTests</span> in <span class="token number">3.223</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">4.632</span><span class="token punctuation">)</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">41.073</span> <span class="token constant">DEBUG</span> <span class="token number">1700</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList      <span class="token operator">:</span> <span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>user_name<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>email <span class="token constant">AS</span> mail <span class="token constant">FROM</span> tb_user <span class="token constant">WHERE</span> age <span class="token operator">></span> <span class="token operator">?</span> 
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">41.107</span> <span class="token constant">DEBUG</span> <span class="token number">1700</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList      <span class="token operator">:</span> <span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token function">20</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">41.135</span> <span class="token constant">DEBUG</span> <span class="token number">1700</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>i<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList      <span class="token operator">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token function">userUser</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>zhaoliu<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token operator">=</span>èµµå…­<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">21</span><span class="token punctuation">,</span> mail<span class="token operator">=</span>test4<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">,</span> address<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token function">userUser</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> userName<span class="token operator">=</span>sunqi<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token operator">=</span>å­™ä¸ƒ<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span> mail<span class="token operator">=</span>test5<span class="token annotation punctuation">@itcast.cn</span><span class="token punctuation">,</span> address<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-6ã€selectPage"><a href="#3-4-6ã€selectPage" class="headerlink" title="3.4.6ã€selectPage"></a>3.4.6ã€selectPage</h3><p>æ–¹æ³•å®šä¹‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰
*
* @param page åˆ†é¡µæŸ¥è¯¢æ¡ä»¶ï¼ˆå¯ä»¥ä¸º RowBounds.DEFAULTï¼‰
* @param queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰
*/</span>
<span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">selectPage</span><span class="token punctuation">(</span><span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> page<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">WRAPPER</span><span class="token punctuation">)</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>é…ç½®åˆ†é¡µæ’ä»¶ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">PaginationInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">MapperScan</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"cn.itcast.mp.mapper"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">&#123;</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">PaginationInterceptor</span> <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028114304530.png" srcset="/img/loading.gif" lazyload alt="image-20221028114304530"></p>
<p>æµ‹è¯•ç”¨ä¾‹;</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

       <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       userQueryWrapper<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">//æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®</span>
       <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userIPage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> userQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ€»æ¡æ•°ï¼š"</span><span class="token operator">+</span>userIPage<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ€»é¡µæ•°ï¼š"</span><span class="token operator">+</span>userIPage<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> record <span class="token operator">:</span> userIPage<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user="</span><span class="token operator">+</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç»“æœï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.264 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.b.m.e.p.p.o.JsqlParserCountOptimize    <span class="token builtin class-name">:</span> JsqlParserCountOptimize <span class="token assign-left variable">sql</span><span class="token operator">=</span>SELECT  id,user_name,name,age,email AS mail  FROM tb_user 
 
 WHERE age <span class="token operator">></span> ?
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.291 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectPage      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT COUNT<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> FROM tb_user WHERE age <span class="token operator">></span> ? 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.330 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectPage      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">20</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.362 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectPage      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail FROM tb_user WHERE age <span class="token operator">></span> ? LIMIT ?,? 
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.366 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectPage      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">20</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>, <span class="token number">0</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>, <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-28 <span class="token number">11</span>:41:24.374 DEBUG <span class="token number">1772</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectPage      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
æ•°æ®æ€»æ¡æ•°ï¼š2
æ€»é¡µæ•°ï¼š2
<span class="token assign-left variable">user</span><span class="token operator">=</span>User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test4@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="3-5ã€SQLæ³¨å…¥çš„åŸç†"><a href="#3-5ã€SQLæ³¨å…¥çš„åŸç†" class="headerlink" title="3.5ã€SQLæ³¨å…¥çš„åŸç†"></a>3.5ã€SQLæ³¨å…¥çš„åŸç†</h2><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒMPåœ¨å¯åŠ¨åä¼šå°†<code>BaseMapper</code>ä¸­çš„ä¸€ç³»åˆ—çš„æ–¹æ³•æ³¨å†Œåˆ°<code>meppedStatements</code>ä¸­ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ˜¯å¦‚ ä½•æ³¨å…¥çš„å‘¢ï¼Ÿæµç¨‹åˆæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿä¸‹é¢æˆ‘ä»¬å°†ä¸€èµ·æ¥åˆ†æä¸‹ã€‚ åœ¨MPä¸­ï¼Œ<code>ISqlInjector</code>è´Ÿè´£<code>SQL</code>çš„æ³¨å…¥å·¥ä½œï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ<code>AbstractSqlInjector</code>æ˜¯å®ƒçš„å®ç°ç±»ï¼Œå®ç°å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><code>ctrl+h</code>å¿«é€Ÿæ‰“å¼€ç»§æ‰¿å…³ç³»</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028120423973.png" srcset="/img/loading.gif" lazyload alt="image-20221028120423973"></p>
<p>åœ¨<code>AbstractSqlInjector</code>ä¸­ï¼Œä¸»è¦æ˜¯ç”±<code>inspectInject()</code>æ–¹æ³•è¿›è¡Œæ³¨å…¥çš„ï¼Œå¦‚ä¸‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inspectInject</span><span class="token punctuation">(</span><span class="token class-name">MapperBuilderAssistant</span> builderAssistant<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> mapperClass<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> modelClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">extractModelClass</span><span class="token punctuation">(</span>mapperClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modelClass <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> mapperClass<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> mapperRegistryCache <span class="token operator">=</span> <span class="token class-name">GlobalConfigUtils</span><span class="token punctuation">.</span><span class="token function">getMapperRegistryCache</span><span class="token punctuation">(</span>builderAssistant<span class="token punctuation">.</span><span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mapperRegistryCache<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AbstractMethod</span><span class="token punctuation">></span></span> methodList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMethodList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>methodList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">TableInfo</span> tableInfo <span class="token operator">=</span> <span class="token class-name">TableInfoHelper</span><span class="token punctuation">.</span><span class="token function">initTableInfo</span><span class="token punctuation">(</span>builderAssistant<span class="token punctuation">,</span> modelClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">// å¾ªç¯æ³¨å…¥è‡ªå®šä¹‰æ–¹æ³•</span>
                    methodList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                        m<span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span>builderAssistant<span class="token punctuation">,</span> mapperClass<span class="token punctuation">,</span> modelClass<span class="token punctuation">,</span> tableInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>mapperClass<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", No effective injection method was found."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>

                mapperRegistryCache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>åœ¨å®ç°æ–¹æ³•ä¸­ï¼Œ <code>methodList.forEach(m -&gt; m.inject(builderAssistant, mapperClass, modelClass, tableInfo)); </code>æ˜¯å…³é”®ï¼Œå¾ªç¯éå†æ–¹æ³•ï¼Œè¿›è¡Œæ³¨å…¥ã€‚</p>
<p>æœ€ç»ˆè°ƒç”¨æŠ½è±¡æ–¹æ³•<code>injectMappedStatement</code>è¿›è¡ŒçœŸæ­£çš„æ³¨å…¥ï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028120809868.png" srcset="/img/loading.gif" lazyload alt="image-20221028120809868"></p>
<p>ä»¥<code>SelectById</code>ä¸ºä¾‹æŸ¥çœ‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectById</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMethod</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token class-name">SelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">MappedStatement</span> <span class="token function">injectMappedStatement</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> mapperClass<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> modelClass<span class="token punctuation">,</span> <span class="token class-name">TableInfo</span> tableInfo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">SqlMethod</span> sqlMethod <span class="token operator">=</span> <span class="token class-name">SqlMethod</span><span class="token punctuation">.</span><span class="token constant">LOGIC_SELECT_BY_ID</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSource</span> sqlSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RawSqlSource</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configuration<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>sqlMethod<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sqlSelectColumns</span><span class="token punctuation">(</span>tableInfo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tableInfo<span class="token punctuation">.</span><span class="token function">getTableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tableInfo<span class="token punctuation">.</span><span class="token function">getKeyColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tableInfo<span class="token punctuation">.</span><span class="token function">getKeyProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tableInfo<span class="token punctuation">.</span><span class="token function">getLogicDeleteSql</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addSelectMappedStatement</span><span class="token punctuation">(</span>mapperClass<span class="token punctuation">,</span> sqlMethod<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sqlSource<span class="token punctuation">,</span> modelClass<span class="token punctuation">,</span> tableInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆäº†<code>SqlSource</code>å¯¹è±¡ï¼Œå†å°†<code>SQL</code>é€šè¿‡<code>addSelectMappedStatement</code>æ–¹æ³•æ·»åŠ åˆ°<code>meppedStatements</code>ä¸­ã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028182012422.png" srcset="/img/loading.gif" lazyload alt="image-20221028182012422"></p>
<h1 id="4ã€é…ç½®"><a href="#4ã€é…ç½®" class="headerlink" title="4ã€é…ç½®"></a>4ã€é…ç½®</h1><p>åœ¨MPä¸­æœ‰å¤§é‡çš„é…ç½®ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯MybatisåŸç”Ÿçš„é…ç½®ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯MPçš„é…ç½®ï¼Œè¯¦æƒ…ï¼š<a target="_blank" rel="noopener" href="https://mybatis.plus/c">https://mybatis.plus/c</a> onfig/ ä¸‹é¢æˆ‘ä»¬å¯¹å¸¸ç”¨çš„é…ç½®åšè®²è§£ã€‚</p>
<h2 id="4-1ã€åŸºæœ¬é…ç½®"><a href="#4-1ã€åŸºæœ¬é…ç½®" class="headerlink" title="4.1ã€åŸºæœ¬é…ç½®"></a>4.1ã€åŸºæœ¬é…ç½®</h2><h3 id="4-1-1ã€configLocation"><a href="#4-1-1ã€configLocation" class="headerlink" title="4.1.1ã€configLocation"></a>4.1.1ã€configLocation</h3><p>MyBatis é…ç½®æ–‡ä»¶ä½ç½®ï¼Œå¦‚æœæ‚¨æœ‰å•ç‹¬çš„ MyBatis é…ç½®ï¼Œè¯·å°†å…¶è·¯å¾„é…ç½®åˆ° configLocation ä¸­ã€‚ MyBatis Configuration çš„å…·ä½“å†…å®¹è¯·å‚è€ƒMyBatis å®˜æ–¹æ–‡æ¡£</p>
<p>Spring Bootï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mybatis-plus.config-location <span class="token operator">=</span> classpath:mybatis-config.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Spring MVCï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sqlSessionFactory<span class="token punctuation">"</span></span>
<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>configLocation<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:mybatis-config.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¼”ç¤º1.åœ¨springbooté…ç½®æ–‡ä»¶ä¸­å¼•å…¥mybatis-plusé…ç½®åœ°å€;</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">&lt;?xml</span> <span class="token value attr-value">version="1.0" encoding="UTF-8" ?></span>
<span class="token key attr-name">&lt;!DOCTYPE</span> <span class="token value attr-value">configuration</span>
<span class="token key attr-name">        PUBLIC</span> <span class="token value attr-value">"-//mybatis.org//DTD Config 3.0//EN"</span>
<span class="token key attr-name">        "http</span><span class="token punctuation">:</span><span class="token value attr-value">//mybatis.org/dtd/mybatis-3-config.dtd"></span>
&lt;configuration>
    &lt;plugins>
<span class="token key attr-name">        &lt;plugin</span> <span class="token value attr-value">interceptor="com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor">&lt;/plugin></span>
    &lt;/plugins>
&lt;/configuration>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028184136424.png" srcset="/img/loading.gif" lazyload alt="image-20221028184136424"></p>
<p>åœ¨springbootä¸­æ·»åŠ mybatis-plusé…ç½®åœ°å€ä¿¡æ¯</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028184623797.png" srcset="/img/loading.gif" lazyload alt="image-20221028184623797"></p>
<p>å°†ä¹‹å‰é…ç½®çš„åˆ†é¡µæ’ä»¶æ³¨é‡Šæ‰</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028184210257.png" srcset="/img/loading.gif" lazyload alt="image-20221028184210257"></p>
<p>æ£€æµ‹åˆ†é¡µåŠŸèƒ½</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028184255224.png" srcset="/img/loading.gif" lazyload alt="image-20221028184255224"></p>
<p>æ¼”ç¤º2ï¼šspringé…ç½®æ–‡ä»¶ä¸­å¼•å…¥mybatis-configæ–‡ä»¶</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221028185218725.png" srcset="/img/loading.gif" lazyload alt="image-20221028185218725"></p>
<h3 id="4-1-2ã€mapperLocations"><a href="#4-1-2ã€mapperLocations" class="headerlink" title="4.1.2ã€mapperLocations"></a>4.1.2ã€mapperLocations</h3><p>MyBatis Mapper æ‰€å¯¹åº”çš„ XML æ–‡ä»¶ä½ç½®ï¼Œå¦‚æœæ‚¨åœ¨ Mapper ä¸­æœ‰è‡ªå®šä¹‰æ–¹æ³•ï¼ˆXML ä¸­æœ‰è‡ªå®šä¹‰å®ç°ï¼‰ï¼Œéœ€è¦è¿›è¡Œ è¯¥é…ç½®ï¼Œå‘Šè¯‰ Mapper æ‰€å¯¹åº”çš„ XML æ–‡ä»¶ä½ç½®ã€‚</p>
<p>Spring Bootï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">mybatis<span class="token punctuation">-</span>plus.mapper<span class="token punctuation">-</span>locations = classpath<span class="token important">*:mybatis/*.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Spring MVCï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">&lt;bean</span> <span class="token value attr-value">id="sqlSessionFactory"</span>
<span class="token key attr-name">class</span><span class="token punctuation">=</span><span class="token value attr-value">"com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"></span>
<span class="token key attr-name">&lt;property</span> <span class="token value attr-value">name="mapperLocations" value="classpath*:mybatis/*.xml"/></span>
&lt;/bean><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>Maven å¤šæ¨¡å—é¡¹ç›®çš„æ‰«æè·¯å¾„éœ€ä»¥ <code>classpath*: </code>å¼€å¤´ ï¼ˆå³åŠ è½½å¤šä¸ª jar åŒ…ä¸‹çš„ XML æ–‡ä»¶ï¼‰</p>
<p>æµ‹è¯•ï¼š</p>
<p>UserMapper.xmlï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
<span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
<span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>findById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
select * from tb_user where id = #&#123;id&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>

    <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByXml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.230  INFO <span class="token number">3115</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.257</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.729</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.609 DEBUG <span class="token number">3115</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: <span class="token keyword">select</span> * from tb_user where <span class="token function">id</span> <span class="token operator">=</span> ? 
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.648 DEBUG <span class="token number">3115</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">4</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.672 DEBUG <span class="token number">3115</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>null, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.719  INFO <span class="token number">3115</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown initiated<span class="token punctuation">..</span>.
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:42:49.743  INFO <span class="token number">3115</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="4-1-3ã€typeAliasesPackage"><a href="#4-1-3ã€typeAliasesPackage" class="headerlink" title="4.1.3ã€typeAliasesPackage"></a>4.1.3ã€typeAliasesPackage</h3><p>MyBaits åˆ«ååŒ…æ‰«æè·¯å¾„ï¼Œé€šè¿‡è¯¥å±æ€§å¯ä»¥ç»™åŒ…ä¸­çš„ç±»æ³¨å†Œåˆ«åï¼Œæ³¨å†Œååœ¨ Mapper å¯¹åº”çš„ XML æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ ç”¨ç±»åï¼Œè€Œä¸ç”¨ä½¿ç”¨å…¨é™å®šçš„ç±»åï¼ˆå³ XML ä¸­è°ƒç”¨çš„æ—¶å€™ä¸ç”¨åŒ…å«åŒ…åï¼‰ã€‚</p>
<p>Spring Bootï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">mybatis<span class="token punctuation">-</span>plus.type<span class="token punctuation">-</span>aliases<span class="token punctuation">-</span>package = cn.itcast.mp.pojo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Spring MVCï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"<span class="token punctuation">></span>
&lt;property name="typeAliasesPackage"
value="com.baomidou.mybatisplus.samples.quickstart.entity"/<span class="token punctuation">></span>
&lt;/bean<span class="token punctuation">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221029135138787.png" srcset="/img/loading.gif" lazyload alt="image-20221029135138787"></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.408  INFO <span class="token number">3144</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.m.ItcastMpSpringbootApplicationTests <span class="token builtin class-name">:</span> Started ItcastMpSpringbootApplicationTests <span class="token keyword">in</span> <span class="token number">3.007</span> seconds <span class="token punctuation">(</span>JVM running <span class="token keyword">for</span> <span class="token number">4.547</span><span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.829 DEBUG <span class="token number">3144</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: <span class="token keyword">select</span> * from tb_user where <span class="token function">id</span> <span class="token operator">=</span> ? 
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.866 DEBUG <span class="token number">3144</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">4</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.892 DEBUG <span class="token number">3144</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.findById  <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhaoliu, <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">123456</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>èµµå…­, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>null, <span class="token assign-left variable">address</span><span class="token operator">=</span>null<span class="token punctuation">)</span>
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.938  INFO <span class="token number">3144</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown initiated<span class="token punctuation">..</span>.
<span class="token number">2022</span>-10-29 <span class="token number">13</span>:49:13.958  INFO <span class="token number">3144</span> --- <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> com.zaxxer.hikari.HikariDataSource       <span class="token builtin class-name">:</span> HikariPool-1 - Shutdown completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="4-2ã€è¿›é˜¶é…ç½®"><a href="#4-2ã€è¿›é˜¶é…ç½®" class="headerlink" title="4.2ã€è¿›é˜¶é…ç½®"></a>4.2ã€è¿›é˜¶é…ç½®</h2><p>æœ¬éƒ¨åˆ†ï¼ˆConfigurationï¼‰çš„é…ç½®å¤§éƒ½ä¸º MyBatis åŸç”Ÿæ”¯æŒçš„é…ç½®ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡ MyBatis XML é…ç½®æ–‡ä»¶çš„å½¢ å¼è¿›è¡Œé…ç½®ã€‚</p>
<h3 id="4-2-1ã€mapUnderscoreToCamelCase"><a href="#4-2-1ã€mapUnderscoreToCamelCase" class="headerlink" title="4.2.1ã€mapUnderscoreToCamelCase"></a>4.2.1ã€mapUnderscoreToCamelCase</h3><ul>
<li>ç±»å‹ï¼š boolean </li>
<li>é»˜è®¤å€¼ï¼š true</li>
</ul>
<p>æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™ï¼ˆcamel caseï¼‰æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMNï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰ åˆ°ç»å…¸ Java å± æ€§å aColumnï¼ˆé©¼å³°å‘½åï¼‰ çš„ç±»ä¼¼æ˜ å°„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š æ­¤å±æ€§åœ¨ MyBatis ä¸­åŸé»˜è®¤å€¼ä¸º falseï¼Œåœ¨ MyBatis-Plus ä¸­ï¼Œæ­¤å±æ€§ä¹Ÿå°†ç”¨äºç”Ÿæˆæœ€ç»ˆçš„ SQL çš„ select body å¦‚æœæ‚¨çš„æ•°æ®åº“å‘½åç¬¦åˆè§„åˆ™æ— éœ€ä½¿ç”¨ @TableField æ³¨è§£æŒ‡å®šæ•°æ®åº“å­—æ®µå</p>
</blockquote>
<p>ç¤ºä¾‹ï¼ˆSpringBootï¼‰ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#å…³é—­è‡ªåŠ¨é©¼å³°æ˜ å°„ï¼Œè¯¥å‚æ•°ä¸èƒ½å’Œmybatis-plus.config-locationåŒæ—¶å­˜åœ¨</span>
<span class="token key attr-name">mybatis-plus.configuration.map-underscore-to-camel-case</span><span class="token punctuation">=</span><span class="token value attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221029140044927.png" srcset="/img/loading.gif" lazyload alt="image-20221029140044927"></p>
<h3 id="4-2-2ã€cacheEnabled"><a href="#4-2-2ã€cacheEnabled" class="headerlink" title="4.2.2ã€cacheEnabled"></a>4.2.2ã€cacheEnabled</h3><ul>
<li>ç±»å‹ï¼š boolean </li>
<li>é»˜è®¤å€¼ï¼š true</li>
</ul>
<p>å…¨å±€åœ°å¼€å¯æˆ–å…³é—­é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ˜ å°„å™¨å·²ç»é…ç½®çš„ä»»ä½•ç¼“å­˜ï¼Œé»˜è®¤ä¸º trueã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">mybatis-plus.configuration.cache-enabled</span><span class="token punctuation">=</span><span class="token value attr-value">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h2 id="4-3ã€DB-ç­–ç•¥é…ç½®"><a href="#4-3ã€DB-ç­–ç•¥é…ç½®" class="headerlink" title="4.3ã€DB ç­–ç•¥é…ç½®"></a>4.3ã€DB ç­–ç•¥é…ç½®</h2><h3 id="4-3-1ã€idType"><a href="#4-3-1ã€idType" class="headerlink" title="4.3.1ã€idType"></a>4.3.1ã€idType</h3><ul>
<li>ç±»å‹ï¼š com.baomidou.mybatisplus.annotation.IdType </li>
<li>é»˜è®¤å€¼ï¼š ID_WORKER</li>
</ul>
<p>å…¨å±€é»˜è®¤ä¸»é”®ç±»å‹ï¼Œè®¾ç½®åï¼Œå³å¯çœç•¥å®ä½“å¯¹è±¡ä¸­çš„<code>@TableId(type = IdType.AUTO)</code>é…ç½®ã€‚</p>
<p>ç¤ºä¾‹ï¼š SpringBootï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">mybatis-plus.global-config.db-config.id-type</span><span class="token punctuation">=</span><span class="token value attr-value">auto</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>SpringMVCï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">&lt;!--è¿™é‡Œä½¿ç”¨MPæä¾›çš„sqlSessionFactoryï¼Œå®Œæˆäº†Springä¸MPçš„æ•´åˆ-->
<span class="token key attr-name">&lt;bean</span> <span class="token value attr-value">id="sqlSessionFactory"</span>
<span class="token key attr-name">class</span><span class="token punctuation">=</span><span class="token value attr-value">"com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"></span>
<span class="token key attr-name">	&lt;property</span> <span class="token value attr-value">name="dataSource" ref="dataSource"/></span>
<span class="token key attr-name">	&lt;property</span> <span class="token value attr-value">name="globalConfig"></span>
<span class="token key attr-name">		&lt;bean</span> <span class="token value attr-value">class="com.baomidou.mybatisplus.core.config.GlobalConfig"></span>
<span class="token key attr-name">				&lt;property</span> <span class="token value attr-value">name="dbConfig"></span>
<span class="token key attr-name">						&lt;bean</span> <span class="token value attr-value">class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig"></span>
<span class="token key attr-name">								&lt;property</span> <span class="token value attr-value">name="idType" value="AUTO"/></span>
						&lt;/bean>
				&lt;/property>
		&lt;/bean>
	&lt;/property>
&lt;/bean><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¼”ç¤º</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221029144142516.png" srcset="/img/loading.gif" lazyload alt="image-20221029144142516"></p>
<h3 id="4-3-2ã€tablePrefix"><a href="#4-3-2ã€tablePrefix" class="headerlink" title="4.3.2ã€tablePrefix"></a>4.3.2ã€tablePrefix</h3><ul>
<li>ç±»å‹ï¼š String </li>
<li>é»˜è®¤å€¼ï¼š null</li>
</ul>
<p>è¡¨åå‰ç¼€ï¼Œå…¨å±€é…ç½®åå¯çœç•¥@TableName()é…ç½®ã€‚</p>
<p>SpringBootï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">mybatis-plus.global-config.db-config.table-prefix</span><span class="token punctuation">=</span><span class="token value attr-value">tb_</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>SpringMVCï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">&lt;!--è¿™é‡Œä½¿ç”¨MPæä¾›çš„sqlSessionFactoryï¼Œå®Œæˆäº†Springä¸MPçš„æ•´åˆ-->
<span class="token key attr-name">&lt;bean</span> <span class="token value attr-value">id="sqlSessionFactory"</span>
<span class="token key attr-name">class</span><span class="token punctuation">=</span><span class="token value attr-value">"com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"></span>
<span class="token key attr-name">	&lt;property</span> <span class="token value attr-value">name="dataSource" ref="dataSource"/></span>
<span class="token key attr-name">	&lt;property</span> <span class="token value attr-value">name="globalConfig"></span>
<span class="token key attr-name">		&lt;bean</span> <span class="token value attr-value">class="com.baomidou.mybatisplus.core.config.GlobalConfig"></span>
<span class="token key attr-name">				&lt;property</span> <span class="token value attr-value">name="dbConfig"></span>
<span class="token key attr-name">						&lt;bean</span> <span class="token value attr-value">class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig"></span>
<span class="token key attr-name">								&lt;property</span> <span class="token value attr-value">name="idType" value="AUTO"/></span>
								
						&lt;/bean>
				&lt;/property>
		&lt;/bean>
	&lt;/property>
&lt;/bean><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>
<p>æ¼”ç¤ºï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221029150606459.png" srcset="/img/loading.gif" lazyload alt="image-20221029150606459"></p>
<h1 id="5ã€æ¡ä»¶æ„é€ å™¨"><a href="#5ã€æ¡ä»¶æ„é€ å™¨" class="headerlink" title="5ã€æ¡ä»¶æ„é€ å™¨"></a>5ã€æ¡ä»¶æ„é€ å™¨</h1><p>åœ¨MPä¸­ï¼ŒWrapperæ¥å£çš„å®ç°ç±»å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031121959035.png" srcset="/img/loading.gif" lazyload alt="image-20221031121959035"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒAbstractWrapperå’ŒAbstractChainWrapperæ˜¯é‡ç‚¹å®ç°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹å­¦ä¹ AbstractWrapperä»¥åŠå…¶ å­ç±»ã€‚</p>
<p>è¯´æ˜: QueryWrapper(LambdaQueryWrapper) å’Œ UpdateWrapper(LambdaUpdateWrapper) çš„çˆ¶ç±» ç”¨äºç”Ÿæˆ sql çš„ where æ¡ä»¶, entity å±æ€§ä¹Ÿç”¨äºç”Ÿæˆ sql çš„ where æ¡ä»¶ æ³¨æ„: entity ç”Ÿæˆçš„ where æ¡ä»¶ä¸ ä½¿ç”¨å„ä¸ª api ç”Ÿæˆ çš„ where æ¡ä»¶æ²¡æœ‰ä»»ä½•å…³è”è¡Œä¸º</p>
<h2 id="5-1ã€allEq"><a href="#5-1ã€allEq" class="headerlink" title="5.1ã€allEq"></a>5.1ã€allEq</h2><h3 id="5-1-1ã€è¯´æ˜"><a href="#5-1-1ã€è¯´æ˜" class="headerlink" title="5.1.1ã€è¯´æ˜"></a>5.1.1ã€è¯´æ˜</h3><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> params<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="å…¨éƒ¨eq-æˆ–ä¸ªåˆ«isNull"><a href="#å…¨éƒ¨eq-æˆ–ä¸ªåˆ«isNull" class="headerlink" title="å…¨éƒ¨eq(æˆ–ä¸ªåˆ«isNull)"></a>å…¨éƒ¨eq(æˆ–ä¸ªåˆ«isNull)</h4><p>ä¸ªåˆ«å‚æ•°è¯´æ˜: </p>
<ul>
<li><code>params</code> : key ä¸ºæ•°æ®åº“å­—æ®µå, value ä¸ºå­—æ®µå€¼ </li>
<li><code>null2IsNull</code> : ä¸º true åˆ™åœ¨ map çš„ value ä¸º null æ—¶è°ƒç”¨<code>isNull</code>æ–¹æ³•,ä¸º false æ—¶åˆ™<code>å¿½ç•¥ value ä¸º null </code>çš„</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">ä¾‹<span class="token number">1</span><span class="token operator">:</span> <span class="token function">allEq</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">"è€ç‹"</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> id <span class="token operator">=</span> <span class="token number">1</span> and name <span class="token operator">=</span> <span class="token char">'è€ç‹'</span> and age is <span class="token keyword">null</span>
ä¾‹<span class="token number">2</span><span class="token operator">:</span> <span class="token function">allEq</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">"è€ç‹"</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> id <span class="token operator">=</span> <span class="token number">1</span> and name <span class="token operator">=</span> <span class="token char">'è€ç‹'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>æ¼”ç¤ºï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031124213548.png" srcset="/img/loading.gif" lazyload alt="image-20221031124213548"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031124317921.png" srcset="/img/loading.gif" lazyload alt="image-20221031124317921"></p>
<h4 id="ä¸ªåˆ«å‚æ•°è¯´æ˜-filter"><a href="#ä¸ªåˆ«å‚æ•°è¯´æ˜-filter" class="headerlink" title="ä¸ªåˆ«å‚æ•°è¯´æ˜: filter"></a>ä¸ªåˆ«å‚æ•°è¯´æ˜: filter</h4><p>è¿‡æ»¤å‡½æ•°,æ˜¯å¦å…è®¸å­—æ®µä¼ å…¥æ¯”å¯¹æ¡ä»¶ä¸­ <code>params </code>ä¸ <code>null2IsNull </code>: åŒä¸Š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">ä¾‹<span class="token number">1</span><span class="token operator">:</span> <span class="token function">allEq</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-></span> k<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">"è€ç‹"</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name <span class="token operator">=</span> <span class="token char">'è€ç‹'</span>
and age is <span class="token keyword">null</span>
ä¾‹<span class="token number">2</span><span class="token operator">:</span> <span class="token function">allEq</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-></span> k<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">"è€ç‹"</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name <span class="token operator">=</span>
<span class="token char">'è€ç‹'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¼”ç¤ºï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031130105531.png" srcset="/img/loading.gif" lazyload alt="image-20221031130105531"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031130220538.png" srcset="/img/loading.gif" lazyload alt="image-20221031130220538"></p>
<h2 id="5-2ã€åŸºæœ¬æ¯”è¾ƒæ“ä½œ"><a href="#5-2ã€åŸºæœ¬æ¯”è¾ƒæ“ä½œ" class="headerlink" title="5.2ã€åŸºæœ¬æ¯”è¾ƒæ“ä½œ"></a>5.2ã€åŸºæœ¬æ¯”è¾ƒæ“ä½œ</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">eq
	ç­‰äº <span class="token operator">=</span>
ne
	ä¸ç­‰äº <span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span>
gt
	å¤§äº <span class="token operator">></span>
ge
	å¤§äºç­‰äº <span class="token operator">>=</span>
lt
	å°äº <span class="token operator">&lt;</span>
le
	å°äºç­‰äº <span class="token operator">&lt;=</span>
between
	<span class="token class-name">B</span>	<span class="token constant">ETWEEN</span> å€¼<span class="token number">1</span> <span class="token constant">AND</span> å€¼<span class="token number">2</span>
notBetween
	<span class="token constant">NOT</span> <span class="token constant">BETWEEN</span> å€¼<span class="token number">1</span> <span class="token constant">AND</span> å€¼<span class="token number">2</span>
in
	å­—æ®µ <span class="token constant">IN</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
notIn
	å­—æ®µ <span class="token class-name">NOT</span> <span class="token constant">IN</span> <span class="token punctuation">(</span>v0<span class="token punctuation">,</span> v1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031131021026.png" srcset="/img/loading.gif" lazyload alt="image-20221031131021026"></p>
<h2 id="5-3ã€æ¨¡ç³ŠæŸ¥è¯¢"><a href="#5-3ã€æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="5.3ã€æ¨¡ç³ŠæŸ¥è¯¢"></a>5.3ã€æ¨¡ç³ŠæŸ¥è¯¢</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">like
		<span class="token constant">LIKE</span> <span class="token char">'%å€¼%'</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">like</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"ç‹"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name like <span class="token char">'%ç‹%'</span>
notLike
		<span class="token constant">NOT</span> <span class="token constant">LIKE</span> <span class="token char">'%å€¼%'</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">notLike</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"ç‹"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name not like <span class="token char">'%ç‹%'</span>
likeLeft
		<span class="token constant">LIKE</span> <span class="token char">'%å€¼'</span>s
		ä¾‹<span class="token operator">:</span> <span class="token function">likeLeft</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"ç‹"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name like <span class="token char">'%ç‹'</span>
likeRight
		<span class="token constant">LIKE</span> <span class="token char">'å€¼%'</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">likeRight</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"ç‹"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> name like <span class="token char">'ç‹%'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031135149453.png" srcset="/img/loading.gif" lazyload alt="image-20221031135149453"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031135824338.png" srcset="/img/loading.gif" lazyload alt="image-20221031135824338"></p>
<h2 id="5-4ã€æ’åº"><a href="#5-4ã€æ’åº" class="headerlink" title="5.4ã€æ’åº"></a>5.4ã€æ’åº</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">orderBy
		æ’åºï¼š<span class="token constant">ORDER</span> <span class="token constant">BY</span> å­—æ®µ<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> order by id <span class="token constant">ASC</span><span class="token punctuation">,</span>name <span class="token constant">ASC</span>
orderByAsc
		æ’åºï¼š<span class="token constant">ORDER</span> <span class="token constant">BY</span> å­—æ®µ<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token constant">ASC</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">orderByAsc</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> order by id <span class="token constant">ASC</span><span class="token punctuation">,</span>name <span class="token constant">ASC</span>
orderByDesc
		æ’åºï¼š<span class="token constant">ORDER</span> <span class="token constant">BY</span> å­—æ®µ<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token constant">DESC</span>
		ä¾‹<span class="token operator">:</span> <span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> order by id <span class="token constant">DESC</span><span class="token punctuation">,</span>name <span class="token constant">DESC</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031140819993.png" srcset="/img/loading.gif" lazyload alt="image-20221031140819993"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031141233451.png" srcset="/img/loading.gif" lazyload alt="image-20221031141233451"></p>
<h2 id="5-5ã€é€»è¾‘æŸ¥è¯¢"><a href="#5-5ã€é€»è¾‘æŸ¥è¯¢" class="headerlink" title="5.5ã€é€»è¾‘æŸ¥è¯¢"></a>5.5ã€é€»è¾‘æŸ¥è¯¢</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">or
		æ‹¼æ¥ <span class="token constant">OR</span>
    ä¸»åŠ¨è°ƒç”¨ or è¡¨ç¤ºç´§æ¥ç€ä¸‹ä¸€ä¸ªæ–¹æ³•ä¸æ˜¯ç”¨ and è¿æ¥<span class="token operator">!</span><span class="token punctuation">(</span>ä¸è°ƒç”¨ or åˆ™é»˜è®¤ä¸ºä½¿ç”¨ and è¿æ¥<span class="token punctuation">)</span>
and
		<span class="token constant">AND</span> åµŒå¥—
		ä¾‹<span class="token operator">:</span> <span class="token function">and</span><span class="token punctuation">(</span>i <span class="token operator">-></span> i<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"æç™½"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ne</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"æ´»ç€"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-></span> and <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token char">'æç™½'</span> and status <span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token char">'æ´»ç€'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¼”ç¤ºï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031141838014.png" srcset="/img/loading.gif" lazyload alt="image-20221031141838014"></p>
<h2 id="5-6ã€select"><a href="#5-6ã€select" class="headerlink" title="5.6ã€select"></a>5.6ã€select</h2><p>åœ¨MPæŸ¥è¯¢ä¸­ï¼Œé»˜è®¤æŸ¥è¯¢æ‰€æœ‰çš„å­—æ®µï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥é€šè¿‡<code>select</code>æ–¹æ³•è¿›è¡ŒæŒ‡å®šå­—æ®µã€‚</p>
<p>æ¼”ç¤º</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031153051092.png" srcset="/img/loading.gif" lazyload alt="image-20221031153051092"></p>
<h1 id="6ã€-ActiveRecord"><a href="#6ã€-ActiveRecord" class="headerlink" title="6ã€ ActiveRecord"></a>6ã€ ActiveRecord</h1><p>ActiveRecordï¼ˆç®€ç§°ARï¼‰ä¸€ç›´å¹¿å—åŠ¨æ€è¯­è¨€ï¼ˆ PHP ã€ Ruby ç­‰ï¼‰çš„å–œçˆ±ï¼Œè€Œ Java ä½œä¸ºå‡†é™æ€è¯­è¨€ï¼Œå¯¹äº ActiveRecord å¾€å¾€åªèƒ½æ„Ÿå¹å…¶ä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿåœ¨ AR é“è·¯ä¸Šè¿›è¡Œäº†ä¸€å®šçš„æ¢ç´¢ï¼Œå–œæ¬¢å¤§å®¶èƒ½å¤Ÿå–œæ¬¢ã€‚</p>
<p>ä»€ä¹ˆæ˜¯ActiveRecordï¼Ÿ </p>
<p>ActiveRecordä¹Ÿå±äºORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰å±‚ï¼Œç”±Railsæœ€æ—©æå‡ºï¼Œéµå¾ªæ ‡å‡†çš„ORMæ¨¡å‹ï¼šè¡¨æ˜ å°„åˆ°è®°å½•ï¼Œè®° å½•æ˜ å°„åˆ°å¯¹è±¡ï¼Œå­—æ®µæ˜ å°„åˆ°å¯¹è±¡å±æ€§ã€‚é…åˆéµå¾ªçš„å‘½åå’Œé…ç½®æƒ¯ä¾‹ï¼Œèƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦çš„å¿«é€Ÿå®ç°æ¨¡å‹çš„æ“ä½œï¼Œè€Œ ä¸”ç®€æ´æ˜“æ‡‚ã€‚</p>
<p><code>ActiveRecord</code>çš„ä¸»è¦æ€æƒ³æ˜¯ï¼š</p>
<ul>
<li> æ¯ä¸€ä¸ªæ•°æ®åº“è¡¨å¯¹åº”åˆ›å»ºä¸€ä¸ªç±»ï¼Œç±»çš„æ¯ä¸€ä¸ªå¯¹è±¡å®ä¾‹å¯¹åº”äºæ•°æ®åº“ä¸­è¡¨çš„ä¸€è¡Œè®°å½•ï¼›é€šå¸¸è¡¨çš„æ¯ä¸ªå­—æ®µ åœ¨ç±»ä¸­éƒ½æœ‰ç›¸åº”çš„Fieldï¼› </li>
<li>ActiveRecordåŒæ—¶è´Ÿè´£æŠŠè‡ªå·±æŒä¹…åŒ–ï¼Œåœ¨ActiveRecordä¸­å°è£…äº†å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œå³CURD; </li>
<li>ActiveRecordæ˜¯ä¸€ç§é¢†åŸŸæ¨¡å‹(Domain Model)ï¼Œå°è£…äº†éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ï¼›</li>
</ul>
<h2 id="6-1ã€å¼€å¯ARä¹‹æ—…"><a href="#6-1ã€å¼€å¯ARä¹‹æ—…" class="headerlink" title="6.1ã€å¼€å¯ARä¹‹æ—…"></a>6.1ã€å¼€å¯ARä¹‹æ—…</h2><p>åœ¨MPä¸­ï¼Œå¼€å¯ARéå¸¸ç®€å•ï¼Œåªéœ€è¦å°†å®ä½“å¯¹è±¡ç»§æ‰¿<code>Model</code>å³å¯ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableField</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableId</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">TableName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>activerecord<span class="token punctuation">.</span></span><span class="token class-name">Model</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token comment">//@TableName("tb_user")</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
<span class="token comment">//    @TableId(type= IdType.AUTO) //æŒ‡å®šidç±»å‹ä¸ºè‡ªå¢é•¿</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"email"</span><span class="token punctuation">)</span><span class="token comment">//è§£å†³å­—æ®µåä¸ä¸€è‡´</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mail<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span><span class="token comment">//è¯¥å­—æ®µåœ¨æ•°æ®åº“è¡¨ä¸­ä¸å­˜åœ¨</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="6-2ã€æ ¹æ®ä¸»é”®æŸ¥è¯¢"><a href="#6-2ã€æ ¹æ®ä¸»é”®æŸ¥è¯¢" class="headerlink" title="6.2ã€æ ¹æ®ä¸»é”®æŸ¥è¯¢"></a>6.2ã€æ ¹æ®ä¸»é”®æŸ¥è¯¢</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">User</span> user1 <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031155306066.png" srcset="/img/loading.gif" lazyload alt="image-20221031155306066"></p>
<h2 id="6-3ã€æ–°å¢æ•°æ®"><a href="#6-3ã€æ–°å¢æ•°æ®" class="headerlink" title="6.3ã€æ–°å¢æ•°æ®"></a>6.3ã€æ–°å¢æ•°æ®</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testARInster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"åˆ˜å¤‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"1234"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       user<span class="token punctuation">.</span><span class="token function">setMail</span><span class="token punctuation">(</span><span class="token string">"liubei@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">boolean</span> insert <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>insert<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031160710800.png" srcset="/img/loading.gif" lazyload alt="image-20221031160710800"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031160805990.png" srcset="/img/loading.gif" lazyload alt="image-20221031160805990"></p>
<h2 id="6-5ã€æ›´æ–°æ“ä½œ"><a href="#6-5ã€æ›´æ–°æ“ä½œ" class="headerlink" title="6.5ã€æ›´æ–°æ“ä½œ"></a>6.5ã€æ›´æ–°æ“ä½œ</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testARUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"999"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">boolean</span> b <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031161124086.png" srcset="/img/loading.gif" lazyload alt="image-20221031161124086"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031161151596.png" srcset="/img/loading.gif" lazyload alt="image-20221031161151596"></p>
<h2 id="6-6ã€åˆ é™¤æ“ä½œ"><a href="#6-6ã€åˆ é™¤æ“ä½œ" class="headerlink" title="6.6ã€åˆ é™¤æ“ä½œ"></a>6.6ã€åˆ é™¤æ“ä½œ</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testARDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> b <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031161347813.png" srcset="/img/loading.gif" lazyload alt="image-20221031161347813"></p>
<h2 id="6-7ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢"><a href="#6-7ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="6.7ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢"></a>6.7ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testARQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      objectQueryWrapper<span class="token punctuation">.</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>objectQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
      users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user1 <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031163524827.png" srcset="/img/loading.gif" lazyload alt="image-20221031163524827"></p>
<h1 id="7ã€-Oracle-ä¸»é”®Sequence"><a href="#7ã€-Oracle-ä¸»é”®Sequence" class="headerlink" title="7ã€ Oracle ä¸»é”®Sequence"></a>7ã€ Oracle ä¸»é”®Sequence</h1><p>åœ¨mysqlä¸­ï¼Œä¸»é”®å¾€å¾€æ˜¯è‡ªå¢é•¿çš„ï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯Oracleæ•°æ®åº“ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨è‡ªå¢ é•¿äº†ï¼Œå°±å¾—ä½¿ç”¨Sequence åºåˆ—ç”Ÿæˆidå€¼äº†ã€‚</p>
<h2 id="7-1ã€éƒ¨ç½²Oracleç¯å¢ƒ"><a href="#7-1ã€éƒ¨ç½²Oracleç¯å¢ƒ" class="headerlink" title="7.1ã€éƒ¨ç½²Oracleç¯å¢ƒ"></a>7.1ã€éƒ¨ç½²Oracleç¯å¢ƒ</h2><p>ä¸ºäº†ç®€åŒ–ç¯å¢ƒéƒ¨ç½²ï¼Œè¿™é‡Œä½¿ç”¨<code>Docker</code>ç¯å¢ƒè¿›è¡Œéƒ¨ç½²å®‰è£…<code>Oracle</code>ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ‹‰å–é•œåƒ</span>
<span class="token function">docker</span> pull sath89/oracle-12c
<span class="token comment">#åˆ›å»ºå®¹å™¨</span>
<span class="token function">docker</span> create <span class="token parameter variable">--name</span> oracle <span class="token parameter variable">-p</span> <span class="token number">1521</span>:1521 sath89/oracle-12c
<span class="token comment">#å¯åŠ¨</span>
<span class="token function">docker</span> start oracle <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> logs <span class="token parameter variable">-f</span> oracle
<span class="token comment">#ä¸‹é¢æ˜¯å¯åŠ¨è¿‡ç¨‹</span>
Database not initialized. Initializing database.
Starting tnslsnr
Copying database files
<span class="token number">1</span>% complete
<span class="token number">3</span>% complete
<span class="token number">11</span>% complete
<span class="token number">18</span>% complete
<span class="token number">26</span>% complete
<span class="token number">37</span>% complete
Creating and starting Oracle instance
<span class="token number">40</span>% complete
<span class="token number">45</span>% complete
<span class="token number">50</span>% complete
<span class="token number">55</span>% complete
<span class="token number">56</span>% complete
<span class="token number">60</span>% complete
<span class="token number">62</span>% complete
Completing Database Creation
<span class="token number">66</span>% complete
<span class="token number">70</span>% complete
<span class="token number">73</span>% complete
<span class="token number">85</span>% complete
<span class="token number">96</span>% complete
<span class="token number">100</span>% complete
Look at the log <span class="token function">file</span> <span class="token string">"/u01/app/oracle/cfgtoollogs/dbca/xe/xe.log"</span> <span class="token keyword">for</span> further details.
Configuring Apex console
Database initialized. Please visit http://<span class="token comment">#containeer:8080/em</span>
http://<span class="token comment">#containeer:8080/apex for extra configuration if needed</span>
Starting web management console
PL/SQL procedure successfully completed.
Starting <span class="token function">import</span> from <span class="token string">'/docker-entrypoint-initdb.d'</span><span class="token builtin class-name">:</span>
ls: cannot access /docker-entrypoint-initdb.d/*: No such <span class="token function">file</span> or directory
Import finished
Database ready to use. Enjoy<span class="token operator">!</span> <span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token comment">#é€šè¿‡ç”¨æˆ·åå¯†ç å³å¯ç™»å½•</span>
ç”¨æˆ·åå’Œå¯†ç ä¸ºï¼š system/oracle
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ä¸‹é¢ä½¿ç”¨navicat12è¿›è¡Œè¿æ¥å¹¶æ“ä½œoracleï¼Œä½¿ç”¨èµ„æ–™ä¸­æä¾›çš„å®‰è£…åŒ…ï¼Œå¯ä»¥è¯•ç”¨14å¤©ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äºå®‰è£…çš„Oracleæ˜¯64ä½ç‰ˆæœ¬ï¼Œæ‰€ä»¥navicatä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨64ä¸ºç‰ˆæœ¬ï¼Œå¦åˆ™è¿æ¥ä¸æˆåŠŸã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031164832681.png" srcset="/img/loading.gif" lazyload alt="image-20221031164832681"></p>
<p>è¿æ¥æˆåŠŸï¼š</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031164901839.png" srcset="/img/loading.gif" lazyload alt="image-20221031164901839"></p>
<h2 id="7-2ã€åˆ›å»ºè¡¨ä»¥åŠåºåˆ—"><a href="#7-2ã€åˆ›å»ºè¡¨ä»¥åŠåºåˆ—" class="headerlink" title="7.2ã€åˆ›å»ºè¡¨ä»¥åŠåºåˆ—"></a>7.2ã€åˆ›å»ºè¡¨ä»¥åŠåºåˆ—</h2><figure><div class="code-wrapper"><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--åˆ›å»ºè¡¨ï¼Œè¡¨åä»¥åŠå­—æ®µåéƒ½è¦å¤§å†™</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token string">"TB_USER"</span> <span class="token punctuation">(</span>
<span class="token string">"ID"</span> NUMBER<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> VISIBLE <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
<span class="token string">"USER_NAME"</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span> BYTE<span class="token punctuation">)</span> VISIBLE <span class="token punctuation">,</span>
<span class="token string">"PASSWORD"</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span> BYTE<span class="token punctuation">)</span> VISIBLE <span class="token punctuation">,</span>
<span class="token string">"NAME"</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span> BYTE<span class="token punctuation">)</span> VISIBLE <span class="token punctuation">,</span>
<span class="token string">"AGE"</span> NUMBER<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> VISIBLE <span class="token punctuation">,</span>
<span class="token string">"EMAIL"</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span> BYTE<span class="token punctuation">)</span> VISIBLE
<span class="token punctuation">)</span>
<span class="token comment">--åˆ›å»ºåºåˆ—</span>
<span class="token keyword">CREATE</span> SEQUENCE SEQ_USER <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1</span> INCREMENT <span class="token keyword">BY</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="7-3ã€jdbcé©±åŠ¨åŒ…"><a href="#7-3ã€jdbcé©±åŠ¨åŒ…" class="headerlink" title="7.3ã€jdbcé©±åŠ¨åŒ…"></a>7.3ã€jdbcé©±åŠ¨åŒ…</h2><p>ç”±äºç‰ˆæƒåŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡mavençš„ä¸­å¤®ä»“åº“ä¸‹è½½oracleæ•°æ®åº“çš„jdbcé©±åŠ¨åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†é©±åŠ¨åŒ…å®‰è£…åˆ° æœ¬åœ°ä»“åº“ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ojdbc8.jaræ–‡ä»¶åœ¨èµ„æ–™ä¸­å¯ä»¥æ‰¾åˆ°</span>
mvn install:install-file <span class="token parameter variable">-DgroupId</span><span class="token operator">=</span>com.oracle <span class="token parameter variable">-DartifactId</span><span class="token operator">=</span>ojdbc8 <span class="token parameter variable">-Dversion</span><span class="token operator">=</span><span class="token number">12.1</span>.0.1 -
<span class="token assign-left variable">Dpackaging</span><span class="token operator">=</span>jar <span class="token parameter variable">-Dfile</span><span class="token operator">=</span>ojdbc8.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å®‰è£…å®Œæˆåçš„åæ ‡ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.oracle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>ojdbc8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>12.1.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="7-4ã€ä¿®æ”¹application-properties"><a href="#7-4ã€ä¿®æ”¹application-properties" class="headerlink" title="7.4ã€ä¿®æ”¹application.properties"></a>7.4ã€ä¿®æ”¹application.properties</h2><p>å¯¹äºapplication.propertiesçš„ä¿®æ”¹ï¼Œéœ€è¦ä¿®æ”¹2ä¸ªä½ç½®ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#æ•°æ®åº“è¿æ¥é…ç½®</span>
<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">oracle.jdbc.OracleDriver</span>
<span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:oracle:thin:@192.168.31.81:1521:xe</span>
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">system</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">oracle</span>
<span class="token comment">#idç”Ÿæˆç­–ç•¥</span>
<span class="token key attr-name">mybatis-plus.global-config.db-config.id-type</span><span class="token punctuation">=</span><span class="token value attr-value">input</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="7-5ã€é…ç½®åºåˆ—"><a href="#7-5ã€é…ç½®åºåˆ—" class="headerlink" title="7.5ã€é…ç½®åºåˆ—"></a>7.5ã€é…ç½®åºåˆ—</h2><p>ä½¿ç”¨Oracleçš„åºåˆ—éœ€è¦åš2ä»¶äº‹æƒ…ï¼š</p>
<p>ç¬¬ä¸€ï¼Œéœ€è¦é…ç½®MPçš„åºåˆ—ç”Ÿæˆå™¨åˆ°Springå®¹å™¨ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>incrementer<span class="token punctuation">.</span></span><span class="token class-name">OracleKeyGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">PaginationInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">MapperScan</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"cn.itcast.mp.mapper"</span><span class="token punctuation">)</span> <span class="token comment">//è®¾ç½®mapperæ¥å£çš„æ‰«æåŒ…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/**
  * åˆ†é¡µæ’ä»¶
  */</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">PaginationInterceptor</span> <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token comment">/**
  * åºåˆ—ç”Ÿæˆå™¨
  */</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">OracleKeyGenerator</span> <span class="token function">oracleKeyGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OracleKeyGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ç¬¬äºŒï¼Œåœ¨å®ä½“å¯¹è±¡ä¸­æŒ‡å®šåºåˆ—çš„åç§°ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@KeySequence</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"SEQ_USER"</span><span class="token punctuation">,</span> clazz <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>2.7ã€æµ‹è¯•</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperTest</span> <span class="token punctuation">&#123;</span>
<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"test@itcast.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ›¹æ“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"caocao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿”å›çš„resultæ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå¹¶ä¸æ˜¯è‡ªå¢åçš„id</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è‡ªå¢åçš„idä¼šå›å¡«åˆ°å¯¹è±¡ä¸­</span>
  <span class="token punctuation">&#125;</span>
  
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">8L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031165648820.png" srcset="/img/loading.gif" lazyload alt="image-20221031165648820"></p>
<h1 id="8ã€æ’ä»¶"><a href="#8ã€æ’ä»¶" class="headerlink" title="8ã€æ’ä»¶"></a>8ã€æ’ä»¶</h1><h2 id="3-1ã€mybatisçš„æ’ä»¶æœºåˆ¶"><a href="#3-1ã€mybatisçš„æ’ä»¶æœºåˆ¶" class="headerlink" title="3.1ã€mybatisçš„æ’ä»¶æœºåˆ¶"></a>3.1ã€mybatisçš„æ’ä»¶æœºåˆ¶</h2><p>MyBatis å…è®¸ä½ åœ¨å·²æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis å…è®¸ä½¿ç”¨æ’ä»¶æ¥æ‹¦æˆªçš„æ–¹æ³• è°ƒç”¨åŒ…æ‹¬ï¼š</p>
<ol>
<li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed) </li>
<li>ParameterHandler (getParameterObject, setParameters) </li>
<li>ResultSetHandler (handleResultSets, handleOutputParameters)</li>
<li>StatementHandler (prepare, parameterize, batch, update, query)</li>
</ol>
<p>æˆ‘ä»¬çœ‹åˆ°äº†å¯ä»¥æ‹¦æˆªExecutoræ¥å£çš„éƒ¨åˆ†æ–¹æ³•ï¼Œæ¯”å¦‚updateï¼Œqueryï¼Œcommitï¼Œrollbackç­‰æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–æ¥å£çš„ ä¸€äº›æ–¹æ³•ç­‰ã€‚</p>
<p>æ€»ä½“æ¦‚æ‹¬ä¸ºï¼š </p>
<ol>
<li>æ‹¦æˆªæ‰§è¡Œå™¨çš„æ–¹æ³• </li>
<li>æ‹¦æˆªå‚æ•°çš„å¤„ç† </li>
<li>æ‹¦æˆªç»“æœé›†çš„å¤„ç† </li>
<li>æ‹¦æˆªSqlè¯­æ³•æ„å»ºçš„å¤„ç†</li>
</ol>
<p>æ‹¦æˆªå™¨ç¤ºä¾‹ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>plugins</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span></span><span class="token class-name">Executor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span><span class="token class-name">MappedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>



<span class="token annotation punctuation">@Intercepts</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Signature</span><span class="token punctuation">(</span>
        type<span class="token operator">=</span> <span class="token class-name">Executor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        method <span class="token operator">=</span> <span class="token string">"update"</span><span class="token punctuation">,</span>
        args <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">MappedStatement</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">Interceptor</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//æ‹¦æˆªæ–¹æ³•ï¼Œå…·ä½“ä¸šåŠ¡é€»è¾‘ç¼–å†™çš„ä½ç½®</span>
        <span class="token keyword">return</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">plugin</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//åˆ›å»ºtargetå¯¹è±¡çš„ä»£ç†å¯¹è±¡,ç›®çš„æ˜¯å°†å½“å‰æ‹¦æˆªå™¨åŠ å…¥åˆ°è¯¥å¯¹è±¡ä¸­</span>
        <span class="token keyword">return</span> <span class="token class-name">Plugin</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProperties</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//å±æ€§è®¾ç½®</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ³¨å…¥åˆ°Springå®¹å™¨ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
* è‡ªå®šä¹‰æ‹¦æˆªå™¨
*/</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">MyInterceptor</span> <span class="token function">myInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æˆ–è€…é€šè¿‡<code>xml</code>é…ç½®ï¼Œ<code>mybatis-config.xml</code>ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
<span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
<span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn.itcast.mp.plugins.MyInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031194748030.png" srcset="/img/loading.gif" lazyload alt="image-20221031194748030"></p>
<h2 id="3-2ã€æ‰§è¡Œåˆ†ææ’ä»¶"><a href="#3-2ã€æ‰§è¡Œåˆ†ææ’ä»¶" class="headerlink" title="3.2ã€æ‰§è¡Œåˆ†ææ’ä»¶"></a>3.2ã€æ‰§è¡Œåˆ†ææ’ä»¶</h2><p>åœ¨MPä¸­æä¾›äº†å¯¹SQLæ‰§è¡Œçš„åˆ†æçš„æ’ä»¶ï¼Œå¯ç”¨ä½œé˜»æ–­å…¨è¡¨æ›´æ–°ã€åˆ é™¤çš„æ“ä½œï¼Œæ³¨æ„ï¼šè¯¥æ’ä»¶ä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ SpringBooté…ç½®ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">SqlExplainInterceptor</span> <span class="token function">sqlExplainInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token class-name">SqlExplainInterceptor</span> sqlExplainInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlExplainInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ISqlParser</span><span class="token punctuation">></span></span> sqlParserList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// æ”»å‡» SQL é˜»æ–­è§£æå™¨ã€åŠ å…¥è§£æé“¾</span>
  sqlParserList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockAttackSqlParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sqlExplainInterceptor<span class="token punctuation">.</span><span class="token function">setSqlParserList</span><span class="token punctuation">(</span>sqlParserList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> sqlExplainInterceptor<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æµ‹è¯•ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031195715922.png" srcset="/img/loading.gif" lazyload alt="image-20221031195715922"></p>
<h2 id="3-3ã€æ€§èƒ½åˆ†ææ’ä»¶"><a href="#3-3ã€æ€§èƒ½åˆ†ææ’ä»¶" class="headerlink" title="3.3ã€æ€§èƒ½åˆ†ææ’ä»¶"></a>3.3ã€æ€§èƒ½åˆ†ææ’ä»¶</h2><p>æ€§èƒ½åˆ†ææ‹¦æˆªå™¨ï¼Œç”¨äºè¾“å‡ºæ¯æ¡ SQL è¯­å¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå¯ä»¥è®¾ç½®æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>è¯¥æ’ä»¶åªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸å»ºè®®ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- SQL æ‰§è¡Œæ€§èƒ½åˆ†æï¼Œå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œçº¿ä¸Šä¸æ¨èã€‚ maxTime æŒ‡çš„æ˜¯ sql æœ€å¤§æ‰§è¡Œæ—¶é•¿ --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxTime<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
            <span class="token comment">&lt;!--SQLæ˜¯å¦æ ¼å¼åŒ– é»˜è®¤false--></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>format<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>



<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031204132228.png" srcset="/img/loading.gif" lazyload alt="image-20221031204132228"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œæ—¶é—´ä¸º11msã€‚å¦‚æœå°†maxTimeè®¾ç½®ä¸º1ï¼Œé‚£ä¹ˆï¼Œè¯¥æ“ä½œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031204527580.png" srcset="/img/loading.gif" lazyload alt="image-20221031204527580"></p>
<h2 id="3-4ã€ä¹è§‚é”æ’ä»¶"><a href="#3-4ã€ä¹è§‚é”æ’ä»¶" class="headerlink" title="3.4ã€ä¹è§‚é”æ’ä»¶"></a>3.4ã€ä¹è§‚é”æ’ä»¶</h2><h3 id="3-4-1ã€ä¸»è¦é€‚ç”¨åœºæ™¯"><a href="#3-4-1ã€ä¸»è¦é€‚ç”¨åœºæ™¯" class="headerlink" title="3.4.1ã€ä¸»è¦é€‚ç”¨åœºæ™¯"></a>3.4.1ã€ä¸»è¦é€‚ç”¨åœºæ™¯</h3><p>æ„å›¾ï¼š å½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°</p>
<p>ä¹è§‚é”å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰<code>version </code></li>
<li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª<code>version </code></li>
<li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ <code>set version = newVersion where version = oldVersion </code></li>
<li>å¦‚æœ<code>version</code>ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</li>
</ul>
<h3 id="3-4-2ã€æ’ä»¶é…ç½®"><a href="#3-4-2ã€æ’ä»¶é…ç½®" class="headerlink" title="3.4.2ã€æ’ä»¶é…ç½®"></a>3.4.2ã€æ’ä»¶é…ç½®</h3><p>æ–¹å¼1ã€spring xml:</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>æ–¹å¼2ã€spring boot:</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">OptimisticLockerInterceptor</span> <span class="token function">optimisticLockerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OptimisticLockerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="3-4-3ã€æ³¨è§£å®ä½“å­—æ®µ"><a href="#3-4-3ã€æ³¨è§£å®ä½“å­—æ®µ" class="headerlink" title="3.4.3ã€æ³¨è§£å®ä½“å­—æ®µ"></a>3.4.3ã€æ³¨è§£å®ä½“å­—æ®µ</h3><p>éœ€è¦ä¸ºå®ä½“å­—æ®µæ·»åŠ @Versionæ³¨è§£ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œä¸ºè¡¨æ·»åŠ versionå­—æ®µï¼Œå¹¶ä¸”è®¾ç½®åˆå§‹å€¼ä¸º1ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span>
<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>version<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">AFTER</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span> <span class="token keyword">SET</span> <span class="token identifier"><span class="token punctuation">`</span>version<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031205743138.png" srcset="/img/loading.gif" lazyload alt="image-20221031205743138"></p>
<p>ç¬¬äºŒæ­¥ï¼Œä¸ºUserå®ä½“å¯¹è±¡æ·»åŠ versionå­—æ®µï¼Œå¹¶ä¸”æ·»åŠ @Versionæ³¨è§£ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Version</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> version<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>3.4.4ã€æµ‹è¯•</p>
<p>æµ‹è¯•ç”¨ä¾‹;</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateByVersion2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">7L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    user1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¨å°‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221031211518043.png" srcset="/img/loading.gif" lazyload alt="image-20221031211518043"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ›´æ–°çš„æ¡ä»¶ä¸­æœ‰<code>version</code>æ¡ä»¶ï¼Œå¹¶ä¸”æ›´æ–°çš„<code>version</code>ä¸º2ã€‚ å¦‚æœå†æ¬¡æ‰§è¡Œï¼Œæ›´æ–°åˆ™ä¸æˆåŠŸã€‚è¿™æ ·å°±é¿å…äº†å¤šäººåŒæ—¶æ›´æ–°æ—¶å¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚</p>
<h3 id="3-4-5ã€ç‰¹åˆ«è¯´æ˜"><a href="#3-4-5ã€ç‰¹åˆ«è¯´æ˜" class="headerlink" title="3.4.5ã€ç‰¹åˆ«è¯´æ˜"></a>3.4.5ã€ç‰¹åˆ«è¯´æ˜</h3><ul>
<li><strong>æ”¯æŒçš„æ•°æ®ç±»å‹åªæœ‰</strong>:int,Integer,long,Long,Date,Timestamp,LocalDateTime </li>
<li>æ•´æ•°ç±»å‹ä¸‹ newVersion = oldVersion + 1 </li>
<li>newVersion ä¼šå›å†™åˆ° entity ä¸­ </li>
<li>ä»…æ”¯æŒ updateById(id) ä¸ update(entity, wrapper) æ–¹æ³• </li>
<li>åœ¨ update(entity, wrapper) æ–¹æ³•ä¸‹, wrapper ä¸èƒ½å¤ç”¨!!!</li>
</ul>
<h1 id="9ã€Sql-æ³¨å…¥å™¨"><a href="#9ã€Sql-æ³¨å…¥å™¨" class="headerlink" title="9ã€Sql æ³¨å…¥å™¨"></a>9ã€Sql æ³¨å…¥å™¨</h1><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œåœ¨MPä¸­ï¼Œé€šè¿‡AbstractSqlInjectorå°†BaseMapperä¸­çš„æ–¹æ³•æ³¨å…¥åˆ°äº†Mybatiså®¹å™¨ï¼Œè¿™æ ·è¿™äº›æ–¹æ³•æ‰ å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚ é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ‰©å……BaseMapperä¸­çš„æ–¹æ³•ï¼Œåˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬ä»¥æ‰©å±•findAllæ–¹æ³•ä¸ºä¾‹è¿›è¡Œå­¦ä¹ ã€‚</p>
<h2 id="9-1ã€ç¼–å†™MyBaseMapper"><a href="#9-1ã€ç¼–å†™MyBaseMapper" class="headerlink" title="9.1ã€ç¼–å†™MyBaseMapper"></a>9.1ã€ç¼–å†™MyBaseMapper</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MybaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å…¶ä»–çš„Mapperéƒ½å¯ä»¥ç»§æ‰¿è¯¥Mapperï¼Œè¿™æ ·å®ç°äº†ç»Ÿä¸€çš„æ‰©å±•ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">BaseMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">MybaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="9-2ã€ç¼–å†™MySqlInjector"><a href="#9-2ã€ç¼–å†™MySqlInjector" class="headerlink" title="9.2ã€ç¼–å†™MySqlInjector"></a>9.2ã€ç¼–å†™MySqlInjector</h2><p>å¦‚æœç›´æ¥ç»§æ‰¿AbstractSqlInjectorçš„è¯ï¼ŒåŸæœ‰çš„BaseMapperä¸­çš„æ–¹æ³•å°†å¤±æ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ç»§æ‰¿DefaultSqlInjector è¿›è¡Œæ‰©å±•ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>sqlInjector</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">AbstractMethod</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">DefaultSqlInjector</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySqlInjector</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultSqlInjector</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AbstractMethod</span><span class="token punctuation">></span></span> <span class="token function">getMethodList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AbstractMethod</span><span class="token punctuation">></span></span> methodList <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getMethodList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        methodList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> methodList<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="9-3ã€ç¼–å†™FindAll"><a href="#9-3ã€ç¼–å†™FindAll" class="headerlink" title="9.3ã€ç¼–å†™FindAll"></a>9.3ã€ç¼–å†™FindAll</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>sqlInjector</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>injector<span class="token punctuation">.</span></span><span class="token class-name">AbstractMethod</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span></span><span class="token class-name">TableInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span><span class="token class-name">MappedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span><span class="token class-name">SqlSource</span></span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FindAll</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMethod</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MappedStatement</span> <span class="token function">injectMappedStatement</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> mapperClass<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> modelClass<span class="token punctuation">,</span> <span class="token class-name">TableInfo</span> tableInfo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> sqlMethod <span class="token operator">=</span> <span class="token string">"findAll"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from "</span> <span class="token operator">+</span> tableInfo<span class="token punctuation">.</span><span class="token function">getTableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSource</span> sqlSource <span class="token operator">=</span> languageDriver<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> modelClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addSelectMappedStatement</span><span class="token punctuation">(</span>mapperClass<span class="token punctuation">,</span> sqlMethod<span class="token punctuation">,</span> sqlSource<span class="token punctuation">,</span>modelClass<span class="token punctuation">,</span> tableInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="9-4ã€æ³¨å†Œåˆ°Springå®¹å™¨"><a href="#9-4ã€æ³¨å†Œåˆ°Springå®¹å™¨" class="headerlink" title="9.4ã€æ³¨å†Œåˆ°Springå®¹å™¨"></a>9.4ã€æ³¨å†Œåˆ°Springå®¹å™¨</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * è‡ªå®šä¹‰SQLæ³¨å…¥å™¨
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">MySqlInjector</span> <span class="token function">mySqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MySqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="9-5ã€æµ‹è¯•"><a href="#9-5ã€æµ‹è¯•" class="headerlink" title="9.5ã€æµ‹è¯•"></a>9.5ã€æµ‹è¯•</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> all <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101110931990.png" srcset="/img/loading.gif" lazyload alt="image-20221101110931990"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†å…¨å±€æ‰©å±•SQLæ³¨å…¥å™¨ã€‚</p>
<h1 id="10ã€è‡ªåŠ¨å¡«å……åŠŸèƒ½"><a href="#10ã€è‡ªåŠ¨å¡«å……åŠŸèƒ½" class="headerlink" title="10ã€è‡ªåŠ¨å¡«å……åŠŸèƒ½"></a>10ã€è‡ªåŠ¨å¡«å……åŠŸèƒ½</h1><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæ’å…¥æˆ–è€…æ›´æ–°æ•°æ®æ—¶ï¼Œå¸Œæœ›æœ‰äº›å­—æ®µå¯ä»¥è‡ªåŠ¨å¡«å……æ•°æ®ï¼Œæ¯”å¦‚å¯†ç ã€version ç­‰ã€‚åœ¨MPä¸­æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨å¡«å……ã€‚</p>
<h2 id="10-1ã€æ·»åŠ -TableFieldæ³¨è§£"><a href="#10-1ã€æ·»åŠ -TableFieldæ³¨è§£" class="headerlink" title="10.1ã€æ·»åŠ @TableFieldæ³¨è§£"></a>10.1ã€æ·»åŠ <code>@TableField</code>æ³¨è§£</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span> <span class="token comment">//æ’å…¥æ•°æ®æ—¶è¿›è¡Œå¡«å……</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>ä¸º<code>password</code>æ·»åŠ è‡ªåŠ¨å¡«å……åŠŸèƒ½ï¼Œåœ¨æ–°å¢æ•°æ®æ—¶æœ‰æ•ˆã€‚ FieldFillæä¾›äº†å¤šç§æ¨¡å¼é€‰æ‹©ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">FieldFill</span> <span class="token punctuation">&#123;</span>
<span class="token comment">/**
* é»˜è®¤ä¸å¤„ç†
*/</span>
<span class="token constant">DEFAULT</span><span class="token punctuation">,</span>
<span class="token comment">/**
* æ’å…¥æ—¶å¡«å……å­—æ®µ
*/</span>
<span class="token constant">INSERT</span><span class="token punctuation">,</span>
<span class="token comment">/**
* æ›´æ–°æ—¶å¡«å……å­—æ®µ
*/</span>
<span class="token constant">UPDATE</span><span class="token punctuation">,</span>
<span class="token comment">/**
* æ’å…¥å’Œæ›´æ–°æ—¶å¡«å……å­—æ®µ
*/</span>
<span class="token constant">INSERT_UPDATE</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="10-2ã€ç¼–å†™MyMetaObjectHandler"><a href="#10-2ã€ç¼–å†™MyMetaObjectHandler" class="headerlink" title="10.2ã€ç¼–å†™MyMetaObjectHandler"></a>10.2ã€ç¼–å†™MyMetaObjectHandler</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">MetaObjectHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span></span><span class="token class-name">MetaObject</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>


<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMetaObjectHandler</span> <span class="token keyword">implements</span> <span class="token class-name">MetaObjectHandler</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * æ’å…¥å¼è¿›è¡Œå¡«å……
     * @param metaObject
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Object</span> password <span class="token operator">=</span> <span class="token function">getFieldValByName</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>password<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">,</span>metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="10-3ã€æµ‹è¯•"><a href="#10-3ã€æµ‹è¯•" class="headerlink" title="10.3ã€æµ‹è¯•"></a>10.3ã€æµ‹è¯•</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å…³ç¾½"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"guanyu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setMail</span><span class="token punctuation">(</span><span class="token string">"guanyu@itast.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

 <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"è¯¸è‘›äº®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"zhugeliang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setMail</span><span class="token punctuation">(</span><span class="token string">"guanyu@itast.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"88877000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101114020878.png" srcset="/img/loading.gif" lazyload alt="image-20221101114020878"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101114146430.png" srcset="/img/loading.gif" lazyload alt="image-20221101114146430"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101120626037.png" srcset="/img/loading.gif" lazyload alt="image-20221101120626037"></p>
<h1 id="11ã€-é€»è¾‘åˆ é™¤"><a href="#11ã€-é€»è¾‘åˆ é™¤" class="headerlink" title="11ã€ é€»è¾‘åˆ é™¤"></a>11ã€ é€»è¾‘åˆ é™¤</h1><p>å¼€å‘ç³»ç»Ÿæ—¶ï¼Œæœ‰æ—¶å€™åœ¨å®ç°åŠŸèƒ½æ—¶ï¼Œåˆ é™¤æ“ä½œéœ€è¦å®ç°é€»è¾‘åˆ é™¤ï¼Œæ‰€è°“é€»è¾‘åˆ é™¤å°±æ˜¯å°†æ•°æ®æ ‡è®°ä¸ºåˆ é™¤ï¼Œè€Œå¹¶éçœŸæ­£ çš„ç‰©ç†åˆ é™¤ï¼ˆéDELETEæ“ä½œï¼‰ï¼ŒæŸ¥è¯¢æ—¶éœ€è¦æºå¸¦çŠ¶æ€æ¡ä»¶ï¼Œç¡®ä¿è¢«æ ‡è®°çš„æ•°æ®ä¸è¢«æŸ¥è¯¢åˆ°ã€‚è¿™æ ·åšçš„ç›®çš„å°±æ˜¯é¿å… æ•°æ®è¢«çœŸæ­£çš„åˆ é™¤ã€‚</p>
<h2 id="11-1ã€ä¿®æ”¹è¡¨ç»“æ„"><a href="#11-1ã€ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="11.1ã€ä¿®æ”¹è¡¨ç»“æ„"></a>11.1ã€ä¿®æ”¹è¡¨ç»“æ„</h2><p>ä¸º<code>tb_user</code>è¡¨å¢åŠ <code>deleted</code>å­—æ®µï¼Œç”¨äºè¡¨ç¤ºæ•°æ®æ˜¯å¦è¢«åˆ é™¤ï¼Œ1ä»£è¡¨åˆ é™¤ï¼Œ0ä»£è¡¨æœªåˆ é™¤ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span>
<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>deleted<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">'1ä»£è¡¨åˆ é™¤ï¼Œ0ä»£è¡¨æœªåˆ é™¤'</span> <span class="token keyword">AFTER</span>
<span class="token identifier"><span class="token punctuation">`</span>version<span class="token punctuation">`</span></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p>åŒæ—¶ï¼Œä¹Ÿä¿®æ”¹Userå®ä½“ï¼Œå¢åŠ deletedå±æ€§å¹¶ä¸”æ·»åŠ <code>@TableLogic</code>æ³¨è§£ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@TableLogic</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h2 id="6-2ã€é…ç½®"><a href="#6-2ã€é…ç½®" class="headerlink" title="6.2ã€é…ç½®"></a>6.2ã€é…ç½®</h2><p>application.propertiesï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span>
<span class="token key attr-name">mybatis-plus.global-config.db-config.logic-delete-value</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span>
<span class="token key attr-name">mybatis-plus.global-config.db-config.logic-not-delete-value</span><span class="token punctuation">=</span><span class="token value attr-value">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="6-3ã€æµ‹è¯•"><a href="#6-3ã€æµ‹è¯•" class="headerlink" title="6.3ã€æµ‹è¯•"></a>6.3ã€æµ‹è¯•</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByIdLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ‰§è¡Œçš„sqlï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">2022-11-01 15:44:46.718 DEBUG 8030 --- [           main] c.i.mp.mapper.UserMapper.deleteById      : &#x3D;&#x3D;&gt;  Preparing: UPDATE tb_user SET deleted&#x3D;1 WHERE id&#x3D;? AND deleted&#x3D;0 
2022-11-01 15:44:46.760 DEBUG 8030 --- [           main] c.i.mp.mapper.UserMapper.deleteById      : &#x3D;&#x3D;&gt; Parameters: 4(Long)
2022-11-01 15:44:46.767 DEBUG 8030 --- [           main] c.i.mp.mapper.UserMapper.deleteById      : &lt;&#x3D;&#x3D;    Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101154618822.png" srcset="/img/loading.gif" lazyload alt="image-20221101154618822"></p>
<p>æµ‹è¯•æŸ¥è¯¢ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-11-01 <span class="token number">15</span>:47:12.683 DEBUG <span class="token number">8043</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail,version,deleted FROM tb_user WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span>? AND <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span> 
<span class="token number">2022</span>-11-01 <span class="token number">15</span>:47:12.727 DEBUG <span class="token number">8043</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">4</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-11-01 <span class="token number">15</span>:47:12.749 DEBUG <span class="token number">8043</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å¯è§ï¼Œå·²ç»å®ç°äº†é€»è¾‘åˆ é™¤ã€‚</p>
<h1 id="12ã€-é€šç”¨æšä¸¾"><a href="#12ã€-é€šç”¨æšä¸¾" class="headerlink" title="12ã€ é€šç”¨æšä¸¾"></a>12ã€ é€šç”¨æšä¸¾</h1><p>è§£å†³äº†ç¹ççš„é…ç½®ï¼Œè®© mybatis ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å±æ€§ï¼</p>
<h2 id="12-1ã€ä¿®æ”¹è¡¨ç»“æ„"><a href="#12-1ã€ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="12.1ã€ä¿®æ”¹è¡¨ç»“æ„"></a>12.1ã€ä¿®æ”¹è¡¨ç»“æ„</h2><figure><div class="code-wrapper"><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>tb_user<span class="token punctuation">`</span></span>
<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span> <span class="token keyword">COMMENT</span> <span class="token string">'1-ç”·ï¼Œ2-å¥³'</span> <span class="token keyword">AFTER</span> <span class="token identifier"><span class="token punctuation">`</span>deleted<span class="token punctuation">`</span></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h2 id="12-2ã€å®šä¹‰æšä¸¾"><a href="#12-2ã€å®šä¹‰æšä¸¾" class="headerlink" title="12.2ã€å®šä¹‰æšä¸¾"></a>12.2ã€å®šä¹‰æšä¸¾</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>enums</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>enums<span class="token punctuation">.</span></span><span class="token class-name">IEnum</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">SexEnum</span> <span class="token keyword">implements</span> <span class="token class-name">IEnum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token function">MAN</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">WOMAN</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"å¥³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token class-name">SexEnum</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">=</span>value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc<span class="token operator">=</span>desc<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>desc<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="12-3ã€é…ç½®"><a href="#12-3ã€é…ç½®" class="headerlink" title="12.3ã€é…ç½®"></a>12.3ã€é…ç½®</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"># æšä¸¾åŒ…æ‰«æ
mybatis<span class="token operator">-</span>plus<span class="token punctuation">.</span>type<span class="token operator">-</span>enums<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span>cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>enums<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h2 id="12-4ã€ä¿®æ”¹å®ä½“"><a href="#12-4ã€ä¿®æ”¹å®ä½“" class="headerlink" title="12.4ã€ä¿®æ”¹å®ä½“"></a>12.4ã€ä¿®æ”¹å®ä½“</h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">SexEnum</span> sex<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h2 id="12-5ã€æµ‹è¯•"><a href="#12-5ã€æµ‹è¯•" class="headerlink" title="12.5ã€æµ‹è¯•"></a>12.5ã€æµ‹è¯•</h2><p>æµ‹è¯•æ’å…¥æ•°æ®ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsertEnums</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"è²‚è‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">"diaochan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setMail</span><span class="token punctuation">(</span><span class="token string">"diaochan@itast.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token class-name">SexEnum</span><span class="token punctuation">.</span><span class="token constant">WOMAN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result = "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-11-01 <span class="token number">16</span>:13:39.695 DEBUG <span class="token number">8599</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.b.m.e.parsers.BlockAttackSqlParser     <span class="token builtin class-name">:</span> parser sql: INSERT INTO tb_user <span class="token punctuation">(</span>user_name, password, name, age, email, version, sex<span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span>?, ?, ?, ?, ?, ?, ?<span class="token punctuation">)</span>
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:13:39.704 DEBUG <span class="token number">8599</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.insert    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: INSERT INTO tb_user <span class="token punctuation">(</span> user_name, password, name, age, email, version, sex <span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span> ?, ?, ?, ?, ?, ?, ? <span class="token punctuation">)</span> 
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:13:39.741 DEBUG <span class="token number">8599</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.insert    <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: diaochan<span class="token punctuation">(</span>String<span class="token punctuation">)</span>, <span class="token number">123456</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>, è²‚è‰<span class="token punctuation">(</span>String<span class="token punctuation">)</span>, <span class="token number">20</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>, diaochan@itast.cn<span class="token punctuation">(</span>String<span class="token punctuation">)</span>, <span class="token number">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>, <span class="token number">2</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:13:39.747 DEBUG <span class="token number">8599</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> cn.itcast.mp.mapper.UserMapper.insert    <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101162947312.png" srcset="/img/loading.gif" lazyload alt="image-20221101162947312"></p>
<p>æŸ¥è¯¢</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByIdEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">15L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-11-01 <span class="token number">16</span>:30:38.311 DEBUG <span class="token number">8922</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail,version,deleted,sex FROM tb_user WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span>? AND <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span> 
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:30:38.356 DEBUG <span class="token number">8922</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">15</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:30:38.383 DEBUG <span class="token number">8922</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectById      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">15</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>diaochan, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>è²‚è‰, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>diaochan@itast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>å¥³<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>ä»æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨æšä¸¾äº†ã€‚ æŸ¥è¯¢æ¡ä»¶æ—¶ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
 <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">testSelectBySex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> objectQueryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     objectQueryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">,</span><span class="token class-name">SexEnum</span><span class="token punctuation">.</span><span class="token constant">MAN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>objectQueryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
     users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2022</span>-11-01 <span class="token number">16</span>:34:13.534 DEBUG <span class="token number">8938</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectList      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span>  Preparing: SELECT id,user_name,name,age,email AS mail,version,deleted,sex FROM tb_user WHERE <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span> AND sex <span class="token operator">=</span> ? 
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:34:13.572 DEBUG <span class="token number">8938</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectList      <span class="token builtin class-name">:</span> <span class="token operator">==</span><span class="token operator">></span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
<span class="token number">2022</span>-11-01 <span class="token number">16</span>:34:13.601 DEBUG <span class="token number">8938</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c.i.mp.mapper.UserMapper.selectList      <span class="token builtin class-name">:</span> <span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">8</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>sunqi, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>å¨å°‘, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">24</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test5@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">7</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>å¨å°‘, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">8</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“2, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">9</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“2, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">11</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“2, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">12</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>caocao, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>æ›¹æ“2, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">20</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>test@itcast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">13</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>guanyu, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>å…³ç¾½, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>guanyu@itast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span>
User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">14</span>, <span class="token assign-left variable">userName</span><span class="token operator">=</span>zhugeliang, <span class="token assign-left variable">password</span><span class="token operator">=</span>null, <span class="token assign-left variable">name</span><span class="token operator">=</span>è¯¸è‘›äº®, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">21</span>, <span class="token assign-left variable">mail</span><span class="token operator">=</span>guanyu@itast.cn, <span class="token assign-left variable">address</span><span class="token operator">=</span>null, <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">sex</span><span class="token operator">=</span>ç”·<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h1 id="13ã€ä»£ç ç”Ÿæˆå™¨"><a href="#13ã€ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="13ã€ä»£ç ç”Ÿæˆå™¨"></a>13ã€ä»£ç ç”Ÿæˆå™¨</h1><p>AutoGenerator æ˜¯ MyBatis-Plus çš„ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ AutoGenerator å¯ä»¥å¿«é€Ÿç”Ÿæˆ Entityã€Mapperã€Mapper XMLã€Serviceã€Controller ç­‰å„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<h2 id="13-1ã€åˆ›å»ºå·¥ç¨‹"><a href="#13-1ã€åˆ›å»ºå·¥ç¨‹" class="headerlink" title="13.1ã€åˆ›å»ºå·¥ç¨‹"></a>13.1ã€åˆ›å»ºå·¥ç¨‹</h2><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-sample-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--mybatis-plusçš„springbootæ”¯æŒ--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--mysqlé©±åŠ¨--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="13-2ã€ä»£ç "><a href="#13-2ã€ä»£ç " class="headerlink" title="13.2ã€ä»£ç "></a>13.2ã€ä»£ç </h2><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example<span class="token punctuation">.</span>generator</span><span class="token punctuation">;</span>


<span class="token comment">/**
 * &lt;p>
 * mysql ä»£ç ç”Ÿæˆå™¨æ¼”ç¤ºä¾‹å­
 * &lt;/p>
 */</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">MybatisPlusException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">StringPool</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span></span><span class="token class-name">AutoGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span></span><span class="token class-name">InjectionConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span><span class="token class-name">TableInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>rules<span class="token punctuation">.</span></span><span class="token class-name">NamingStrategy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>engine<span class="token punctuation">.</span></span><span class="token class-name">FreemarkerTemplateEngine</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * &lt;p>
 * mysql ä»£ç ç”Ÿæˆå™¨æ¼”ç¤ºä¾‹å­
 * &lt;/p>
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MysqlGenerator</span> <span class="token punctuation">&#123;</span>

    <span class="token comment">/**
     * &lt;p>
     * è¯»å–æ§åˆ¶å°å†…å®¹
     * &lt;/p>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">scanner</span><span class="token punctuation">(</span><span class="token class-name">String</span> tip<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> help <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        help<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥"</span> <span class="token operator">+</span> tip <span class="token operator">+</span> <span class="token string">"ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>help<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> ipt <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>ipt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> ipt<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusException</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ­£ç¡®çš„"</span> <span class="token operator">+</span> tip <span class="token operator">+</span> <span class="token string">"ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">/**
     * RUN THIS
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token comment">// ä»£ç ç”Ÿæˆå™¨</span>
        <span class="token class-name">AutoGenerator</span> mpg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å…¨å±€é…ç½®</span>
        <span class="token class-name">GlobalConfig</span> gc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> projectPath <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user.dir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setOutputDir</span><span class="token punctuation">(</span>projectPath <span class="token operator">+</span> <span class="token string">"/src/main/java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">"itcast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setGlobalConfig</span><span class="token punctuation">(</span>gc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ•°æ®æºé…ç½®</span>
        <span class="token class-name">DataSourceConfig</span> dsc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mp? useUnicode=true&amp;useSSL=false&amp;characterEncoding=utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// dsc.setSchemaName("public");</span>
                dsc<span class="token punctuation">.</span><span class="token function">setDriverName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"Xuwei19941214~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dsc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åŒ…é…ç½®</span>
        <span class="token class-name">PackageConfig</span> pc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PackageConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pc<span class="token punctuation">.</span><span class="token function">setModuleName</span><span class="token punctuation">(</span><span class="token function">scanner</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å—å"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pc<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token string">"org.example.generator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setPackageInfo</span><span class="token punctuation">(</span>pc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è‡ªå®šä¹‰é…ç½®</span>
        <span class="token class-name">InjectionConfig</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InjectionConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// to do nothing</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileOutConfig</span><span class="token punctuation">></span></span> focList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        focList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutConfig</span><span class="token punctuation">(</span><span class="token string">"/templates/mapper.xml.ftl"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">outputFile</span><span class="token punctuation">(</span><span class="token class-name">TableInfo</span> tableInfo<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// è‡ªå®šä¹‰è¾“å…¥æ–‡ä»¶åç§°</span>
                <span class="token keyword">return</span> projectPath <span class="token operator">+</span> <span class="token string">"/src/main/resources/mapper/"</span> <span class="token operator">+</span> pc<span class="token punctuation">.</span><span class="token function">getModuleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> tableInfo<span class="token punctuation">.</span><span class="token function">getEntityName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"Mapper"</span> <span class="token operator">+</span>
                        <span class="token class-name">StringPool</span><span class="token punctuation">.</span><span class="token constant">DOT_XML</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cfg<span class="token punctuation">.</span><span class="token function">setFileOutConfigList</span><span class="token punctuation">(</span>focList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setCfg</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setTemplate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TemplateConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setXml</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­–ç•¥é…ç½®</span>
        <span class="token class-name">StrategyConfig</span> strategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrategyConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">setNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">setColumnNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//</span>
        strategy<span class="token punctuation">.</span><span class="token function">setSuperEntityClass</span><span class="token punctuation">(</span><span class="token string">"com.baomidou.mybatisplus.samples.generator.common.BaseEntity"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                strategy<span class="token punctuation">.</span><span class="token function">setEntityLombokModel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//</span>
        strategy<span class="token punctuation">.</span><span class="token function">setSuperControllerClass</span><span class="token punctuation">(</span><span class="token string">"com.baomidou.mybatisplus.samples.generator.common.BaseController"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                strategy<span class="token punctuation">.</span><span class="token function">setInclude</span><span class="token punctuation">(</span><span class="token function">scanner</span><span class="token punctuation">(</span><span class="token string">"è¡¨å"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">setSuperEntityColumns</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">setControllerMappingHyphenStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategy<span class="token punctuation">.</span><span class="token function">setTablePrefix</span><span class="token punctuation">(</span>pc<span class="token punctuation">.</span><span class="token function">getModuleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span>strategy<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é€‰æ‹© freemarker å¼•æ“éœ€è¦æŒ‡å®šå¦‚ä¸‹åŠ ï¼Œæ³¨æ„ pom ä¾èµ–å¿…é¡»æœ‰ï¼</span>
        mpg<span class="token punctuation">.</span><span class="token function">setTemplateEngine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FreemarkerTemplateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="13-3ã€æµ‹è¯•"><a href="#13-3ã€æµ‹è¯•" class="headerlink" title="13.3ã€æµ‹è¯•"></a>13.3ã€æµ‹è¯•</h2><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">17</span>:43:00.088 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/mapper.xml.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/resources/mapper/usr/TbUserMapper.xml
<span class="token number">17</span>:43:00.199 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/entity.java.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/java/org/example/generator/usr/entity/TbUser.java
<span class="token number">17</span>:43:00.207 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/mapper.java.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/java/org/example/generator/usr/mapper/TbUserMapper.java
<span class="token number">17</span>:43:00.209 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/service.java.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/java/org/example/generator/usr/service/ITbUserService.java
<span class="token number">17</span>:43:00.211 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/serviceImpl.java.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/java/org/example/generator/usr/service/impl/TbUserServiceImpl.java
<span class="token number">17</span>:43:00.213 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.engine.AbstractTemplateEngine - æ¨¡æ¿:/templates/controller.java.ftl<span class="token punctuation">;</span>  æ–‡ä»¶:/Users/xuwei/Desktop/é¡¹ç›®/mybatis-plus-sample-generator/src/main/java/org/example/generator/usr/controller/TbUserController.java
<span class="token number">17</span>:43:00.213 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG com.baomidou.mybatisplus.generator.AutoGenerator - <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>æ–‡ä»¶ç”Ÿæˆå®Œæˆï¼ï¼ï¼<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101174415257.png" srcset="/img/loading.gif" lazyload alt="image-20221101174415257"></p>
<h1 id="14ã€MybatisX-å¿«é€Ÿå¼€å‘æ’ä»¶"><a href="#14ã€MybatisX-å¿«é€Ÿå¼€å‘æ’ä»¶" class="headerlink" title="14ã€MybatisX å¿«é€Ÿå¼€å‘æ’ä»¶"></a>14ã€MybatisX å¿«é€Ÿå¼€å‘æ’ä»¶</h1><p>MybatisX æ˜¯ä¸€æ¬¾åŸºäº IDEA çš„å¿«é€Ÿå¼€å‘æ’ä»¶ï¼Œä¸ºæ•ˆç‡è€Œç”Ÿã€‚ å®‰è£…æ–¹æ³•ï¼šæ‰“å¼€ IDEAï¼Œè¿›å…¥ File -&gt; Settings -&gt; Plugins -&gt; Browse Repositoriesï¼Œè¾“å…¥ mybatisx æœç´¢å¹¶å®‰è£…ã€‚ åŠŸèƒ½ï¼š Java ä¸ XML è°ƒå›è·³è½¬ Mapper æ–¹æ³•è‡ªåŠ¨ç”Ÿæˆ XML</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101174917817.png" srcset="/img/loading.gif" lazyload alt="image-20221101174917817"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/image-20221101175019871.png" srcset="/img/loading.gif" lazyload alt="image-20221101175019871"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java%E6%A1%86%E6%9E%B6/" class="category-chain-item">Javaæ¡†æ¶</a>
  
  
    <span>></span>
    
  <a href="/categories/Java%E6%A1%86%E6%9E%B6/MyBatis-Plus/" class="category-chain-item">MyBatis-Plus</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MyBatis-Plus/">#MyBatis-Plus</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus</div>
      <div>https://weishao-996.github.io/2022/10/25/é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Wei Shao</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´10æœˆ25æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/25/MacOS-M1%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85-MySQL/" title="MacOS-M1è½¯ä»¶å®‰è£…-MySQL">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MacOS-M1è½¯ä»¶å®‰è£…-MySQL</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/23/MacOS-M1%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85-Maven%E5%AE%89%E8%A3%85%E4%B8%8E%E7%BB%91%E5%AE%9AIDEA/" title="MacOS-M1è½¯ä»¶å®‰è£…-Mavenå®‰è£…ä¸ç»‘å®šIDEA">
                        <span class="hidden-mobile">MacOS-M1è½¯ä»¶å®‰è£…-Mavenå®‰è£…ä¸ç»‘å®šIDEA</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'weishao-996/commit-utterance');
      s.setAttribute('issue-term', 'title');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="MyBatis-Plus"
        id="heading-1efd0922ec4552cf731ab241c95e815b" role="tab" data-toggle="collapse" href="#collapse-1efd0922ec4552cf731ab241c95e815b"
        aria-expanded="true"
      >
        MyBatis-Plus
        <span class="list-group-count">(2)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-1efd0922ec4552cf731ab241c95e815b"
           role="tabpanel" aria-labelledby="heading-1efd0922ec4552cf731ab241c95e815b">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/11/05/MyBatis-Plus-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%EF%BC%88%E6%96%B0%EF%BC%89/" title="MyBatis-Plus-ä»£ç ç”Ÿæˆå™¨ï¼ˆæ–°ï¼‰"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">MyBatis-Plus-ä»£ç ç”Ÿæˆå™¨ï¼ˆæ–°ï¼‰</span>
        </a>
      
    
      
      
        <a href="/2022/10/25/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Mybatis-Plus/" title="é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">é»‘é©¬ç¨‹åºå‘˜-Mybatis-Plus</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script  src="https://lib.baomitu.com/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.js" ></script>

  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
