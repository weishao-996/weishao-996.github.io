

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Wei Shao">
  <meta name="keywords" content="">
  
    <meta name="description" content="Redis å…¥é—¨é—®é¢˜çš„æŠ›å‡ºå‡ºç°çš„é—®é¢˜ï¼š  æµ·é‡ç”¨æˆ· é«˜å¹¶å‘  ç½ªé­ç¥¸é¦–â€”â€”å…³ç³»å‹æ•°æ®åº“ï¼š  æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹ æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤  è§£å†³æ€è·¯ é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ â€”â€” å†…å­˜å­˜å‚¨ å»é™¤æ•°æ®é—´çš„å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ â€”â€” ä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®  Nosqlç®€ä»‹NoSQLï¼šå³Not-OnlySQLï¼ˆæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚ ä½œç”¨ï¼šåº”">
<meta property="og:type" content="article">
<meta property="og:title" content="é»‘é©¬ç¨‹åºå‘˜-Redis">
<meta property="og:url" content="https://weishao-996.github.io/2022/10/08/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/index.html">
<meta property="og:site_name" content="ğŸ”ğŸŸWeiBlog">
<meta property="og:description" content="Redis å…¥é—¨é—®é¢˜çš„æŠ›å‡ºå‡ºç°çš„é—®é¢˜ï¼š  æµ·é‡ç”¨æˆ· é«˜å¹¶å‘  ç½ªé­ç¥¸é¦–â€”â€”å…³ç³»å‹æ•°æ®åº“ï¼š  æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹ æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤  è§£å†³æ€è·¯ é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ â€”â€” å†…å­˜å­˜å‚¨ å»é™¤æ•°æ®é—´çš„å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ â€”â€” ä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®  Nosqlç®€ä»‹NoSQLï¼šå³Not-OnlySQLï¼ˆæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚ ä½œç”¨ï¼šåº”">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008185402254.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008185941452.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008190042511.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008190110484.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200409191821527.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193222956.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193637593.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193707121.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008194430071.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008195132656.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008195627422.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200413220259916.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652303781884.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652314848056.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652318807278.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523190155910.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523194297412.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523626646014.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008215815344.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523647532016.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008220123068.png">
<meta property="og:image" content="https://./img-blog.csdnimg.cn/20200419195350115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652943755982.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420110014423.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652944831775.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652961455767.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652965719209.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529658190511.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529756430013.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420131157293.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420132321704.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529806574817.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529807350419.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174400409.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174553101.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174829031.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009175046572.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009204434585.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009210540279.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010115536757.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010120957375.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010121604452.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010122116412.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010122310424.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010123927631.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010124244936.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010125149349.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130449881.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130013766.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130712193.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130827016.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010164820275.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010165103534.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170628637.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170643138.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170926880.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010171723018.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010172032344.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211312492.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211455930.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211925344.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212001633.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212159279.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212520404.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010215027206.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010215129772.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011141609019.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142127323.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142306626.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142546510.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142827574.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011152156869.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011164116974.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100201807.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011165301074.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100448914.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100544751.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012102219574.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012102721225.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155613605.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155656032.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155840377.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012160408015.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161432189.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161628529.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161728903.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012165810588.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012181836503.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013125505629.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013131128283.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144136576.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144200317.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144754957.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013145837784.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013150235170.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151212923.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151238928.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151547838.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014131638733.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014132248229.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014133100016.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014134814217.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014134931474.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014135302634.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014140142843.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014142336498.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014162507268.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014162532151.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017163836418.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017163847015.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017164832371.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017165447946.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017200718612.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017201122179.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017202520833.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017202628618.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203447084.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203710563.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203741205.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204007153.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204029344.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204901267.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204924813.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017212932073.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017213705310.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214240292.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214743888.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214956086.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018164806918.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018165949891.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018171711366.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018182810865.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018182922458.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018211141094.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018211919137.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018212228270.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213515776.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213813008.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213903729.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214102909.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214557474.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214924564.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215154820.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215320585.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215520080.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215630899.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215802938.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151305171.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151729961.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151925079.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019155153179.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019202524994.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019202725003.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019203036948.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019203813171.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019204608998.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019210603285.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019210730122.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211136036.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211257396.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211557357.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019212827549.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019213943319.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019214204996.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019215041069.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019221124005.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019221255502.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020103923017.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104041099.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104442095.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104543307.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104914459.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020105340354.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020105938279.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020110725445.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020110909594.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111001703.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111147479.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111637321.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020112004426.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020113758577.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020162205314.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020164447238.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165330711.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165344324.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165518327.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165557352.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165707597.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165743895.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165841955.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020170658042.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020170824761.png">
<meta property="og:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020171634657.png">
<meta property="article:published_time" content="2022-10-08T10:48:31.000Z">
<meta property="article:modified_time" content="2022-10-20T09:18:18.000Z">
<meta property="article:author" content="Wei Shao">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://weishao-996.github.io/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008185402254.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>é»‘é©¬ç¨‹åºå‘˜-Redis - ğŸ”ğŸŸWeiBlog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"weishao-996.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"Java"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>å¨å°‘ã®Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg/iTab-6ozkzl.jfif') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="é»‘é©¬ç¨‹åºå‘˜-Redis"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-08 18:48" pubdate>
          2022å¹´10æœˆ8æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">é»‘é©¬ç¨‹åºå‘˜-Redis</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Redis-å…¥é—¨"><a href="#Redis-å…¥é—¨" class="headerlink" title="Redis å…¥é—¨"></a>Redis å…¥é—¨</h1><h2 id="é—®é¢˜çš„æŠ›å‡º"><a href="#é—®é¢˜çš„æŠ›å‡º" class="headerlink" title="é—®é¢˜çš„æŠ›å‡º"></a>é—®é¢˜çš„æŠ›å‡º</h2><p><strong>å‡ºç°çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>æµ·é‡ç”¨æˆ·</li>
<li>é«˜å¹¶å‘</li>
</ul>
<p><strong>ç½ªé­ç¥¸é¦–â€”â€”å…³ç³»å‹æ•°æ®åº“ï¼š</strong></p>
<ul>
<li>æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹</li>
<li>æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤</li>
</ul>
<h2 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a><strong>è§£å†³æ€è·¯</strong></h2><ul>
<li>é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ â€”â€” å†…å­˜å­˜å‚¨</li>
<li>å»é™¤æ•°æ®é—´çš„å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ â€”â€” ä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®</li>
</ul>
<h2 id="Nosqlç®€ä»‹"><a href="#Nosqlç®€ä»‹" class="headerlink" title="Nosqlç®€ä»‹"></a>Nosqlç®€ä»‹</h2><p>NoSQLï¼š<br>å³<code>Not-OnlySQL</code>ï¼ˆæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚</p>
<p>ä½œç”¨ï¼š<br>åº”ç”¨å¯¹äºæµ·é‡ç”¨æˆ·å’Œæµ·é‡æ•°æ®å‰æå“å¾—æ•°æ®å¤„ç†é—®é¢˜ã€‚</p>
<p>ç‰¹å¾ï¼š</p>
<ul>
<li>å¯æ‰©å®¹ï¼Œå¯ä¼¸ç¼©</li>
<li>å¤§æ•°æ®é‡ä¸‹å¾—é«˜æ€§èƒ½</li>
<li>çµæ´»å¾—æ•°æ®æ¨¡å‹</li>
<li>é«˜å¯ç”¨</li>
</ul>
<p>å¸¸è§<code>Nosql</code>æ•°æ®åº“ï¼š</p>
<ul>
<li>Redis</li>
<li>memcache</li>
<li>HBase</li>
<li>MongoDB</li>
</ul>
<h2 id="è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ï¼‰"><a href="#è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ï¼‰" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ï¼‰"></a>è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ï¼‰</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008185402254.png" srcset="/img/loading.gif" lazyload alt="image-20221008185402254"></p>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>æ¦‚å¿µï¼š<br><code>Redis(REmote DIctinary Server)</code>æ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å¯¹<code>(key-value)</code>æ•°æ®åº“<br>ç‰¹å¾ï¼š</p>
<ul>
<li><p>æ•°æ®é—´æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»</p>
</li>
<li><p>å†…éƒ¨é‡‡ç”¨å•çº¿ç¨‹æœºåˆ¶è¿›è¡Œå·¥ä½œ</p>
</li>
<li><p>é«˜æ€§èƒ½ã€‚å®˜æ–¹æä¾›æµ‹è¯•æ•°æ®ï¼Œ50ä¸ªå¹¶å‘æ‰§è¡Œ100000ä¸ªè¯·æ±‚ï¼Œè¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/sï¼Œå†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/sã€‚</p>
</li>
<li><p>å¤šæ•°æ®ç±»å‹æ”¯æŒï¼š<code>stringï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰</code>ã€<code>listï¼ˆåˆ—è¡¨ç±»å‹ï¼‰</code>ã€<code>hashï¼ˆæ•£åˆ—ç±»å‹ï¼‰</code>ã€<code>setï¼ˆé›†åˆç±»å‹ï¼‰</code>ã€<code>sorted_setï¼ˆæœ‰åºé›†åˆç±»å‹ï¼‰</code></p>
</li>
<li><p>æŒä¹…åŒ–æ”¯æŒã€‚å¯ä»¥è¿›è¡Œæ•°æ®ç¾éš¾æ¢å¤</p>
</li>
</ul>
<h2 id="Redisçš„åº”ç”¨"><a href="#Redisçš„åº”ç”¨" class="headerlink" title="Redisçš„åº”ç”¨"></a>Redisçš„åº”ç”¨</h2><ul>
<li>ä¸ºçƒ­ç‚¹æ•°æ®åŠ é€ŸæŸ¥è¯¢ï¼ˆä¸»è¦åœºæ™¯ï¼‰ã€å¦‚çƒ­ç‚¹å•†å“ã€çƒ­ç‚¹æ–°é—»ã€çƒ­ç‚¹èµ„è®¯ã€æ¨å¹¿ç±»ç­‰æé«˜è®¿é—®é‡ä¿¡æ¯ç­‰ã€‚</li>
<li>ä»»åŠ¡é˜Ÿåˆ—ã€å¦‚ç§’æ€ã€æŠ¢è´­ã€è´­ç¥¨ç­‰</li>
<li>å³æ—¶ä¿¡æ¯æŸ¥è¯¢ï¼Œå¦‚å„ä½æ’è¡Œæ¦œã€å„ç±»ç½‘ç«™è®¿é—®ç»Ÿè®¡ã€å…¬äº¤åˆ°ç«™ä¿¡æ¯ã€åœ¨çº¿äººæ•°ä¿¡æ¯ï¼ˆèŠå¤©å®¤ã€ç½‘ç«™ï¼‰ã€è®¾å¤‡ä¿¡å·ç­‰</li>
<li>æ—¶æ•ˆæ€§ä¿¡æ¯æ§åˆ¶ï¼Œå¦‚éªŒè¯ç æ§åˆ¶ï¼ŒæŠ•ç¥¨æ§åˆ¶ç­‰</li>
<li>åˆ†å¸ƒå¼æ•°æ®å…±äº«ï¼Œå¦‚åˆ†å¸ƒå¼é›†ç¾¤æ„æ¶ä¸­çš„<code>session</code>åˆ†ç¦»</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>åˆ†å¸ƒå¼é”</li>
</ul>
<h2 id="Redisçš„åŸºæœ¬æ“ä½œ"><a href="#Redisçš„åŸºæœ¬æ“ä½œ" class="headerlink" title="Redisçš„åŸºæœ¬æ“ä½œ"></a>Redisçš„åŸºæœ¬æ“ä½œ</h2><p>å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ</p>
<ul>
<li>åŠŸèƒ½æ€§å‘½ä»¤</li>
<li>æ¸…é™¤å±å¹•ä¿¡æ¯</li>
<li>å¸®åŠ©ä¿¡æ¯æŸ¥é˜…</li>
<li>é€€å‡ºæŒ‡ä»¤</li>
</ul>
<h3 id="ä¿¡æ¯æ·»åŠ "><a href="#ä¿¡æ¯æ·»åŠ " class="headerlink" title="ä¿¡æ¯æ·»åŠ "></a>ä¿¡æ¯æ·»åŠ </h3><ul>
<li>åŠŸèƒ½ï¼šè®¾ç½®key,valueæ•°æ®</li>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> key value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>èŒƒä¾‹</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> name itheima<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="ä¿¡æ¯æŸ¥è¯¢"><a href="#ä¿¡æ¯æŸ¥è¯¢" class="headerlink" title="ä¿¡æ¯æŸ¥è¯¢"></a>ä¿¡æ¯æŸ¥è¯¢</h3><ul>
<li>åŠŸèƒ½ï¼šæ ¹æ®keyæŸ¥è¯¢å¯¹åº”çš„value,å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›ç©ºï¼ˆnull)</li>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">get key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>èŒƒä¾‹</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">get name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008185941452.png" srcset="/img/loading.gif" lazyload alt="image-20221008185941452"></p>
<h3 id="æ¸…é™¤å±å¹•ä¿¡æ¯"><a href="#æ¸…é™¤å±å¹•ä¿¡æ¯" class="headerlink" title="æ¸…é™¤å±å¹•ä¿¡æ¯"></a>æ¸…é™¤å±å¹•ä¿¡æ¯</h3><ul>
<li>åŠŸèƒ½ï¼šæ¸…é™¤å±å¹•ä¸­çš„ä¿¡æ¯</li>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">clear</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h3><ul>
<li>åŠŸèƒ½ï¼šè·å–å‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼Œè·å–ç»„ä¸­æ‰€æœ‰å‘½ä»¤ä¿¡æ¯åç§°</li>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">help</span> å‘½ä»¤åç§°
<span class="token builtin class-name">help</span> @ç»„å<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008190042511.png" srcset="/img/loading.gif" lazyload alt="image-20221008190042511"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008190110484.png" srcset="/img/loading.gif" lazyload alt="image-20221008190110484"></p>
<p>æ¨å‡ºå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ¨¡å¼</p>
<ul>
<li>åŠŸèƒ½ï¼šæ¨å‡ºå®¢æˆ·ç«¯</li>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">quit
<span class="token builtin class-name">exit</span>
<span class="token operator">&lt;</span> ESC<span class="token operator">></span><span class="token punctuation">(</span>æ…ç”¨<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<h1 id="Redis-æ•°æ®ç±»å‹"><a href="#Redis-æ•°æ®ç±»å‹" class="headerlink" title="Redis æ•°æ®ç±»å‹"></a>Redis æ•°æ®ç±»å‹</h1><h2 id="Redisæ•°æ®ç±»å‹-String"><a href="#Redisæ•°æ®ç±»å‹-String" class="headerlink" title="Redisæ•°æ®ç±»å‹ String"></a>Redisæ•°æ®ç±»å‹ String</h2><h3 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1CJ411m7Gc?p=6">https://www.bilibili.com/video/BV1CJ411m7Gc?p=6</a></p>
<h3 id="æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»"><a href="#æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»" class="headerlink" title="æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»"></a>æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»</h3><p>ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§</p>
<p><strong>ä½œä¸ºç¼“å­˜ä½¿ç”¨</strong></p>
<ol>
<li>åŸå§‹ä¸šåŠ¡åŠŸèƒ½è®¾è®¡<br>ç§’æ€<br>618æ´»åŠ¨<br>åŒåä¸€æ´»åŠ¨<br>æ’é˜Ÿè´­ç¥¨</li>
<li>è¿è¥å¹³å°ç›‘æ§åˆ°çš„çªå‘é«˜é¢‘è®¿é—®æ•°æ®<br>çªå‘å¸‚æ”¿è¦é—»ï¼Œè¢«å¼ºåŠ¿å…³æ³¨å›´è§‚</li>
<li>é«˜é¢‘ã€å¤æ‚çš„ç»Ÿè®¡æ•°æ®<br>åœ¨çº¿äººæ•°<br>æŠ•ç¥¨æ’è¡Œæ¦œ</li>
</ol>
<p><strong>é™„åŠ åŠŸèƒ½</strong><br>ç³»ç»ŸåŠŸèƒ½ä¼˜åŒ–æˆ–å‡çº§</p>
<ul>
<li>å•æœåŠ¡å™¨å‡çº§é›†ç¾¤</li>
<li><code>Session</code>ç®¡ç†</li>
<li><code>Token</code>ç®¡ç†</li>
</ul>
<h3 id="Redis-æ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨ï¼‰"><a href="#Redis-æ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨ï¼‰" class="headerlink" title="Redis æ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨ï¼‰"></a>Redis æ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨ï¼‰</h3><ul>
<li>string â€“&gt; String</li>
<li>hash â€“&gt; Hashmap</li>
<li>list â€“&gt; LinkList</li>
<li>set â€“&gt; HashSet</li>
<li>sorted_set â€“&gt; TreeSet</li>
</ul>
<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p><strong>redis æ•°æ®å­˜å‚¨æ ¼å¼</strong></p>
<ul>
<li>redisè‡ªèº«æ˜¯ä¸€ä¸ª<code>Map</code>,å…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨<code>key:value</code>çš„å½¢å¼å­˜å‚¨</li>
<li>æ•°æ®ç±»å‹æŒ‡çš„æ˜¯å­˜å‚¨çš„æ•°æ®çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯<code>value</code>éƒ¨åˆ†çš„ç±»å‹ï¼Œ<code>key</code>éƒ¨åˆ†æ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<ul>
<li><strong>String ç±»å‹</strong></li>
<li>å­˜å‚¨çš„æ•°æ®ï¼šå•ä¸ªæ•°æ®ï¼Œæœ€è´±çš„æ•°æ®å­˜å‚¨ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®å­˜å‚¨ç±»å‹</li>
<li>å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜ä¸€ä¸ªæ•°æ®</li>
<li>å­˜å‚¨å†…å®¹ï¼šé€šå¸¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥æ•´æ•°çš„å½¢å¼å±•ç¤ºï¼Œå¯ä»¥ä½œä¸ºæ•°å­—æ“ä½œä½¿ç”¨</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200409191821527.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="String-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#String-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="String ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a><strong>String ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</strong></h3><ul>
<li>æ·»åŠ /ä¿®æ”¹æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> key value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">get key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">del key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mset key1 valueq key2 value2 â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å¤šä¸ªæ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mget key1 key2 â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–æ•°æ®å­—ç¬¦ä¸ªæ•°ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">strlen key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è¿½åŠ ä¿¡æ¯åˆ°åŸå§‹ä¿¡æ¯åéƒ¨ï¼ˆå¦‚æœåŸå§‹ä¿¡æ¯å­˜åœ¨å°±è¿½åŠ ï¼Œå¦åˆ™æ–°å»ºï¼‰</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">append key value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193222956.png" srcset="/img/loading.gif" lazyload alt="image-20221008193222956"></p>
<h3 id="Stringç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#Stringç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="Stringç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>Stringç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong><br>å¤§å‹ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œåˆ†è¡¨æ“ä½œæ˜¯åŸºæœ¬æ“ä½œï¼Œä½¿ç”¨å¤šå¼ è¡¨å­˜å‚¨åŒç±»å‹æ•°æ®ï¼Œä½†æ˜¯å¯¹åº”çš„ä¸»é”®idå¿…é¡»ä¿è¯ç»Ÿä¸€æ€§ï¼Œä¸èƒ½é‡å¤ã€‚Oracleæ•°æ®åº“å…·æœ‰sequenceè®¾å®šï¼Œå¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼Œä½†æ˜¯MySQLæ•°æ®åº“å¹¶ä¸å…·æœ‰ç±»ä¼¼çš„æœºåˆ¶ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³ï¼Ÿ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>è®¾ç½®æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">incr key
incrby key increment
incrbyfloat key increment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>è®¾ç½®æ•°å€¼æ•°æ®å‡å°‘æŒ‡å®šèŒƒå›´çš„å€¼</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">decr key
decrby key increment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193637593.png" srcset="/img/loading.gif" lazyload alt="image-20221008193637593"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008193707121.png" srcset="/img/loading.gif" lazyload alt="image-20221008193707121"></p>
<p><strong>Stringä½œä¸ºæ•°å€¼æ“ä½œ</strong></p>
<p><code>String</code>åœ¨<code>redis</code>å†…éƒ¨å­˜å‚¨é»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°å¢å‡ç±»æ“ä½œ<code>incr</code>,<code>decr</code>æ—¶ä¼šè½¬æˆæ•°å€¼å‹è¿›è¡Œè®¡ç®—<br><code>redis</code>æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé‡‡ç”¨å•çº¿ç¨‹å¤„ç†æ‰€æœ‰ä¸šåŠ¡ï¼Œå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œçš„ï¼Œå› æ­¤æ— éœ€è€ƒè™‘å¹¶å‘å¸¦æ¥çš„æ•°æ®å½±å“ã€‚<br>æ³¨æ„ï¼šæŒ‰æ•°å€¼è¿›è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼ï¼Œæˆ–è¶…è¿‡äº†<code>redis</code>æ•°å€¼ä¸Šçº¿èŒƒå›´ï¼Œå°†ä¼šæŠ¥é”™ã€‚<code>9223372036854775807</code> (javaä¸­longå‹æ•°æ®æœ€å¤§å€¼ï¼Œ<code>Long.MAX_VALUE</code>)</p>
<h3 id="String-æ•°æ®æ—¶æ•ˆæ€§è®¾ç½®"><a href="#String-æ•°æ®æ—¶æ•ˆæ€§è®¾ç½®" class="headerlink" title="String æ•°æ®æ—¶æ•ˆæ€§è®¾ç½®"></a>String æ•°æ®æ—¶æ•ˆæ€§è®¾ç½®</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<ul>
<li><p>åœºæ™¯ä¸€ï¼šâ€œæœ€å¼ºå¥³ç”Ÿâ€ï¼Œå¯åŠ¨æµ·é€‰æŠ•ç¥¨ï¼Œåªèƒ½é€šè¿‡å¾®ä¿¡æŠ•ç¥¨ï¼Œæ¯ä¸ªå¾®ä¿¡å·æ¯4ä¸ªå°æ—¶åªèƒ½æŠ•1ç¥¨ã€‚</p>
</li>
<li><p>åœºæ™¯äºŒï¼šç”µå•†å•†å®¶å¼€å¯çƒ­é—¨å•†å“æ¨èï¼Œçƒ­é—¨å•†å“ä¸èƒ½ä¸€ç›´å¤„äºçƒ­é—¨æœŸï¼Œæ¯ç§å•†å“çƒ­é—¨æœŸç»´æŒ3å¤©ï¼Œ3å¤©åè‡ªåŠ¨å–æ¶ˆçƒ­é—¨</p>
</li>
<li><p>åœºæ™¯ä¸‰ï¼šæ–°é—»ç½‘ç«™ä¼šå‡ºç°çƒ­ç‚¹æ–°é—»ï¼Œçƒ­ç‚¹æ–°é—»æœ€å¤§çš„ç‰¹å¾æ˜¯å¯¹æ—¶æ•ˆæ€§ï¼Œå¦‚ä½•è‡ªåŠ¨æ§åˆ¶çƒ­ç‚¹æ–°é—»çš„æ—¶æ•ˆæ€§</p>
</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>è®¾ç½®æ•°æ®å…·æœ‰æŒ‡å®šçš„å£°æ˜å‘¨æœŸ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">setex key seconds value
psetex key milliseconds value<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008194430071.png" srcset="/img/loading.gif" lazyload alt="image-20221008194430071"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008195132656.png" srcset="/img/loading.gif" lazyload alt="image-20221008195132656"></p>
<p><code>psetex</code> å’Œ <code>setex</code> ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ŒåŒºåˆ«æ˜¯ï¼š<code>psetex</code> æ—¶é—´å•ä½æ˜¯æ¯«ç§’ï¼Œ<code>setex</code> æ˜¯ç§’ã€‚</p>
<p>Tips 2:</p>
<ul>
<li><code>redis</code> æ§åˆ¶æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡æ•°æ®æ˜¯å¦å¤±æ•ˆæ§åˆ¶ä¸šåŠ¡è¡Œä¸ºï¼Œé€‚ç”¨äºæ‰€æœ‰å…·æœ‰æ—¶æ•ˆæ€§é™å®šæ§åˆ¶çš„æ“ä½œ</li>
</ul>
<h3 id="String-ç±»å‹çš„æ³¨æ„äº‹é¡¹"><a href="#String-ç±»å‹çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="String ç±»å‹çš„æ³¨æ„äº‹é¡¹"></a>String ç±»å‹çš„æ³¨æ„äº‹é¡¹</h3><ul>
<li><p>æ•°æ®æ“ä½œä¸æˆåŠŸçš„åé¦ˆä¸æ•°æ®æ­£å¸¸æ“ä½œä¹‹é—´çš„å·®å¼‚</p>
<ul>
<li><p>1ã€è¡¨ç¤ºè¿è¡Œç»“æœæ˜¯å¦æˆåŠŸ<br>â€ƒ<code>ï¼ˆinteger)0â€“&gt;false </code>å¤±è´¥<br>  â€ƒ<code>ï¼ˆinteger)1â€“&gt;true </code>æˆåŠŸ</p>
</li>
<li><p>2ã€è¡¨ç¤ºè¿è¡Œç»“æœå€¼<br>â€ƒ<code>ï¼ˆinteger)3â€“&gt;3 </code>3ä¸ª<br>  â€ƒ<code>ï¼ˆinteger)1â€“&gt;1 </code>1ä¸ª</p>
</li>
</ul>
</li>
<li><p>æ•°æ®æœªè·å–åˆ°<code>(nilï¼‰</code>ç­‰åŒäº<code>null</code></p>
</li>
<li><p>æ•°æ®æœ€å¤§å­˜å‚¨é‡<code>512MB</code></p>
</li>
<li><p>æ•°å€¼è®¡ç®—æœ€å¤§èŒƒå›´ï¼ˆjavaä¸­çš„longçš„æœ€å¤§å€¼ï¼‰</p>
</li>
</ul>
<h3 id="Stringç±»å‹åº”ç”¨åœºæ™¯"><a href="#Stringç±»å‹åº”ç”¨åœºæ™¯" class="headerlink" title="Stringç±»å‹åº”ç”¨åœºæ™¯"></a>Stringç±»å‹åº”ç”¨åœºæ™¯</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong><br>ä¸»é¡µé«˜é¢‘è®¿é—®ä¿¡æ¯æ˜¾ç¤ºæ§åˆ¶ï¼Œä¾‹å¦‚æ–°æµªå¾®åšå¤§Vä¸»é¡µæ˜¾ç¤ºç²‰ä¸æ•°ä¸å¾®åšæ•°é‡</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008195627422.png" srcset="/img/loading.gif" lazyload alt="image-20221008195627422"></p>
<h3 id="keyçš„è®¾ç½®çº¦å®š"><a href="#keyçš„è®¾ç½®çº¦å®š" class="headerlink" title="keyçš„è®¾ç½®çº¦å®š"></a>keyçš„è®¾ç½®çº¦å®š</h3><p>æ•°æ®åº“ä¸­çš„çƒ­ç‚¹æ•°æ®<code>key</code>å‘½åæƒ¯ä¾‹</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200413220259916.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h2 id="Redisæ•°æ®ç±»å‹-Hash"><a href="#Redisæ•°æ®ç±»å‹-Hash" class="headerlink" title="Redisæ•°æ®ç±»å‹ Hash"></a>Redisæ•°æ®ç±»å‹ Hash</h2><h3 id="å­¦ä¹ æ•™ç¨‹"><a href="#å­¦ä¹ æ•™ç¨‹" class="headerlink" title="å­¦ä¹ æ•™ç¨‹"></a>å­¦ä¹ æ•™ç¨‹</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1CJ411m7Gc?p=12">https://www.bilibili.com/video/BV1CJ411m7Gc?p=12</a></p>
<h3 id="Hashç±»å‹"><a href="#Hashç±»å‹" class="headerlink" title="Hashç±»å‹"></a>Hashç±»å‹</h3><p><strong>å­˜å‚¨çš„å›°æƒ‘</strong><br>å¯¹è±¡ç±»æ•°æ®çš„å­˜å‚¨å¦‚æœå…·æœ‰è¾ƒä¸ºé¢‘ç¹çš„æ›´æ–°éœ€æ±‚æ“ä½œä¼šæ˜¾å¾—ç¬¨é‡</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652303781884.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="hashç±»å‹"><a href="#hashç±»å‹" class="headerlink" title="hashç±»å‹"></a><strong>hashç±»å‹</strong></h3><ul>
<li>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå¯¹ä¸€ç³»åˆ—å­˜å‚¨çš„æ•°æ®è¿›è¡Œç¼–ç»„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå…¸å‹åº”ç”¨å­˜å‚¨å¯¹è±¡ä¿¡æ¯</li>
<li>éœ€è¦çš„å†…å­˜ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šå°‘ä¸ªé”®å€¼å¯¹æ•°æ®</li>
<li><code>hash</code>ç±»å‹ï¼šåº•å±‚ä½¿ç”¨å“ˆå¸Œè¡¨ç»“æ„å®ç°æ•°æ®å­˜å‚¨</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652314848056.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="hashç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#hashç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="hashç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>hashç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h3><ul>
<li>æ·»åŠ /ä¿®æ”¹æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">hset key field value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hget key field
hgetall key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hdel key field1 <span class="token punctuation">[</span>field2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hmset key field1 value1 field2 calue2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å¤šä¸ªæ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hmget key field1 field2 â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hlen key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexists key field<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="hashç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"><a href="#hashç±»å‹æ•°æ®æ‰©å±•æ“ä½œ" class="headerlink" title="hashç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"></a>hashç±»å‹æ•°æ®æ‰©å±•æ“ä½œ</h3><ul>
<li>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„å­—æ®µåå’Œå­—æ®µå€¼</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hkeys key
hvals key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>è®¾ç½®æŒ‡å®šå­—æ®µçš„æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hincrby key field increment
hincrbyfloat key field increment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h3 id="hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h3><ul>
<li>hashç±»å‹ä¸‹çš„<code>value</code>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¸å…è®¸å­˜å‚¨å…¶ä»–ç±»å‹æ•°æ®ï¼Œä¸å­˜åœ¨åµŒå¥—ç°è±¡ã€‚å¦‚æœæ•°æ®æœªè·å–åˆ°ï¼Œå¯¹åº”çš„å€¼ä¸º<code>(nil)</code></li>
<li>æ¯ä¸ª<code>hash</code>å¯ä»¥å­˜å‚¨<code>232-1</code>ä¸ªé”®å€¼å¯¹</li>
<li><code>hash</code>ç±»å‹ååˆ†è´´è¿‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ·»åŠ åˆ é™¤å¯¹è±¡å±æ€§ã€‚ä½†<code>hash</code>è®¾è®¡åˆä¸­ä¸æ˜¯ä¸ºäº†å­˜å‚¨å¤§é‡å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œåˆ‡è®°ä¸å¯æ»¥ç”¨ï¼Œæ›´ä¸å¯ä»¥å°†<code>hash</code>ä½œä¸ºå¯¹è±¡åˆ—è¡¨ä½¿ç”¨</li>
<li><code>hgetall</code>æ“ä½œå¯ä»¥è·å–å…¨éƒ¨å±æ€§ï¼Œå¦‚æœå†…éƒ¨<code>field</code>è¿‡å¤šï¼Œéå†æ•´ä½“æ•°æ®æ•ˆç‡å°±ä¼šå¾ˆä½ï¼Œæœ‰å¯èƒ½æˆä¸ºæ•°æ®è®¿é—®ç“¶é¢ˆ</li>
</ul>
<h3 id="hashç±»å‹åº”ç”¨åœºæ™¯è´­ç‰©è½¦"><a href="#hashç±»å‹åº”ç”¨åœºæ™¯è´­ç‰©è½¦" class="headerlink" title="hashç±»å‹åº”ç”¨åœºæ™¯è´­ç‰©è½¦"></a>hashç±»å‹åº”ç”¨åœºæ™¯è´­ç‰©è½¦</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652318807278.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523190155910.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="Hashå®ç°æŠ¢è´­"><a href="#Hashå®ç°æŠ¢è´­" class="headerlink" title="Hashå®ç°æŠ¢è´­"></a>Hashå®ç°æŠ¢è´­</h3><p>Hashåº”ç”¨åœºæ™¯</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523194297412.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä»¥å•†å®¶<code>id</code>ä½œä¸º<code>key</code></li>
<li>å°†å‚ä¸æŠ¢è´­çš„å•†å“<code>id</code>ä½œä¸º<code>field</code></li>
<li>å°†å‚ä¸æŠ¢è´­çš„å•†å“æ•°é‡ä½œä¸ºå¯¹åº”çš„<code>value</code></li>
<li>æŠ¢è´­æ—¶ä½¿ç”¨é™è‡³çš„æ–¹å¼æ§åˆ¶äº§å“æ•°é‡</li>
</ul>
<h2 id="Redisæ•°æ®å­˜å‚¨-List"><a href="#Redisæ•°æ®å­˜å‚¨-List" class="headerlink" title="Redisæ•°æ®å­˜å‚¨ List"></a>Redisæ•°æ®å­˜å‚¨ List</h2><h3 id="listç±»å‹"><a href="#listç±»å‹" class="headerlink" title="listç±»å‹"></a>listç±»å‹</h3><ul>
<li>æ•°æ®å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤šä¸ªæ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›å…¥å­˜å‚¨ç©ºé—´çš„é¡ºåºè¿›è¡ŒåŒºåˆ†</li>
<li>éœ€è¦çš„å­˜å‚¨æ•°æ®ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œä¸”é€šè¿‡æ•°æ®å¯ä»¥ä½“ç°è¿›å…¥é¡ºåº</li>
<li>listç±»å‹ï¼šä¿å­˜å¤šä¸ªæ•°æ®ï¼Œåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ç»“æ„å®ç°</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523626646014.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="listç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ"><a href="#listç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ" class="headerlink" title="listç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ"></a>listç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ</h3><ul>
<li><strong>æ·»åŠ /ä¿®æ”¹æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">lpush key value1 <span class="token namespace">[value2]</span> â€¦
rpush key value1 <span class="token namespace">[value2]</span> â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li><strong>è·å–æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lrange key start stop
lindex key index
llen key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li><strong>åˆ é™¤å¹¶ç§»é™¤æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lpop key
rpop key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h3 id="list-ç±»å‹æ•°ç»„æ‰©å±•æ“ä½œ"><a href="#list-ç±»å‹æ•°ç»„æ‰©å±•æ“ä½œ" class="headerlink" title="list ç±»å‹æ•°ç»„æ‰©å±•æ“ä½œ"></a><strong>list ç±»å‹æ•°ç»„æ‰©å±•æ“ä½œ</strong></h3><ul>
<li><strong>è§„å®šæ—¶é—´å†…è·å–å¹¶ç§»é™¤æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">blpop key1 [key2] timeout
brpop key1 [key2] timeout<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008215815344.png" srcset="/img/loading.gif" lazyload alt="image-20221008215815344"><br>é˜»å¡å¼è·å–ï¼Œè·å–å€¼å¦‚æœè¿˜æ²¡æœ‰çš„æ—¶å€™å¯ä»¥ç­‰ï¼Œå¦‚æœæœ‰å€¼å°±å¯ä»¥è·å–åˆ°ã€‚</p>
<h3 id="ä¸šåŠ¡åœºæ™¯"><a href="#ä¸šåŠ¡åœºæ™¯" class="headerlink" title="ä¸šåŠ¡åœºæ™¯"></a>ä¸šåŠ¡åœºæ™¯</h3><p>å¾®ä¿¡æœ‹å‹åœˆç‚¹èµï¼Œè¦æ±‚æŒ‰ç…§ç‚¹èµé¡ºåºæ˜¾ç¤ºç‚¹èµå¥½å‹ä¿¡æ¯ï¼Œå¦‚æœå–æ¶ˆç‚¹èµï¼Œç§»é™¤å¯¹åº”å¥½å‹ä¿¡æ¯</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166523647532016.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<ul>
<li><strong>ç§»é™¤æŒ‡å®šæ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lrem key count value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221008220123068.png" srcset="/img/loading.gif" lazyload alt="image-20221008220123068"></p>
<ul>
<li><code>redis</code>åº”ç”¨äºå…·æœ‰æ“ä½œçº¿åé¡ºåºçš„æ•°æ®æ§åˆ¶</li>
</ul>
<h3 id="listç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹"><a href="#listç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹" class="headerlink" title="listç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹"></a>listç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹</h3><ul>
<li><code>list </code>ä¸­ä¿å­˜çš„æ•°æ®éƒ½æ˜¯<code>string</code>ç±»å‹çš„ï¼Œæ•°æ®æ€»å®¹é‡å¼ç”±è¥¿å®‰çš„ï¼Œæœ€å¤š<code>232-1</code>ä¸ªå…ƒç´ <code>ï¼ˆ4294967295ï¼‰</code></li>
<li>listå…·æœ‰ç´¢å¼•çš„æ¦‚å¿µï¼Œä½†æ˜¯æ“ä½œæ•°æ®æ—¶å€™é€šå¸¸ä»¥é˜Ÿåˆ—çš„å½¢å¼è¿›è¡Œå…¥é˜Ÿå‡ºé˜Ÿæ“ä½œï¼Œæˆ–ä»¥æ ˆçš„å½¢å¼è¿›å…¥æ ˆå‡ºæ ˆçš„æ“ä½œ</li>
<li>è·å–å…¨éƒ¨æ•°æ®æ“ä½œç»“æŸç´¢å¼•è®¾ç½®ä¸º<code>-1</code></li>
<li><code>list</code> å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†é¡µæ“ä½œï¼Œé€šè¿‡ç¬¬ä¸€é¡µçš„ä¿¡æ¯æ¥è‡ª<code>list</code>ï¼Œç¬¬2é¡µåŠæ›´å¤šçš„ä¿¡æ¯é€šè¿‡æ•°æ®åº“çš„å½¢å¼åŠ è½½</li>
</ul>
<h3 id="listç±»å‹åº”ç”¨åœºæ™¯"><a href="#listç±»å‹åº”ç”¨åœºæ™¯" class="headerlink" title="listç±»å‹åº”ç”¨åœºæ™¯"></a>listç±»å‹åº”ç”¨åœºæ™¯</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<ul>
<li><p>twitterã€æ–°æµªå¾®åšã€è…¾è®¯å¾®åšä¸­ä¸ªäººç”¨äºçš„å…³æ³¨åˆ—è¡¨éœ€è¦æŒ‰ç…§ç”¨æˆ·çš„å…³æ³¨é¡ºåºè¿›è¡Œå±•ç¤ºï¼Œç²‰ä¸åˆ—è¡¨éœ€è¦å°†æœ€è¿‘å…³æ³¨çš„ç²‰ä¸åˆ—åœ¨å‰é¢</p>
</li>
<li><p>æ–°é—»ã€èµ„è®¯ç±»ç½‘ç«™å¦‚ä½•å°†æœ€æ–°çš„æ–°é—»æˆ–èµ„è®¯æŒ‰ç…§å‘ç”Ÿçš„äº‹ä»¶é¡ºåºå±•ç¤º</p>
</li>
<li><p>ä¼ä¸šè¿è¥è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿå°†äº§ç”Ÿå‡ºå¤§é‡çš„è¿è¥æ•°æ®ï¼Œå¦‚ä½•ä¿éšœå •èƒæœåŠ¡å™¨æ“ä½œæ—¥å¿—çš„ç»Ÿä¸€é¡ºåºè¾“å‡ºï¼Ÿ</p>
<p>è§£å†³æ–¹æ¡ˆ</p>
</li>
<li><p>ä¾èµ–listçš„æ•°æ®å…·æœ‰é¡ºåºçš„ç‰¹å¾å¯¹ä¿¡æ¯è¿›è¡Œç®¡ç†</p>
</li>
<li><p>ä½¿ç”¨é˜Ÿåˆ—æ¨¡å‹è§£å†³å¤šè·¯ä¿¡æ¯æ±‡æ€»åˆå¹¶çš„é—®é¢˜</p>
</li>
<li><p>ä½¿ç”¨æ ˆæ¨¡å‹è§£å†³æœ€æ–°æ¶ˆæ¯çš„é—®é¢˜</p>
</li>
</ul>
<h2 id="Redisæ•°æ®ç±»å‹-Set"><a href="#Redisæ•°æ®ç±»å‹-Set" class="headerlink" title="Redisæ•°æ®ç±»å‹ Set"></a>Redisæ•°æ®ç±»å‹ Set</h2><ul>
<li>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œåœ¨æŸ¥è¯¢æ–¹é¢æä¾›æ›´é«˜çš„æ•ˆç‡</li>
<li>ä¼‘è¦çš„å­˜å‚¨ç»“æ„ï¼šèƒ½å¤Ÿä¿å­˜å¤§é‡çš„æ•°æ®ï¼Œæç¬‘çš„å†…éƒ¨å­˜å‚¨æœºåˆ¶ï¼Œä¾¿äºæŸ¥è¯¢</li>
<li>setç±»å‹ï¼šä¸hashå­˜å‚¨ç»“æ„å®Œå…¨ç›¸åŒï¼Œä»…å­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ï¼ˆnil),å¹¶ä¸”å€¼å¼ä¸å…è®¸é‡å¤çš„</li>
</ul>
<h3 id="setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h3><ul>
<li>æ·»åŠ æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sadd key menber1 <span class="token punctuation">[</span>member2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å…¨éƒ¨æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">smembers key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">srem key member1 <span class="token punctuation">[</span>member2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–é›†åˆæ•°æ®æ€»é‡</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">scard key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šæ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sismember key member<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong><br>æ¯ä½ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨è¿›å…¥å¤´æ¡æ—¶å€™ä¼šè®¾ç½®3é¡¹çˆ±å¥½çš„å†…å®¹ï¼Œä½†æ˜¯åæœŸä¸ºäº†å¢åŠ ç”¨æˆ·çš„æ´»è·ƒåº¦ï¼Œå…´è¶£ç‚¹ï¼Œå¿…é¡»è®©ç”¨æˆ·å¯¹å…¶ä»–ä¿¡æ¯ç±»åˆ«é€æ¸äº§ç”Ÿå…´è¶£ï¼Œå¢åŠ å®¢æˆ·ç•™å­˜åº¦ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</p>
<p><strong>ä¸šåŠ¡åˆ†æ</strong></p>
<ul>
<li><p>ç³»ç»Ÿåˆ†æå‡ºå„ä¸ªåˆ†ç±»çš„æœ€æ–°æˆ–æœ€çƒ­ç‚¹ä¿¡æ¯æ¡ç›®å¹¶ç»„ç»‡æˆseté›†åˆ</p>
</li>
<li><p>éšæœºæŒ‘é€‰å…¶ä¸­éƒ¨åˆ†ä¿¡æ¯</p>
</li>
<li><p>é…åˆç”¨æˆ·å…³æ³¨ä¿¡æ¯åˆ†ç±»ä¸­çš„çƒ­ç‚¹ä¿¡æ¯ç»„ç»‡å±•ç¤ºçš„å…¨ä¿¡æ¯é›†åˆ</p>
</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>éšæœºè·å–é›†åˆä¸­æŒ‡å®šæ•°é‡çš„æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">srandmember key <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>éšæœºè·å–é›†åˆä¸­çš„æŸä¸ªæ•°æ®å¹¶å°†è¯¥æ•°æ®ç§»å‡ºé›†åˆ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">spop key <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>redisåº”ç”¨äºéšæœºæ¨èç±»ä¿¡æ¯æ£€ç´¢ï¼Œä¾‹å¦‚çƒ­ç‚¹æ­Œå•æ¨èï¼Œçƒ­ç‚¹æ–°é—»æ¨èï¼Œçƒ­ç‚¹æ—…æ¸¸çº¿è·¯ï¼Œåº”ç”¨APPæ¨èï¼Œå¤§Væ¨èç­‰</li>
</ul>
<h3 id="setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ-1"><a href="#setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ-1" class="headerlink" title="setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>setç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p><img src="https://./img-blog.csdnimg.cn/20200419195350115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sinter key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span>
sunion key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span>
<span class="token function">sdiff</span> key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†å¹¶å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sinterstore destination key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span>
sunionstore destination key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span>
sdiffstore destination key1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>å°†æŒ‡å®šæ•°æ®ä»åŸå§‹é›†åˆç§»åŠ¨åˆ°ç›®æ ‡é›†åˆä¸­</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">smove <span class="token builtin class-name">source</span> destination member<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><code>redis</code>åº”ç”¨äºåŒç±»ä¿¡æ¯çš„å…³è”æœç´¢ï¼ŒäºŒåº¦å…³è”æœç´¢ï¼Œæ·±åº¦å…³è”æœç´¢</li>
<li>æ˜¾ç¤ºå…±åŒå…³æ³¨ï¼ˆä¸€åº¦ï¼‰</li>
<li>æ˜¾ç¤ºå…±åŒå¥½å‹ï¼ˆä¸€åº¦ï¼‰</li>
<li>ç”±ç”¨æˆ·Aå‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ·Bçš„å¥½å‹ä¿¡æ¯åˆ—è¡¨ï¼ˆä¸€åº¦ï¼‰</li>
<li>ç”±ç”¨æˆ·Aå‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ·Bçš„è´­ç‰©æ¸…å•åˆ—è¡¨ï¼ˆäºŒåº¦ï¼‰</li>
<li>ç”±ç”¨æˆ·Aå‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ·Bçš„æ¸¸æˆå……å€¼åˆ—è¡¨ï¼ˆäºŒåº¦ï¼‰</li>
</ul>
<h3 id="Setç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#Setç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="Setç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>Setç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h3><ul>
<li><code>set</code>ç±»å‹ä¸å…è®¸æ•°æ®é‡å¤ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ®åœ¨<code>set</code>ä¸­å·²ç»å­˜åœ¨ï¼Œå°†åªä¿ç•™ä¸€ä»½</li>
<li><code>set</code>è™½ç„¶ä¸<code>hash</code>çš„å­˜å‚¨ç»“æ„ç›¸åŒï¼Œä½†æ˜¯æ— æ³•å¯ç”¨<code>hash</code>ä¸­å­˜å‚¨å€¼çš„ç©ºé—´</li>
</ul>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652943755982.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä¾èµ–seté›†åˆæ•°æ®ä¸é‡å¤çš„ç‰¹å¾ï¼Œä¾èµ–seté›†åˆhashå­˜å‚¨ç»“æ„ç‰¹å¾å®Œæˆæ•°æ®è¿‡æ»¤ä¸å¿«é€ŸæŸ¥è¯¢</li>
<li>æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·æ‰€æœ‰è§’è‰²</li>
<li>æ ¹æ®ç”¨æˆ·æ‰€æœ‰è§’è‰²è·å–ç”¨æˆ·æ‰€æœ‰æ“ä½œæƒé™æ”¾å…¥seté›†åˆ</li>
<li>æ ¹æ®ç”¨æˆ·æ‰€æœ‰è§‰å¾—è·å–ç”¨æˆ·æ‰€æœ‰æ•°æ®å…¨é€‰æ”¾å…¥seté›†åˆ</li>
</ul>
<p><strong>æ ¡éªŒå·¥ä½œ</strong>ï¼šredisæä¾›åŸºç¡€æ•°æ®è¿˜æ˜¯æä¾›æ ¡éªŒç»“æœ<br>Tips 10:</p>
<ul>
<li>redisåº”ç”¨äºåŒç±»å‹ä¸é‡å¤æ•°æ®çš„åˆå¹¶æ“ä½œ</li>
</ul>
<h3 id="setç±»å‹åº”ç”¨åœºæ™¯"><a href="#setç±»å‹åº”ç”¨åœºæ™¯" class="headerlink" title="setç±»å‹åº”ç”¨åœºæ™¯"></a>setç±»å‹åº”ç”¨åœºæ™¯</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420110014423.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>åˆ©ç”¨seté›†åˆçš„æ•°æ®å»é‡ç‰¹å¾ï¼Œè®°å½•å„ç§è®¿é—®æ•°æ®</li>
<li>å»ºç«‹stringç±»å‹æ•°æ®ï¼Œåˆ©ç”¨incrç»Ÿè®¡æ—¥è®¿é—®é‡ï¼ˆPV)</li>
<li>å»ºç«‹setæ¨¡å‹ï¼Œè®°å½•ä¸åŒcookieæ•°é‡ï¼ˆUV)</li>
<li>å»ºç«‹setæ¨¡å‹ï¼Œè®°å½•ä¸åŒIPæ•°é‡ï¼ˆIP)</li>
</ul>
<p><strong>ä¸šåŠ¡åœºæ™¯ï¼ˆé»‘ç™½åå•ï¼‰</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652944831775.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li><p>åŸºäºç»è¥æˆ˜ç•¥è®¾å®šé—®é¢˜ç”¨æˆ·å‘ç°ã€é‰´åˆ«è§„åˆ™</p>
</li>
<li><p>å‘¨æœŸæ€§æ›´è¡Œæ»¡è¶³è§„åˆ™çš„ç”¨æˆ·é»‘åå•ï¼ŒåŠ å…¥seté›†åˆ</p>
</li>
<li><p>ç”¨æˆ·è¡Œä¸ºä¿¡æ¯è¾¾åˆ°åä¸é»‘åå•è¿›è¡Œæ¯”æ¯”å¯¹ï¼Œç¡®è®¤è¡Œä¸ºå»å‘</p>
</li>
<li><p>é»‘åå•è¿‡æ»¤IPåœ°å€ï¼šåº”ç”¨äºå¼€æ”¾æ¸¸å®¢è®¿é—®æƒé™çš„ä¿¡æ¯æº</p>
</li>
<li><p>é»‘åå•è¿‡æ»¤è®¾å¤‡ä¿¡æ¯ï¼šåº”ç”¨äºé™å®šè®¿é—®è®¾å¤‡çš„ä¿¡æ¯æº</p>
</li>
<li><p>é»‘åå•è¿‡æ»¤ç”¨æˆ·ï¼šåº”ç”¨äºåŸºäºè®¿é—®æƒé™çš„ä¿¡æ¯æº</p>
</li>
</ul>
<p>Tips 12:</p>
<ul>
<li>redisåº”ç”¨äºåŸºäºé»‘åå•ä¸ç™½åå•è®¾å®šçš„æœåŠ¡æ§åˆ¶</li>
</ul>
<h2 id="Redisæ•°æ®ç±»å‹-sorted-set"><a href="#Redisæ•°æ®ç±»å‹-sorted-set" class="headerlink" title="Redisæ•°æ®ç±»å‹ sorted_set"></a>Redisæ•°æ®ç±»å‹ sorted_set</h2><ul>
<li>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šæ ¹æ®æ’åºæœ‰åˆ©äºæ•°æ®çš„æœ‰æ•ˆæ˜¾ç¤ºï¼Œéœ€è¦æä¾›ä¸€ç§å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹å¾è¿›è¡Œæ’åºçš„æ–¹å¼</li>
<li>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šæ–°çš„å­˜å‚¨æ¨¡å‹ï¼Œå¯ä»¥ä¿å­˜å¯æ’åºçš„æ•°æ®</li>
<li>sorted_setç±»å‹ï¼šåœ¨setçš„å­˜å‚¨ç»“æ„åŸºç¡€ä¸Šæ·»åŠ å¯æ’åºå­—æ®µ</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652961455767.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="sorted-setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#sorted-setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="sorted_setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>sorted_setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h3><ul>
<li>æ·»åŠ æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zadd key score1 member1 <span class="token punctuation">[</span>score2 member2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è·å–å…¨éƒ¨æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zrange key start stop <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span>
zrevrange key start stop <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>åˆ é™¤æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zrem key member <span class="token punctuation">[</span>member â€¦<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>æŒ‰æ¡ä»¶è·å–æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zrangebyscore key min max <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT<span class="token punctuation">]</span>
zrevrangebyscore key max min <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>æ¡ä»¶åˆ é™¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zremrangebyrank key start stop
zremrangebyscore key min max<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><p><code>min</code>ä¸<code>max</code>ç”¨äºé™å®šæœç´¢æŸ¥è¯¢çš„æ¡ä»¶</p>
</li>
<li><p><code>start</code>ä¸<code>stop</code>ç”¨äºé™å®šæŸ¥è¯¢èŒƒå›´ï¼Œä½œç”¨äºç´¢å¼•ï¼Œè¡¨ç¤ºå¼€å§‹å’Œç»“æŸç´¢å¼•</p>
</li>
<li><p><code>offset</code>ä¸<code>count</code>ç”¨äºé™å®šæŸ¥è¯¢èŒƒå›´ï¼Œä½œç”¨äºæŸ¥è¯¢ç»“æœï¼Œè¡¨ç¤º<code>å¼€å§‹ä½ç½®</code>å’Œ<code>æ•°æ®æ€»é‡</code></p>
</li>
<li><p>è·å–é›†åˆæ•°æ®æ€»é‡</p>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zcard key
zcount key min max<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>é›†åˆäº¤ã€å¹¶æ“ä½œ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zinterstore destination numkeys key <span class="token punctuation">[</span>key â€¦<span class="token punctuation">]</span>
zunionstore destination numkeys key <span class="token punctuation">[</span>key â€¦<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†ï¼Œå…¶ä¸­ç»™å®š <code>key</code> çš„æ•°é‡å¿…é¡»ä»¥ <code>numkeys</code> å‚æ•°æŒ‡å®šï¼Œå¹¶å°†è¯¥äº¤é›†(ç»“æœé›†)å‚¨å­˜åˆ° <code>destination</code> ã€‚</p>
<h3 id="sorted-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#sorted-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="sorted_set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>sorted_set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-16652965719209.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529658190511.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>è·å–æ•°æ®å¯¹åº”çš„ç´¢å¼•ï¼ˆæ’åï¼‰</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zrank key member
zrevrank key member<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>score å€¼è·å–ä¸ä¿®æ”¹</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">zscore key member
zincrby key increment member<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529756430013.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>Tips 13:</p>
<ul>
<li><code>redis </code>åº”ç”¨äºè®¡æ•°å™¨ç»„åˆæ’åºåŠŸèƒ½å¯¹åº”çš„æ’å</li>
</ul>
<h3 id="sorted-set-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#sorted-set-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="sorted_set ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>sorted_set ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h3><ul>
<li><p>score ä¿å­˜çš„æ•°æ®å­˜å‚¨ç©ºé—´æ˜¯<code>64</code>ä½ï¼Œå¦‚æœæ˜¯æ•´æ•°èŒƒå›´æ˜¯</p>
</li>
<li><p>scoreä¿å­˜çš„æ•°æ®ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒç²¾åº¦çš„<code>double</code>å€¼ï¼ŒåŸºäºåŒç²¾åº¦æµ®ç‚¹æ•°çš„ç‰¹å¾ï¼Œå¯èƒ½ä¼šä¸¢å¤±ç²¾åº¦ï¼Œä½¿ç”¨æ—¶ä¾¯è¦æ…é‡</p>
</li>
<li><p>sorted_setåº•å±‚å­˜å‚¨è¿˜æ˜¯åŸºäºsetç»“æ„çš„ï¼Œå› æ­¤æ•°æ®ä¸èƒ½é‡å¤ï¼Œå¦‚æœé‡å¤æ·»åŠ ç›¸åŒçš„æ•°æ®ï¼Œ<code>score</code>å€¼å°†è¢«åå¤è¦†ç›–ï¼Œä¿ç•™æœ€åä¸€æ¬¡ä¿®æ”¹çš„ç»“æœ</p>
</li>
</ul>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420131157293.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li><p>å¯¹äºåŸºäºæ—¶é—´çº¿é™å®šçš„ä»»åŠ¡å¤„ç†ï¼Œå°†å¤„ç†æ—¶é—´è®°å½•ä½<code>score</code>å€¼ï¼Œåˆ©ç”¨æ’åºåŠŸèƒ½åŒºåˆ†å¤„ç†çš„å…ˆåé¡ºåº</p>
</li>
<li><p>è®°å½•ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„äº‹ä»¶ï¼Œå½“åˆ°æœŸåå¤„ç†å¯¹åº”çš„ä»»åŠ¡ï¼Œç§»é™¤<code>redis</code>ä¸­çš„è®°å½•ï¼Œå¹¶è®°å½•ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„æ—¶é—´</p>
</li>
<li><p>å½“æ–°ä»»åŠ¡åŠ å…¥æ—¶ï¼Œåˆ¤å®šå¹¶æ›´æ–°å½“å‰ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„ä»»åŠ¡æ—¶é—´</p>
</li>
<li><p>ä¸ºæå‡<code>sorted_set</code>çš„æ€§èƒ½ï¼Œé€šå¸¸å°†ä»»åŠ¡æ ¹æ®ç‰¹å¾å­˜å‚¨æˆè‹¥å¹²ä¸ª<code>sorted_set</code>.ä¾‹å¦‚1å°æ—¶å†…ï¼Œ1å¤©å†…ï¼Œå¹´åº¦ç­‰ï¼Œæ“ä½œæ—¶é€æ¸æå‡ï¼Œå°†å³å°†æ“ä½œçš„è‹¥å¹²ä¸ªä»»åŠ¡çº³å…¥åˆ°1å°æ—¶å†…å¤„ç†é˜Ÿåˆ—ä¸­</p>
</li>
<li><p>è·å–å½“å‰ç³»ç»Ÿæ—¶é—´</p>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">time</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Tips 14</p>
<ul>
<li><code>redis</code>åº”ç”¨äºå®šæ—¶ä»»åŠ¡æ‰§è¡Œé¡ºåºç®¡ç†æˆ–ä»»åŠ¡è¿‡æœŸç®¡ç†</li>
</ul>
<h3 id="ä¸šåŠ¡åœºæ™¯-1"><a href="#ä¸šåŠ¡åœºæ™¯-1" class="headerlink" title="ä¸šåŠ¡åœºæ™¯"></a><strong>ä¸šåŠ¡åœºæ™¯</strong></h3><p>ä»»åŠ¡/æ¶ˆæ¯æƒé‡è®¾å®šåº”ç”¨</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/20200420132321704.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å¯¹äºå¸¦æœ‰æƒé‡çš„ä»»åŠ¡ï¼Œä¼˜å…ˆå¤„ç†æƒé‡é«˜çš„ä»»åŠ¡ï¼Œé‡‡ç”¨<code>score</code>è®°å½•æƒé‡å³å¯</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529806574817.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FtcW0zMw==,size_16,color_FFFFFF,t_70-166529807350419.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<ul>
<li>Tips 15:</li>
<li><code>redis</code>åº”ç”¨äºå³æ—¶ä»»åŠ¡/æ¶ˆæ¯é˜Ÿåˆ—æ‰§è¡Œç®¡ç† </li>
</ul>
<h2 id="æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹"><a href="#æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹" class="headerlink" title="æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹"></a>æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹</h2><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>äººå·¥æ™ºèƒ½é¢†åŸŸçš„è¯­ä¹‰è¯†åˆ«ä¸è‡ªåŠ¨å¯¹è¯å°†æ˜¯æœªæ¥æœåŠ¡ä¸šæœºå™¨äººåº”ç­”å‘¼å«ä½“ç³»ä¸­çš„é‡è¦æŠ€æœ¯ï¼Œç™¾åº¦è‡ªç ”ç”¨æˆ·è¯„ä»· è¯­ä¹‰è¯†åˆ«æœåŠ¡ï¼Œå…è´¹å¼€æ”¾ç»™ä¼ä¸šè¯•ç”¨ï¼ŒåŒæ—¶è®­ç»ƒç™¾åº¦è‡ªå·±çš„æ¨¡å‹ã€‚ç°å¯¹è¯•ç”¨ç”¨æˆ·çš„ä½¿ç”¨è¡Œä¸ºè¿›è¡Œé™é€Ÿï¼Œé™åˆ¶ æ¯ä¸ªç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤šå‘èµ·10æ¬¡è°ƒç”¨</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174400409.png" srcset="/img/loading.gif" lazyload alt="image-20221009174400409"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>è®¾è®¡è®¡æ•°å™¨ï¼Œè®°å½•è°ƒç”¨æ¬¡æ•°ï¼Œç”¨äºæ§åˆ¶ä¸šåŠ¡æ‰§è¡Œæ¬¡æ•°ã€‚ä»¥ç”¨æˆ·<code>id</code>ä½œä¸º<code>key</code>ï¼Œä½¿ç”¨æ¬¡æ•°ä½œä¸º<code>value</code> </li>
<li> åœ¨è°ƒç”¨å‰è·å–æ¬¡æ•°ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡é™å®šæ¬¡æ•° ä¸è¶…è¿‡æ¬¡æ•°çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨<code>è®¡æ•°+1</code> ä¸šåŠ¡è°ƒç”¨å¤±è´¥ï¼Œ<code>è®¡æ•°-1 </code></li>
<li>ä¸ºè®¡æ•°å™¨è®¾ç½®ç”Ÿå‘½å‘¨æœŸä¸ºæŒ‡å®šå‘¨æœŸï¼Œä¾‹å¦‚<code>1ç§’/åˆ†é’Ÿ</code>ï¼Œè‡ªåŠ¨æ¸…ç©ºå‘¨æœŸå†…ä½¿ç”¨æ¬¡æ•°</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174553101.png" srcset="/img/loading.gif" lazyload alt="image-20221009174553101"></p>
<p><strong>è§£å†³æ–¹æ¡ˆæ”¹è‰¯</strong></p>
<ul>
<li>å–æ¶ˆæœ€å¤§å€¼çš„åˆ¤å®šï¼Œåˆ©ç”¨<code>incr</code>æ“ä½œè¶…è¿‡æœ€å¤§å€¼æŠ›å‡ºå¼‚å¸¸çš„å½¢å¼æ›¿ä»£æ¯æ¬¡åˆ¤æ–­æ˜¯å¦å¤§äºæœ€å¤§å€¼ </li>
<li>åˆ¤æ–­æ˜¯å¦ä¸º<code>nil</code>ï¼Œ å¦‚æœæ˜¯ï¼Œè®¾ç½®ä¸ºMax-æ¬¡æ•° å¦‚æœä¸æ˜¯ï¼Œè®¡æ•°+1 ä¸šåŠ¡è°ƒç”¨å¤±è´¥ï¼Œè®¡æ•°-1 </li>
<li>é‡åˆ°å¼‚å¸¸å³+æ“ä½œè¶…è¿‡ä¸Šé™ï¼Œè§†ä¸ºä½¿ç”¨è¾¾åˆ°ä¸Šé™</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009174829031.png" srcset="/img/loading.gif" lazyload alt="image-20221009174829031"></p>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>ä½¿ç”¨å¾®ä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œå½“å¾®ä¿¡æ¥æ”¶æ¶ˆæ¯åï¼Œä¼šé»˜è®¤å°†æœ€è¿‘æ¥æ”¶çš„æ¶ˆæ¯ç½®é¡¶ï¼Œå½“å¤šä¸ªå¥½å‹åŠå…³æ³¨çš„è®¢é˜…å·åŒæ—¶å‘ é€æ¶ˆæ¯æ—¶ï¼Œè¯¥æ’åºä¼šä¸åœçš„è¿›è¡Œäº¤æ›¿ã€‚åŒæ—¶è¿˜å¯ä»¥å°†é‡è¦çš„ä¼šè¯è®¾ç½®ä¸ºç½®é¡¶ã€‚ä¸€æ—¦ç”¨æˆ·ç¦»çº¿åï¼Œå†æ¬¡æ‰“å¼€å¾® ä¿¡æ—¶ï¼Œæ¶ˆæ¯è¯¥æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºæ˜¾ç¤ºï¼Ÿ</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009175046572.png" srcset="/img/loading.gif" lazyload alt="image-20221009175046572"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä¾èµ–listçš„æ•°æ®å…·æœ‰é¡ºåºçš„ç‰¹å¾å¯¹æ¶ˆæ¯è¿›è¡Œç®¡ç†ï¼Œå°†listç»“æ„ä½œä¸ºæ ˆä½¿ç”¨ </li>
<li>å¯¹ç½®é¡¶ä¸æ™®é€šä¼šè¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹çš„liståˆ†åˆ«ç®¡ç† </li>
<li>å½“æŸä¸ªlistä¸­æ¥æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯å‘é€æ–¹çš„idä»listçš„ä¸€ä¾§åŠ å…¥listï¼ˆæ­¤å¤„è®¾å®šå·¦ä¾§ï¼‰ </li>
<li>å¤šä¸ªç›¸åŒidå‘å‡ºçš„æ¶ˆæ¯åå¤å…¥æ ˆä¼šå‡ºç°é—®é¢˜ï¼Œåœ¨å…¥æ ˆä¹‹å‰æ— è®ºæ˜¯å¦å…·æœ‰å½“å‰idå¯¹åº”çš„æ¶ˆæ¯ï¼Œå…ˆåˆ é™¤å¯¹åº”id </li>
<li>æ¨é€æ¶ˆæ¯æ—¶å…ˆæ¨é€ç½®é¡¶ä¼šè¯listï¼Œå†æ¨é€æ™®é€šä¼šè¯listï¼Œæ¨é€å®Œæˆçš„listæ¸…é™¤æ‰€æœ‰æ•°æ® </li>
<li>æ¶ˆæ¯çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯å¾®ä¿¡ç”¨æˆ·å¯¹è¯æ•°é‡é‡‡ç”¨è®¡æ•°å™¨çš„æ€æƒ³å¦è¡Œè®°å½•ï¼Œä¼´éšlistæ“ä½œåŒæ­¥æ›´æ–°</li>
</ul>
<p><strong>Tips 17ï¼š</strong> </p>
<ul>
<li> redis åº”ç”¨äºåŸºäºæ—¶é—´é¡ºåºçš„æ•°æ®æ“ä½œï¼Œè€Œä¸å…³æ³¨å…·ä½“æ—¶é—´</li>
</ul>
<h3 id="è§£å†³æ–¹æ¡ˆåˆ—è¡¨"><a href="#è§£å†³æ–¹æ¡ˆåˆ—è¡¨" class="headerlink" title="è§£å†³æ–¹æ¡ˆåˆ—è¡¨"></a>è§£å†³æ–¹æ¡ˆåˆ—è¡¨</h3><ul>
<li>Tips 1ï¼šredisç”¨äºæ§åˆ¶æ•°æ®åº“è¡¨ä¸»é”®idï¼Œä¸ºæ•°æ®åº“è¡¨ä¸»é”®æä¾›ç”Ÿæˆç­–ç•¥ï¼Œä¿éšœæ•°æ®åº“è¡¨çš„ä¸»é”®å”¯ä¸€æ€§ </li>
<li>Tips 2ï¼šredis æ§åˆ¶æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡æ•°æ®æ˜¯å¦å¤±æ•ˆæ§åˆ¶ä¸šåŠ¡è¡Œä¸ºï¼Œé€‚ç”¨äºæ‰€æœ‰å…·æœ‰æ—¶æ•ˆæ€§é™å®šæ§åˆ¶çš„æ“ä½œ </li>
<li>Tips 3ï¼šredisåº”ç”¨äºå„ç§ç»“æ„å‹å’Œéç»“æ„å‹é«˜çƒ­åº¦æ•°æ®è®¿é—®åŠ é€Ÿ </li>
<li>Tips 4ï¼šredis åº”ç”¨äºè´­ç‰©è½¦æ•°æ®å­˜å‚¨è®¾è®¡ </li>
<li>Tips 5ï¼šredis åº”ç”¨äºæŠ¢è´­ï¼Œé™è´­ç±»ã€é™é‡å‘æ”¾ä¼˜æƒ å·ã€æ¿€æ´»ç ç­‰ä¸šåŠ¡çš„æ•°æ®å­˜å‚¨è®¾è®¡ </li>
<li>Tips 6ï¼šredis åº”ç”¨äºå…·æœ‰æ“ä½œå…ˆåé¡ºåºçš„æ•°æ®æ§åˆ¶ </li>
<li>Tips 7ï¼šredis åº”ç”¨äºæœ€æ–°æ¶ˆæ¯å±•ç¤º </li>
<li>Tips 8ï¼šredis åº”ç”¨äºéšæœºæ¨èç±»ä¿¡æ¯æ£€ç´¢ï¼Œä¾‹å¦‚çƒ­ç‚¹æ­Œå•æ¨èï¼Œçƒ­ç‚¹æ–°é—»æ¨èï¼Œçƒ­å–æ—…æ¸¸çº¿è·¯ï¼Œåº”ç”¨APPæ¨èï¼Œå¤§Væ¨èç­‰ </li>
<li>Tips 9ï¼šredis åº”ç”¨äºåŒç±»ä¿¡æ¯çš„å…³è”æœç´¢ï¼ŒäºŒåº¦å…³è”æœç´¢ï¼Œæ·±åº¦å…³è”æœç´¢ </li>
<li>Tips 10ï¼šredis åº”ç”¨äºåŒç±»å‹ä¸é‡å¤æ•°æ®çš„åˆå¹¶ã€å–äº¤é›†æ“ä½œ </li>
<li>Tips 11ï¼šredis åº”ç”¨äºåŒç±»å‹æ•°æ®çš„å¿«é€Ÿå»é‡ </li>
<li>Tips 12ï¼šredis åº”ç”¨äºåŸºäºé»‘åå•ä¸ç™½åå•è®¾å®šçš„æœåŠ¡æ§åˆ¶ </li>
<li>Tips 13ï¼šredis åº”ç”¨äºè®¡æ•°å™¨ç»„åˆæ’åºåŠŸèƒ½å¯¹åº”çš„æ’å </li>
<li>Tips 14ï¼šredis åº”ç”¨äºå®šæ—¶ä»»åŠ¡æ‰§è¡Œé¡ºåºç®¡ç†æˆ–ä»»åŠ¡è¿‡æœŸç®¡ç† </li>
<li>Tips 15ï¼šredis åº”ç”¨äºåŠæ—¶ä»»åŠ¡/æ¶ˆæ¯é˜Ÿåˆ—æ‰§è¡Œç®¡ç† </li>
<li>Tips 16ï¼šredis åº”ç”¨äºæŒ‰æ¬¡ç»“ç®—çš„æœåŠ¡æ§åˆ¶ </li>
<li>Tips 17ï¼šredis åº”ç”¨äºåŸºäºæ—¶é—´é¡ºåºçš„æ•°æ®æ“ä½œï¼Œè€Œä¸å…³æ³¨å…·ä½“æ—¶é—´</li>
</ul>
<h1 id="Redis-é€šç”¨æŒ‡ä»¤"><a href="#Redis-é€šç”¨æŒ‡ä»¤" class="headerlink" title="Redis é€šç”¨æŒ‡ä»¤"></a>Redis é€šç”¨æŒ‡ä»¤</h1><h2 id="keyé€šç”¨æŒ‡ä»¤"><a href="#keyé€šç”¨æŒ‡ä»¤" class="headerlink" title="keyé€šç”¨æŒ‡ä»¤"></a>keyé€šç”¨æŒ‡ä»¤</h2><h3 id="key-ç‰¹å¾"><a href="#key-ç‰¹å¾" class="headerlink" title="key ç‰¹å¾"></a><strong>key ç‰¹å¾</strong></h3><p>keyæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡<code>key</code>è·å–<code>redis</code>ä¸­ä¿å­˜çš„æ•°æ®</p>
<p><strong>keyåº”è¯¥è®¾è®¡å“ªäº›æ“ä½œï¼Ÿ</strong></p>
<ul>
<li>å¯¹äºkeyè‡ªèº«çŠ¶æ€çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šåˆ é™¤ï¼Œåˆ¤å®šå­˜åœ¨ï¼Œè·å–ç±»å‹ç­‰ </li>
<li>å¯¹äºkeyæœ‰æ•ˆæ€§æ§åˆ¶ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šæœ‰æ•ˆæœŸè®¾å®šï¼Œåˆ¤å®šæ˜¯å¦æœ‰æ•ˆï¼Œæœ‰æ•ˆçŠ¶æ€çš„åˆ‡æ¢ç­‰ </li>
<li>å¯¹äºkeyå¿«é€ŸæŸ¥è¯¢æ“ä½œï¼Œä¾‹å¦‚ï¼šæŒ‰æŒ‡å®šç­–ç•¥æŸ¥è¯¢key </li>
<li>â€¦â€¦</li>
</ul>
<h3 id="key-åŸºæœ¬æ“ä½œ"><a href="#key-åŸºæœ¬æ“ä½œ" class="headerlink" title="key åŸºæœ¬æ“ä½œ"></a>key åŸºæœ¬æ“ä½œ</h3><h4 id="åˆ é™¤æŒ‡å®škey"><a href="#åˆ é™¤æŒ‡å®škey" class="headerlink" title="åˆ é™¤æŒ‡å®škey"></a><strong>åˆ é™¤æŒ‡å®škey</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">del key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">del</span> string
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get string
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="è·å–keyæ˜¯å¦å­˜åœ¨"><a href="#è·å–keyæ˜¯å¦å­˜åœ¨" class="headerlink" title="è·å–keyæ˜¯å¦å­˜åœ¨"></a><strong>è·å–keyæ˜¯å¦å­˜åœ¨</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">exists key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> exists list1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h4 id="è·å–keyçš„ç±»å‹"><a href="#è·å–keyçš„ç±»å‹" class="headerlink" title="è·å–keyçš„ç±»å‹"></a><strong>è·å–keyçš„ç±»å‹</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">type</span> key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">type</span> list1
list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h3 id="key-æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰"><a href="#key-æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰" class="headerlink" title="key æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰"></a>key æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰</h3><h4 id="ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ"><a href="#ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ" class="headerlink" title="ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ"></a><strong>ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">expire key seconds
pexpire key milliseconds
expireat key timestamp
pexpireat key milliseconds-timestamp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> expire name 10
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token string">"weiwshao"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> expireat name 1665310700
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token string">"weishao"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> time
1<span class="token punctuation">)</span> <span class="token string">"1665310693"</span>
2<span class="token punctuation">)</span> <span class="token string">"637763"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token string">"weishao"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><code>EXPIREAT</code> çš„ä½œç”¨å’Œ <code>EXPIRE</code> ç±»ä¼¼ï¼Œéƒ½ç”¨äºä¸º <code>key</code> è®¾ç½®ç”Ÿå­˜æ—¶é—´ã€‚ä¸åŒåœ¨äº <code>EXPIREAT</code> å‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIX æ—¶é—´æˆ³(unix timestamp)ã€‚</p>
<h4 id="è·å–keyçš„æœ‰æ•ˆæ—¶é—´"><a href="#è·å–keyçš„æœ‰æ•ˆæ—¶é—´" class="headerlink" title="è·å–keyçš„æœ‰æ•ˆæ—¶é—´"></a><strong>è·å–keyçš„æœ‰æ•ˆæ—¶é—´</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">ttl key
pttl key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name weishao
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span>1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> expire name 10
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 7
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 3
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> pttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span>2
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name weishao
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> pttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span>1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> expire name 10
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> pttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 7061
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> pttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span>2
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>å½“ <code>key</code> ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› <code>-2</code> ã€‚</li>
<li>å½“ <code>key</code> å­˜åœ¨ä½†æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å› <code>-1</code> ã€‚</li>
<li>å¦åˆ™ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œè¿”å› <code>key</code> çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚</li>
</ul>
<h4 id="åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§"><a href="#åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§" class="headerlink" title="åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§"></a><strong>åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">persist key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> expire name 10
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 7
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> persist name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span>1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="key-æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰"><a href="#key-æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰" class="headerlink" title="key æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰"></a>key æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰</h3><h4 id="æŸ¥è¯¢key"><a href="#æŸ¥è¯¢key" class="headerlink" title="æŸ¥è¯¢key"></a><strong>æŸ¥è¯¢key</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">keys pattern<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æŸ¥è¯¢æ¨¡å¼è§„åˆ™</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">* åŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„ç¬¦å· ? é…åˆä¸€ä¸ªä»»æ„ç¬¦å· <span class="token punctuation">[</span><span class="token punctuation">]</span> åŒ¹é…ä¸€ä¸ªæŒ‡å®šç¬¦å·
keys * æŸ¥è¯¢æ‰€æœ‰
keys it* æŸ¥è¯¢æ‰€æœ‰ä»¥itå¼€å¤´
keys *heima æŸ¥è¯¢æ‰€æœ‰ä»¥heimaç»“å°¾
keys ??heima æŸ¥è¯¢æ‰€æœ‰å‰é¢ä¸¤ä¸ªå­—ç¬¦ä»»æ„ï¼Œåé¢ä»¥heimaç»“å°¾
keys user:? æŸ¥è¯¢æ‰€æœ‰ä»¥user:å¼€å¤´ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦ä»»æ„
keys u<span class="token punctuation">[</span>st<span class="token punctuation">]</span>er:1 æŸ¥è¯¢æ‰€æœ‰ä»¥uå¼€å¤´ï¼Œä»¥er:1ç»“å°¾ï¼Œä¸­é—´åŒ…å«ä¸€ä¸ªå­—æ¯ï¼Œsæˆ–t<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="key-å…¶ä»–æ“ä½œ"><a href="#key-å…¶ä»–æ“ä½œ" class="headerlink" title="key å…¶ä»–æ“ä½œ"></a><strong>key å…¶ä»–æ“ä½œ</strong></h4><h5 id="ä¸ºkeyæ”¹å"><a href="#ä¸ºkeyæ”¹å" class="headerlink" title="ä¸ºkeyæ”¹å"></a>ä¸ºkeyæ”¹å</h5><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">rename key newkey
renamenx key newkey<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name weishao
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> rename name name2
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name2
<span class="token string">"weishao"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name2
<span class="token string">"weishao"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name3 123
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> renamenx name2 name3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>å½“ä¸”ä»…å½“ <code>newkey</code> ä¸å­˜åœ¨æ—¶ï¼Œå°† <code>key</code> æ”¹åä¸º <code>newkey</code> ã€‚</p>
<p>å½“ <code>key</code> ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>ä¿®æ”¹æˆåŠŸæ—¶ï¼Œè¿”å› <code>1</code> ï¼› å¦‚æœ <code>newkey</code> å·²ç»å­˜åœ¨ï¼Œè¿”å› <code>0</code> ã€‚</p>
<h5 id="å¯¹æ‰€æœ‰keyæ’åº"><a href="#å¯¹æ‰€æœ‰keyæ’åº" class="headerlink" title="å¯¹æ‰€æœ‰keyæ’åº"></a>å¯¹æ‰€æœ‰keyæ’åº</h5><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">sort</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">127.0.0.1:6379&gt; lrange list2 0 -1
1) &quot;8&quot;
2) &quot;6&quot;
3) &quot;2&quot;
4) &quot;4&quot;
5) &quot;3&quot;
6) &quot;6&quot;
127.0.0.1:6379&gt; sort list2
1) &quot;2&quot;
2) &quot;3&quot;
3) &quot;4&quot;
4) &quot;6&quot;
5) &quot;6&quot;
6) &quot;8&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h5 id="å…¶ä»–keyé€šç”¨æ“ä½œ"><a href="#å…¶ä»–keyé€šç”¨æ“ä½œ" class="headerlink" title="å…¶ä»–keyé€šç”¨æ“ä½œ"></a>å…¶ä»–keyé€šç”¨æ“ä½œ</h5><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">help @generic<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h2 id="æ•°æ®åº“é€šç”¨æŒ‡ä»¤"><a href="#æ•°æ®åº“é€šç”¨æŒ‡ä»¤" class="headerlink" title="æ•°æ®åº“é€šç”¨æŒ‡ä»¤"></a>æ•°æ®åº“é€šç”¨æŒ‡ä»¤</h2><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a><strong>æ•°æ®åº“</strong></h3><h4 id="key-çš„é‡å¤é—®é¢˜"><a href="#key-çš„é‡å¤é—®é¢˜" class="headerlink" title="key çš„é‡å¤é—®é¢˜"></a><strong>key çš„é‡å¤é—®é¢˜</strong></h4><ul>
<li><code>key</code>æ˜¯ç”±ç¨‹åºå‘˜å®šä¹‰çš„ </li>
<li><code>redis</code>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼´éšç€æ“ä½œæ•°æ®é‡çš„å¢åŠ ï¼Œä¼šå‡ºç°å¤§é‡çš„æ•°æ®ä»¥åŠå¯¹åº”çš„<code>key </code></li>
<li>æ•°æ®ä¸åŒºåˆ†ç§ç±»ã€ç±»åˆ«æ··æ‚åœ¨ä¸€èµ·ï¼Œææ˜“å‡ºç°é‡å¤æˆ–å†²çª</li>
</ul>
<h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a><strong>è§£å†³æ–¹æ¡ˆ</strong></h4><ul>
<li>redisä¸ºæ¯ä¸ªæœåŠ¡æä¾›æœ‰16ä¸ªæ•°æ®åº“ï¼Œç¼–å·ä»0åˆ°15 </li>
<li>æ¯ä¸ªæ•°æ®åº“ä¹‹é—´çš„æ•°æ®ç›¸äº’ç‹¬ç«‹</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009204434585.png" srcset="/img/loading.gif" lazyload alt="image-20221009204434585"></p>
<h3 id="db-åŸºæœ¬æ“ä½œ"><a href="#db-åŸºæœ¬æ“ä½œ" class="headerlink" title="db åŸºæœ¬æ“ä½œ"></a>db åŸºæœ¬æ“ä½œ</h3><h4 id="åˆ‡æ¢æ•°æ®åº“"><a href="#åˆ‡æ¢æ•°æ®åº“" class="headerlink" title="åˆ‡æ¢æ•°æ®åº“"></a>åˆ‡æ¢æ•°æ®åº“</h4><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">select</span> index<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">select</span> 1
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h4><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">quit
ping
<span class="token function">echo</span> message<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> ping
PONG<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>ä½¿ç”¨å®¢æˆ·ç«¯å‘ Redis æœåŠ¡å™¨å‘é€ä¸€ä¸ª <code>PING</code> ï¼Œå¦‚æœæœåŠ¡å™¨è¿ä½œæ­£å¸¸çš„è¯ï¼Œä¼šè¿”å›ä¸€ä¸ª <code>PONG</code> ã€‚é€šå¸¸ç”¨äºæµ‹è¯•ä¸æœåŠ¡å™¨çš„è¿æ¥æ˜¯å¦ä»ç„¶ç”Ÿæ•ˆï¼Œæˆ–è€…ç”¨äºæµ‹é‡å»¶è¿Ÿå€¼ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">127.0.0.1:6379&gt; echo 123
&quot;123&quot;
127.0.0.1:6379&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ‰“å°ä¸€ä¸ªç‰¹å®šçš„ä¿¡æ¯ <code>message</code> ï¼Œæµ‹è¯•æ—¶ä½¿ç”¨ã€‚</p>
<h3 id="db-ç›¸å…³æ“ä½œ"><a href="#db-ç›¸å…³æ“ä½œ" class="headerlink" title="db ç›¸å…³æ“ä½œ"></a>db ç›¸å…³æ“ä½œ</h3><h4 id="æ•°æ®ç§»åŠ¨"><a href="#æ•°æ®ç§»åŠ¨" class="headerlink" title="æ•°æ®ç§»åŠ¨"></a>æ•°æ®ç§»åŠ¨</h4><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">move key db<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">move</span> name2 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> exists name2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">select</span> 1
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>> keys <span class="token operator">*</span>
1<span class="token punctuation">)</span> <span class="token string">"name2"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="æ•°æ®æ¸…é™¤"><a href="#æ•°æ®æ¸…é™¤" class="headerlink" title="æ•°æ®æ¸…é™¤"></a>æ•°æ®æ¸…é™¤</h4><figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">dbsize
flushdb
flushall<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>è¿”å›å½“å‰æ•°æ®åº“çš„ key çš„æ•°é‡ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 16
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> flushdb
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¸…ç©ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰ keyã€‚æ­¤å‘½ä»¤ä»ä¸å¤±è´¥ã€‚</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">select</span> 1
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>> <span class="token function">select</span> 0
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> flushall
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">select</span> 1
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379<span class="token punctuation">[</span>1<span class="token punctuation">]</span>> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>æ¸…ç©ºæ•´ä¸ª <code>Redis</code> æœåŠ¡å™¨çš„æ•°æ®(åˆ é™¤æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰<code> key</code> )ã€‚æ­¤å‘½ä»¤ä»ä¸å¤±è´¥ã€‚</p>
<h1 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h1><h2 id="Jedisç®€ä»‹"><a href="#Jedisç®€ä»‹" class="headerlink" title="Jedisç®€ä»‹"></a>Jedisç®€ä»‹</h2><h3 id="ç¼–ç¨‹è¯­è¨€ä¸redis"><a href="#ç¼–ç¨‹è¯­è¨€ä¸redis" class="headerlink" title="ç¼–ç¨‹è¯­è¨€ä¸redis"></a>ç¼–ç¨‹è¯­è¨€ä¸redis</h3><p><code>Java</code>è¯­è¨€è¿æ¥<code>redis</code>æœåŠ¡ <code>Jedis</code></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221009210540279.png" srcset="/img/loading.gif" lazyload alt="image-20221009210540279"></p>
<ul>
<li><p>Javaè¯­è¨€è¿æ¥redisæœåŠ¡ </p>
<ul>
<li><p>Jedis </p>
</li>
<li><p>SpringData Redis </p>
</li>
<li><p>Lettuce </p>
</li>
</ul>
</li>
<li><p>C ã€C++ ã€C# ã€Erlangã€Lua ã€Objective-C ã€Perl ã€PHP ã€Python ã€Ruby ã€Scala </p>
</li>
<li><p>å¯è§†åŒ–è¿æ¥rediså®¢æˆ·ç«¯ </p>
<ul>
<li><p>Redis Desktop Manager </p>
</li>
<li><p>Redis Client </p>
</li>
<li><p>Redis Studi</p>
</li>
</ul>
</li>
</ul>
<h2 id="HelloWorldï¼ˆJedisç‰ˆï¼‰"><a href="#HelloWorldï¼ˆJedisç‰ˆï¼‰" class="headerlink" title="HelloWorldï¼ˆJedisç‰ˆï¼‰"></a>HelloWorldï¼ˆJedisç‰ˆï¼‰</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul>
<li><strong>jaråŒ…å¯¼å…¥</strong> </li>
</ul>
<p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/redis.clients/jedis">https://mvnrepository.com/artifact/redis.clients/jedis</a></p>
<ul>
<li><strong>åŸºäºmaven</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="å®¢æˆ·ç«¯è¿æ¥redis"><a href="#å®¢æˆ·ç«¯è¿æ¥redis" class="headerlink" title="å®¢æˆ·ç«¯è¿æ¥redis"></a>å®¢æˆ·ç«¯è¿æ¥redis</h3><h4 id="è¿æ¥redis"><a href="#è¿æ¥redis" class="headerlink" title="è¿æ¥redis"></a><strong>è¿æ¥redis</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h4 id="æ“ä½œredis"><a href="#æ“ä½œredis" class="headerlink" title="æ“ä½œredis"></a><strong>æ“ä½œredis</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"itheima"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h4 id="å…³é—­redisè¿æ¥"><a href="#å…³é—­redisè¿æ¥" class="headerlink" title="å…³é—­redisè¿æ¥"></a><strong>å…³é—­redisè¿æ¥</strong></h4><figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java">jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h4 id="APIæ–‡æ¡£"><a href="#APIæ–‡æ¡£" class="headerlink" title="APIæ–‡æ¡£"></a>APIæ–‡æ¡£</h4><p><a target="_blank" rel="noopener" href="http://xetorthio.github.io/jedis/">http://xetorthio.github.io/jedis/</a></p>
<h3 id="Jedisè¯»å†™redisæ•°æ®"><a href="#Jedisè¯»å†™redisæ•°æ®" class="headerlink" title="Jedisè¯»å†™redisæ•°æ®"></a>Jedisè¯»å†™redisæ•°æ®</h3><h4 id="æ¡ˆä¾‹ï¼šæœåŠ¡è°ƒç”¨æ¬¡æ•°æ§åˆ¶"><a href="#æ¡ˆä¾‹ï¼šæœåŠ¡è°ƒç”¨æ¬¡æ•°æ§åˆ¶" class="headerlink" title="æ¡ˆä¾‹ï¼šæœåŠ¡è°ƒç”¨æ¬¡æ•°æ§åˆ¶"></a><strong>æ¡ˆä¾‹ï¼šæœåŠ¡è°ƒç”¨æ¬¡æ•°æ§åˆ¶</strong></h4><p>äººå·¥æ™ºèƒ½é¢†åŸŸçš„è¯­ä¹‰è¯†åˆ«ä¸è‡ªåŠ¨å¯¹è¯å°†æ˜¯æœªæ¥æœåŠ¡ä¸šæœºå™¨äººåº”ç­”å‘¼å«ä½“ç³»ä¸­çš„é‡è¦æŠ€æœ¯ï¼Œç™¾åº¦è‡ªç ”ç”¨æˆ·è¯„ ä»·è¯­ä¹‰è¯†åˆ«æœåŠ¡ï¼Œå…è´¹å¼€æ”¾ç»™ä¼ä¸šè¯•ç”¨ï¼ŒåŒæ—¶è®­ç»ƒç™¾åº¦è‡ªå·±çš„æ¨¡å‹ã€‚ç°å¯¹è¯•ç”¨ç”¨æˆ·çš„ä½¿ç”¨è¡Œä¸ºè¿›è¡Œé™é€Ÿï¼Œ é™åˆ¶æ¯ä¸ªç”¨æˆ·æ¯åˆ†é’Ÿæœ€å¤šå‘èµ·10æ¬¡è°ƒç”¨</p>
<ul>
<li><p><strong>æ¡ˆä¾‹è¦æ±‚</strong> </p>
<ul>
<li><p>â‘  è®¾å®šAã€Bã€Cä¸‰ä¸ªç”¨æˆ· </p>
</li>
<li><p>â‘¡ Aç”¨æˆ·é™åˆ¶10æ¬¡/åˆ†è°ƒç”¨ï¼ŒBç”¨æˆ·é™åˆ¶30æ¬¡/åˆ†è°ƒç”¨ï¼ŒCç”¨æˆ·ä¸é™åˆ¶</p>
</li>
</ul>
</li>
</ul>
<h4 id="æ¡ˆä¾‹ï¼šéœ€æ±‚åˆ†æ"><a href="#æ¡ˆä¾‹ï¼šéœ€æ±‚åˆ†æ" class="headerlink" title="æ¡ˆä¾‹ï¼šéœ€æ±‚åˆ†æ"></a><strong>æ¡ˆä¾‹ï¼šéœ€æ±‚åˆ†æ</strong></h4><ul>
<li>â‘  è®¾å®šä¸€ä¸ªæœåŠ¡æ–¹æ³•ï¼Œç”¨äºæ¨¡æ‹Ÿå®é™…ä¸šåŠ¡è°ƒç”¨çš„æœåŠ¡ï¼Œå†…éƒ¨é‡‡ç”¨æ‰“å°æ¨¡æ‹Ÿè°ƒç”¨ </li>
<li>â‘¡ åœ¨ä¸šåŠ¡è°ƒç”¨å‰æœåŠ¡è°ƒç”¨æ§åˆ¶å•å…ƒï¼Œå†…éƒ¨ä½¿ç”¨redisè¿›è¡Œæ§åˆ¶ï¼Œå‚ç…§ä¹‹å‰çš„æ–¹æ¡ˆ </li>
<li>â‘¢ å¯¹è°ƒç”¨è¶…é™ä½¿ç”¨å¼‚å¸¸è¿›è¡Œæ§åˆ¶ï¼Œå¼‚å¸¸å¤„ç†è®¾å®šä¸ºæ‰“å°æç¤ºä¿¡æ¯ </li>
<li>â‘£ ä¸»ç¨‹åºå¯åŠ¨3ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«è¡¨ç¤º3ç§ä¸åŒç”¨æˆ·çš„è°ƒç”¨</li>
</ul>
<h4 id="æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤"><a href="#æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤" class="headerlink" title="æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤"></a><strong>æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤</strong></h4><ol>
<li><strong>è®¾å®šä¸šåŠ¡æ–¹æ³•</strong></li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span><span class="token keyword">long</span> num<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·"</span><span class="token operator">+</span>id<span class="token operator">+</span><span class="token string">"å‘èµ·ä¸šåŠ¡è°ƒç”¨ï¼Œå½“å‰ç¬¬"</span><span class="token operator">+</span>num<span class="token operator">+</span><span class="token string">"æ¬¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<ol start="2">
<li><strong>è®¾å®šå¤šçº¿ç±»ï¼Œæ¨¡æ‹Ÿç”¨æˆ·è°ƒç”¨</strong></li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     	jd<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token comment">//æ¨¡æ‹Ÿè°ƒç”¨é—´éš”ï¼Œè®¾å®šä¸º1.xç§’</span>
         <span class="token keyword">try</span><span class="token punctuation">&#123;</span>
             <span class="token class-name">Random</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token operator">+</span> r<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
         <span class="token punctuation">&#125;</span>
     <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<ol start="3">
<li><strong>è®¾è®¡redisæ§åˆ¶æ–¹æ¡ˆ</strong></li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">String</span> value <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"compid:"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//åˆ¤å®šæ˜¯å¦å…·æœ‰è°ƒç”¨è®¡æ•°æ§åˆ¶ï¼Œåˆ©ç”¨å¼‚å¸¸è¿›è¡Œæ§åˆ¶å¤„ç†</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
         <span class="token comment">//æ²¡æœ‰æ§åˆ¶ï¼Œåˆ›å»ºæ§åˆ¶è®¡æ•°å™¨</span>
         jedis<span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span><span class="token string">"compid:"</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
         <span class="token comment">//æœ‰æ§åˆ¶ï¼Œè‡ªå¢ï¼Œå¹¶è°ƒç”¨ä¸šåŠ¡</span>
         <span class="token keyword">try</span><span class="token punctuation">&#123;</span>
         	<span class="token class-name">Long</span> val <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token string">"compid:"</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
         	<span class="token function">business</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token number">10</span><span class="token operator">+</span>val<span class="token operator">-</span><span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JedisDataException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
         <span class="token comment">//è°ƒç”¨æ¬¡æ•°æº¢å‡ºï¼Œå¼¹å‡ºæç¤º</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·ï¼š"</span><span class="token operator">+</span>id<span class="token operator">+</span><span class="token string">"ä½¿ç”¨æ¬¡æ•°å·²è¾¾åˆ°ä¸Šé™ï¼Œè¯·ç¨åå†è¯•ï¼Œæˆ–å‡çº§VIPä¼šå‘˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>
     	jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">&#125;</span>
     <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<ol start="4">
<li><strong>è®¾è®¡å¯åŠ¨ä¸»ç¨‹åº</strong></li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     <span class="token class-name">MyThread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">"åˆçº§ç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>åç»­1ï¼šå¯¹ä¸šåŠ¡æ§åˆ¶æ–¹æ¡ˆè¿›è¡Œæ”¹é€ ï¼Œè®¾å®šä¸åŒç”¨æˆ·ç­‰çº§çš„åˆ¤å®š </p>
<p>åç»­2ï¼šå°†ä¸åŒç”¨æˆ·ç­‰çº§å¯¹åº”çš„ä¿¡æ¯ã€é™åˆ¶æ¬¡æ•°ç­‰è®¾å®šåˆ°redisä¸­ï¼Œä½¿ç”¨hashä¿å­˜</p>
<h2 id="åŸºäºè¿æ¥æ± è·å–è¿æ¥"><a href="#åŸºäºè¿æ¥æ± è·å–è¿æ¥" class="headerlink" title="åŸºäºè¿æ¥æ± è·å–è¿æ¥"></a>åŸºäºè¿æ¥æ± è·å–è¿æ¥</h2><p>JedisPoolï¼šJedisæä¾›çš„è¿æ¥æ± æŠ€æœ¯ </p>
<ul>
<li><code>poolConfig</code>:è¿æ¥æ± é…ç½®å¯¹è±¡ </li>
<li><code>host</code>:redisæœåŠ¡åœ°å€ </li>
<li><code>port</code>:redisæœåŠ¡ç«¯å£å·</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span><span class="token class-name">GenericObjectPoolConfig</span> poolConfig<span class="token punctuation">,</span> <span class="token class-name">String</span> host<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
 <span class="token keyword">this</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">,</span> host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="å°è£…è¿æ¥å‚æ•°"><a href="#å°è£…è¿æ¥å‚æ•°" class="headerlink" title="å°è£…è¿æ¥å‚æ•°"></a>å°è£…è¿æ¥å‚æ•°</h3><ul>
<li><strong>jedis.properties</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">jedis.host</span><span class="token punctuation">=</span><span class="token value attr-value">localhost</span>
<span class="token key attr-name">jedis.port</span><span class="token punctuation">=</span><span class="token value attr-value">6379</span>
<span class="token key attr-name">jedis.maxTotal</span><span class="token punctuation">=</span><span class="token value attr-value">30</span>
<span class="token key attr-name">jedis.maxIdle</span><span class="token punctuation">=</span><span class="token value attr-value">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="åŠ è½½é…ç½®ä¿¡æ¯"><a href="#åŠ è½½é…ç½®ä¿¡æ¯" class="headerlink" title="åŠ è½½é…ç½®ä¿¡æ¯"></a>åŠ è½½é…ç½®ä¿¡æ¯</h3><ul>
<li>é™æ€ä»£ç å—åˆå§‹åŒ–èµ„æº</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span><span class="token punctuation">&#123;</span>
 <span class="token comment">//è¯»å–é…ç½®æ–‡ä»¶ è·å¾—å‚æ•°å€¼</span>
 <span class="token class-name">ResourceBundle</span> rb <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">"jedis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 host <span class="token operator">=</span> rb<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"jedis.host"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 port <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>rb<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"jedis.port"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 maxTotal <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>rb<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"jedis.maxTotal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 maxIdle <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>rb<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"jedis.maxIdle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 poolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 poolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span>maxTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 poolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span>maxIdle<span class="token punctuation">)</span><span class="token punctuation">;</span>
 jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">,</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="è·å–è¿æ¥"><a href="#è·å–è¿æ¥" class="headerlink" title="è·å–è¿æ¥"></a>è·å–è¿æ¥</h3><ul>
<li>å¯¹å¤–è®¿é—®æ¥å£ï¼Œæä¾›<code>jedis</code>è¿æ¥å¯¹è±¡ï¼Œè¿æ¥ä»è¿æ¥æ± è·å–</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jedis</span> <span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> jedis<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="å¯è§†åŒ–å®¢æˆ·ç«¯"><a href="#å¯è§†åŒ–å®¢æˆ·ç«¯" class="headerlink" title="å¯è§†åŒ–å®¢æˆ·ç«¯"></a>å¯è§†åŒ–å®¢æˆ·ç«¯</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010115536757.png" srcset="/img/loading.gif" lazyload alt="image-20221010115536757"></p>
<h1 id="Redis-å®‰è£…"><a href="#Redis-å®‰è£…" class="headerlink" title="Redis å®‰è£…"></a>Redis å®‰è£…</h1><h2 id="åŸºäºLinuxç¯å¢ƒå®‰è£…Redis"><a href="#åŸºäºLinuxç¯å¢ƒå®‰è£…Redis" class="headerlink" title="åŸºäºLinuxç¯å¢ƒå®‰è£…Redis"></a>åŸºäºLinuxç¯å¢ƒå®‰è£…Redis</h2><ul>
<li><h3 id="ä¸‹è½½å®‰è£…åŒ…"><a href="#ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å®‰è£…åŒ…"></a><strong>ä¸‹è½½å®‰è£…åŒ…</strong></h3></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> http://download.redis.io/releases/redis-?.?.?.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010120957375.png" srcset="/img/loading.gif" lazyload alt="image-20221010120957375"></p>
<ul>
<li><strong>è§£å‹</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> â€“xvf æ–‡ä»¶å.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010121604452.png" srcset="/img/loading.gif" lazyload alt="image-20221010121604452"></p>
<ul>
<li><strong>ç¼–è¯‘</strong> </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010122116412.png" srcset="/img/loading.gif" lazyload alt="image-20221010122116412"></p>
<ul>
<li><strong>å®‰è£…</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token function">install</span> <span class="token punctuation">[</span>destdir<span class="token operator">=</span>/ç›®å½•<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010122310424.png" srcset="/img/loading.gif" lazyload alt="image-20221010122310424"></p>
<h2 id="æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡"><a href="#æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡" class="headerlink" title="æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡"></a>æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡</h2><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-server â€“-port <span class="token number">6380</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010123927631.png" srcset="/img/loading.gif" lazyload alt="image-20221010123927631"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010124244936.png" srcset="/img/loading.gif" lazyload alt="image-20221010124244936"></p>
<h2 id="æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨"><a href="#æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨" class="headerlink" title="æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨"></a>æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨</h2><p><strong>åˆ é™¤é…ç½®æ–‡ä»¶ æ³¨é‡Šä¿¡æ¯å’Œæ— ç”¨ç©ºç™½å¹¶ä¿å­˜è‡³æ–°çš„é…ç½®æ–‡ä»¶<code>redis-6379</code>æ–‡ä»¶ä¸­</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> redis.conf <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">"#"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">"^$"</span> <span class="token operator">></span> redis-6379.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010125149349.png" srcset="/img/loading.gif" lazyload alt="image-20221010125149349"></p>
<p><strong>æ–°å»ºæ—¥å¿—ä¿å­˜ä½ç½®ï¼Œå¹¶è·å–è·¯å¾„</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130449881.png" srcset="/img/loading.gif" lazyload alt="image-20221010130449881"></p>
<p><strong>ä¿®æ”¹é…ç½®<code>redis-6379</code>æ–‡ä»¶ä¿å­˜å¿…è¦é…ç½®</strong></p>
<p><strong>åŸºæœ¬é…ç½®</strong> </p>
<ul>
<li>daemonize yes <ul>
<li>ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ï¼Œä½¿ç”¨æœ¬å¯åŠ¨æ–¹å¼ï¼Œrediså°†ä»¥æœåŠ¡çš„å½¢å¼å­˜åœ¨ï¼Œæ—¥å¿—å°†ä¸å†æ‰“å°åˆ°å‘½ä»¤çª—å£ä¸­ </li>
</ul>
</li>
<li>port 6<ul>
<li>è®¾å®šå½“å‰æœåŠ¡å¯åŠ¨ç«¯å£å·</li>
</ul>
</li>
<li>dir â€œ/è‡ªå®šä¹‰ç›®å½•/redis/dataâ€œ <ul>
<li>è®¾å®šå½“å‰æœåŠ¡æ–‡ä»¶ä¿å­˜ä½ç½®ï¼ŒåŒ…å«æ—¥å¿—æ–‡ä»¶ã€æŒä¹…åŒ–æ–‡ä»¶ï¼ˆåé¢è¯¦ç»†è®²è§£ï¼‰ç­‰</li>
</ul>
</li>
<li>logfile 6***.log<ul>
<li>è®¾å®šæ—¥å¿—æ–‡ä»¶åï¼Œä¾¿äºæŸ¥é˜…</li>
</ul>
</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130013766.png" srcset="/img/loading.gif" lazyload alt="image-20221010130013766"></p>
<p><strong>æŒ‡å®šé…ç½®æ–‡ä»¶<code>redis-6379.conf</code>å¯åŠ¨</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-server redis-6379.conf <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130712193.png" srcset="/img/loading.gif" lazyload alt="image-20221010130712193"></p>
<p><strong>æŸ¥çœ‹redisæ˜¯å¦å¯åŠ¨å®Œæˆ</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> redis-<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010130827016.png" srcset="/img/loading.gif" lazyload alt="image-20221010130827016"></p>
<h2 id="é…ç½®æ–‡ä»¶å¯åŠ¨ç›®å½•ç®¡ç†"><a href="#é…ç½®æ–‡ä»¶å¯åŠ¨ç›®å½•ç®¡ç†" class="headerlink" title="é…ç½®æ–‡ä»¶å¯åŠ¨ç›®å½•ç®¡ç†"></a>é…ç½®æ–‡ä»¶å¯åŠ¨ç›®å½•ç®¡ç†</h2><p><strong>åˆ›å»ºé…ç½®ç›®å½•ï¼Œå¹¶å°†é…ç½®æ–‡ä»¶æ”¾å…¥ç›®å½•å†…</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">[root@hecs-33111 redis-7.0.5]# mkdir conf
[root@hecs-33111 redis-7.0.5]# mv redis-6379.conf conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><strong>ä»¥æŒ‡å®šç›®å½•ä¸‹çš„é…ç½®åŠæ–‡ä»¶å¯åŠ¨redis</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 redis-7.0.5<span class="token punctuation">]</span><span class="token comment"># redis-server conf/redis-6379.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>åŒæ—¶å¯åŠ¨ä¸¤ä¸ªä¸åŒç«¯å£çš„redis</strong></p>
<ul>
<li><strong>å¤åˆ¶é…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">cp redis-6379.conf redis-6380.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010164820275.png" srcset="/img/loading.gif" lazyload alt="image-20221010164820275"></p>
<ul>
<li><strong>åŒæ—¶å¯åŠ¨ä¸¤ä¸ªæœåŠ¡</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 redis-7.0.5<span class="token punctuation">]</span><span class="token comment"># redis-server conf/redis-6380.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 redis-7.0.5<span class="token punctuation">]</span><span class="token comment"># redis-server conf/redis-6379.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010165103534.png" srcset="/img/loading.gif" lazyload alt="image-20221010165103534"></p>
<h1 id="Redis-æŒä¹…åŒ–"><a href="#Redis-æŒä¹…åŒ–" class="headerlink" title="Redis æŒä¹…åŒ–"></a>Redis æŒä¹…åŒ–</h1><h2 id="æŒä¹…åŒ–ç®€ä»‹"><a href="#æŒä¹…åŒ–ç®€ä»‹" class="headerlink" title="æŒä¹…åŒ–ç®€ä»‹"></a>æŒä¹…åŒ–ç®€ä»‹</h2><p><strong>æ„å¤–çš„æ–­ç”µ</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170628637.png" srcset="/img/loading.gif" lazyload alt="image-20221010170628637"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170643138.png" srcset="/img/loading.gif" lazyload alt="image-20221010170643138"></p>
<p><strong>ä»€ä¹ˆæ˜¯æŒä¹…åŒ–</strong></p>
<p>åˆ©ç”¨æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨å°†æ•°æ®è¿›è¡Œä¿å­˜ï¼Œåœ¨ç‰¹å®šçš„æ—¶é—´å°†ä¿å­˜çš„æ•°æ®è¿›è¡Œæ¢å¤çš„å·¥ä½œæœºåˆ¶ç§°ä¸ºæŒä¹…åŒ–ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿›è¡ŒæŒä¹…åŒ–</strong></p>
<p>é˜²æ­¢æ•°æ®çš„æ„å¤–ä¸¢å¤±ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ€§</p>
<p><strong>æŒä¹…åŒ–è¿‡ç¨‹ä¿å­˜ä»€ä¹ˆ</strong></p>
<ul>
<li>å°†å½“å‰æ•°æ®çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œå¿«ç…§å½¢å¼ï¼Œå­˜å‚¨æ•°æ®ç»“æœï¼Œå­˜å‚¨æ ¼å¼ç®€å•ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ® </li>
<li>å°†æ•°æ®çš„æ“ä½œè¿‡ç¨‹è¿›è¡Œä¿å­˜ï¼Œæ—¥å¿—å½¢å¼ï¼Œå­˜å‚¨æ“ä½œè¿‡ç¨‹ï¼Œå­˜å‚¨æ ¼å¼å¤æ‚ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ®çš„æ“ä½œè¿‡ç¨‹</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010170926880.png" srcset="/img/loading.gif" lazyload alt="image-20221010170926880"></p>
<h2 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h2><h3 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤</h3><p><strong>å‘½ä»¤</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>ä½œç”¨ æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ä¿å­˜æ“ä½œ</p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token namespace">[root@hecs-33111 redis-7.0.5]</span><span class="token comment"># redis-cli -p 6379</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> save
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010171723018.png" srcset="/img/loading.gif" lazyload alt="image-20221010171723018"></p>
<ul>
<li><strong>æ·»åŠ æ•°æ®è§‚å¯Ÿrdbæ–‡ä»¶å˜åŒ–</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name weishao
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> save
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010172032344.png" srcset="/img/loading.gif" lazyload alt="image-20221010172032344"></p>
<h4 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤ç›¸å…³é…ç½®"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤ç›¸å…³é…ç½®" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤ç›¸å…³é…ç½®"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤ç›¸å…³é…ç½®</h4><ul>
<li><strong>dbfilename dump.rdb</strong> <ul>
<li>è¯´æ˜ï¼šè®¾ç½®æœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸º dump.rdb </li>
<li>ç»éªŒï¼šé€šå¸¸è®¾ç½®ä¸º<code>dump-ç«¯å£å·.rdb </code></li>
</ul>
</li>
<li><strong>dir</strong> <ul>
<li>è¯´æ˜ï¼šè®¾ç½®å­˜å‚¨.rdbæ–‡ä»¶çš„è·¯å¾„ </li>
<li>ç»éªŒï¼šé€šå¸¸è®¾ç½®æˆå­˜å‚¨ç©ºé—´è¾ƒå¤§çš„ç›®å½•ä¸­ï¼Œç›®å½•åç§°<code>data </code></li>
</ul>
</li>
<li><strong>rdbcompression yes</strong> <ul>
<li>è¯´æ˜ï¼šè®¾ç½®å­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸º<code> yes</code>ï¼Œé‡‡ç”¨ <code>LZF</code> å‹ç¼© </li>
<li>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®ä¸ºnoï¼Œå¯ä»¥èŠ‚çœ CPU è¿è¡Œæ—¶é—´ï¼Œä½†ä¼šä½¿å­˜å‚¨çš„æ–‡ä»¶å˜å¤§ï¼ˆå·¨å¤§ï¼‰</li>
</ul>
</li>
<li><strong>rdbchecksum yes</strong> <ul>
<li>è¯´æ˜ï¼šè®¾ç½®æ˜¯å¦è¿›è¡Œ<code>RDB</code>æ–‡ä»¶æ ¼å¼æ ¡éªŒï¼Œè¯¥æ ¡éªŒè¿‡ç¨‹åœ¨å†™æ–‡ä»¶å’Œè¯»æ–‡ä»¶è¿‡ç¨‹å‡è¿›è¡Œ </li>
<li>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®ä¸º<code>no</code>ï¼Œå¯ä»¥èŠ‚çº¦è¯»å†™æ€§è¿‡ç¨‹çº¦<code>10%</code>æ—¶é—´æ¶ˆè€—ï¼Œä½†æ˜¯å­˜å‚¨ä¸€å®šçš„æ•°æ®æŸåé£é™©</li>
</ul>
</li>
</ul>
<p><strong>æ¼”ç¤º</strong></p>
<ul>
<li><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211312492.png" srcset="/img/loading.gif" lazyload alt="image-20221010211312492"></p>
<ul>
<li><strong>æ·»åŠ æ•°æ®å¹¶save,è§‚å¯Ÿrdbæ–‡ä»¶æ˜¯å¦ç”Ÿæˆ</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name weishao
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> save
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211455930.png" srcset="/img/loading.gif" lazyload alt="image-20221010211455930"></p>
<p><strong>æ•°æ®æ¢å¤æ¼”ç¤º</strong></p>
<ul>
<li><strong>å…³é—­redisè¿›ç¨‹</strong></li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010211925344.png" srcset="/img/loading.gif" lazyload alt="image-20221010211925344"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212001633.png" srcset="/img/loading.gif" lazyload alt="image-20221010212001633"></p>
<ul>
<li><strong>å¯åŠ¨redisï¼Œè§‚å¯Ÿæ˜¯å¦æœ‰æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">[root@hecs-33111 redis-7.0.5]# redis-server conf&#x2F;redis-6379.conf <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212159279.png" srcset="/img/loading.gif" lazyload alt="image-20221010212159279"></p>
<ul>
<li><strong>å…³é—­å‰çš„æ•°æ®å­˜åœ¨ï¼ŒæŒä¹…åŒ–ç”Ÿæ•ˆ</strong></li>
</ul>
<h4 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤å·¥ä½œåŸç†"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-saveæŒ‡ä»¤å·¥ä½œåŸç†" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤å·¥ä½œåŸç†"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” saveæŒ‡ä»¤å·¥ä½œåŸç†</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010212520404.png" srcset="/img/loading.gif" lazyload alt="image-20221010212520404"></p>
<p><strong>RDBå¯åŠ¨æ–¹å¼</strong></p>
<p><strong>æ•°æ®é‡è¿‡å¤§ï¼Œå•çº¿ç¨‹æ‰§è¡Œæ–¹å¼é€ æˆæ•ˆç‡è¿‡ä½å¦‚ä½•å¤„ç†ï¼Ÿ</strong></p>
<p>åå°æ‰§è¡Œ </p>
<ul>
<li>è°ï¼šredisæ“ä½œè€…ï¼ˆç”¨æˆ·ï¼‰å‘èµ·æŒ‡ä»¤ï¼›redisæœåŠ¡å™¨æ§åˆ¶æŒ‡ä»¤æ‰§è¡Œ </li>
<li>ä»€ä¹ˆæ—¶é—´ï¼šå³æ—¶ï¼ˆå‘èµ·ï¼‰ï¼›åˆç†çš„æ—¶é—´ï¼ˆæ‰§è¡Œï¼‰ </li>
<li>å¹²ä»€ä¹ˆäº‹æƒ…ï¼šä¿å­˜æ•°æ®</li>
</ul>
<h3 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤</h3><ul>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bgsave<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>ä½œç”¨ </li>
</ul>
<p>â€‹    æ‰‹åŠ¨å¯åŠ¨åå°ä¿å­˜æ“ä½œï¼Œä½†ä¸æ˜¯ç«‹å³æ‰§è¡Œ</p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> age <span class="token number">25</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get age
<span class="token string">"25"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> bgsave
Background saving started<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010215027206.png" srcset="/img/loading.gif" lazyload alt="image-20221010215027206"></p>
<h4 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤å·¥ä½œåŸç†"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤å·¥ä½œåŸç†" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤å·¥ä½œåŸç†"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤å·¥ä½œåŸç†</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221010215129772.png" srcset="/img/loading.gif" lazyload alt="image-20221010215129772"></p>
<h4 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤ç›¸å…³é…ç½®"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”-bgsaveæŒ‡ä»¤ç›¸å…³é…ç½®" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤ç›¸å…³é…ç½®"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€” bgsaveæŒ‡ä»¤ç›¸å…³é…ç½®</h4><ul>
<li><p> dbfilename dump.rdb </p>
</li>
<li><p> dir </p>
</li>
<li><p> rdbcompression yes </p>
</li>
<li><p> rdbchecksum yes </p>
</li>
<li><p><strong>stop-writes-on-bgsave-error yes</strong> </p>
<ul>
<li><p>è¯´æ˜ï¼šåå°å­˜å‚¨è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°é”™è¯¯ç°è±¡ï¼Œæ˜¯å¦åœæ­¢ä¿å­˜æ“ä½œ </p>
</li>
<li><p>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€</p>
</li>
</ul>
</li>
</ul>
<p><strong>RDBå¯åŠ¨æ–¹å¼</strong></p>
<p>åå¤æ‰§è¡Œä¿å­˜æŒ‡ä»¤ï¼Œå¿˜è®°äº†æ€ä¹ˆåŠï¼Ÿä¸çŸ¥é“æ•°æ®äº§ç”Ÿäº†å¤šå°‘å˜åŒ–ï¼Œä½•æ—¶ä¿å­˜ï¼Ÿ</p>
<p><strong>è‡ªåŠ¨æ‰§è¡Œ</strong></p>
<ul>
<li> è°ï¼šredisæœåŠ¡å™¨å‘èµ·æŒ‡ä»¤ï¼ˆåŸºäºæ¡ä»¶ï¼‰ </li>
<li> ä»€ä¹ˆæ—¶é—´ï¼šæ»¡è¶³æ¡ä»¶ </li>
<li> å¹²ä»€ä¹ˆäº‹æƒ…ï¼šä¿å­˜æ•°æ®</li>
</ul>
<h3 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”saveé…ç½®"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”saveé…ç½®" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€”saveé…ç½®"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€”saveé…ç½®</h3><ul>
<li><strong>é…ç½®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">save second changes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>ä½œç”¨</strong></li>
</ul>
<p>æ»¡è¶³é™å®šæ—¶é—´èŒƒå›´å†…<code>key</code>çš„å˜åŒ–æ•°é‡è¾¾åˆ°æŒ‡å®šæ•°é‡å³è¿›è¡ŒæŒä¹…åŒ–</p>
<ul>
<li><p><strong>å‚æ•°</strong></p>
<ul>
<li><p>secondï¼šç›‘æ§æ—¶é—´èŒƒå›´ </p>
</li>
<li><p>changesï¼šç›‘æ§keyçš„å˜åŒ–é‡</p>
</li>
</ul>
</li>
<li><p><strong>ä½ç½®</strong></p>
<ul>
<li>åœ¨confæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</li>
</ul>
</li>
<li><p><strong>èŒƒä¾‹</strong></p>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">save <span class="token number">900</span> <span class="token number">1</span>
save <span class="token number">300</span> <span class="token number">10</span>
save <span class="token number">60</span> <span class="token number">10000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡æ–°ä»¥é…ç½®æ–‡ä»¶å¯åŠ¨</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011141609019.png" srcset="/img/loading.gif" lazyload alt="image-20221011141609019"></p>
<p>æ·»åŠ æ•°æ®è§‚å¯Ÿ<code>rdb</code>æ–‡ä»¶å˜åŒ–</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142127323.png" srcset="/img/loading.gif" lazyload alt="image-20221011142127323"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142306626.png" srcset="/img/loading.gif" lazyload alt="image-20221011142306626"></p>
<h4 id="RDBå¯åŠ¨æ–¹å¼-â€”â€”saveé…ç½®åŸç†"><a href="#RDBå¯åŠ¨æ–¹å¼-â€”â€”saveé…ç½®åŸç†" class="headerlink" title="RDBå¯åŠ¨æ–¹å¼ â€”â€”saveé…ç½®åŸç†"></a>RDBå¯åŠ¨æ–¹å¼ â€”â€”saveé…ç½®åŸç†</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142546510.png" srcset="/img/loading.gif" lazyload alt="image-20221011142546510"></p>
<h3 id="RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”"><a href="#RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”" class="headerlink" title="RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”"></a>RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011142827574.png" srcset="/img/loading.gif" lazyload alt="image-20221011142827574"></p>
<h3 id="RDBç‰¹æ®Šå¯åŠ¨å½¢å¼"><a href="#RDBç‰¹æ®Šå¯åŠ¨å½¢å¼" class="headerlink" title="RDBç‰¹æ®Šå¯åŠ¨å½¢å¼"></a>RDBç‰¹æ®Šå¯åŠ¨å½¢å¼</h3><ul>
<li><strong>å…¨é‡å¤åˆ¶</strong></li>
</ul>
<p>â€‹        åœ¨ä¸»ä»å¤åˆ¶ä¸­è¯¦ç»†è®²è§£</p>
<ul>
<li><strong>æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­é‡å¯</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">debug reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>å…³é—­æœåŠ¡å™¨æ—¶æŒ‡å®šä¿å­˜æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">shutdown</span> save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>é»˜è®¤æƒ…å†µä¸‹æ‰§è¡Œ<code>shutdown</code>å‘½ä»¤æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ <code>bgsave</code>(å¦‚æœæ²¡æœ‰å¼€å¯<code>AOF</code>æŒä¹…åŒ–åŠŸèƒ½)</p>
<h3 id="RDBä¼˜ç‚¹ä¸ç¼ºç‚¹"><a href="#RDBä¼˜ç‚¹ä¸ç¼ºç‚¹" class="headerlink" title="RDBä¼˜ç‚¹ä¸ç¼ºç‚¹"></a>RDBä¼˜ç‚¹ä¸ç¼ºç‚¹</h3><h4 id="RDBä¼˜ç‚¹"><a href="#RDBä¼˜ç‚¹" class="headerlink" title="RDBä¼˜ç‚¹"></a>RDBä¼˜ç‚¹</h4><ul>
<li><code>RDB</code>æ˜¯ä¸€ä¸ªç´§å‡‘å‹ç¼©çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå­˜å‚¨æ•ˆç‡è¾ƒé«˜ </li>
<li> <code>RDB</code>å†…éƒ¨å­˜å‚¨çš„æ˜¯<code>redis</code>åœ¨æŸä¸ª<code>æ—¶é—´ç‚¹</code>çš„æ•°æ®å¿«ç…§ï¼Œéå¸¸é€‚åˆç”¨äºæ•°æ®å¤‡ä»½ï¼Œå…¨é‡å¤åˆ¶ç­‰åœºæ™¯ </li>
<li> <code>RDB</code>æ¢å¤æ•°æ®çš„é€Ÿåº¦è¦æ¯”<code>AOF</code>å¿«å¾ˆå¤š</li>
<li> åº”ç”¨ï¼šæœåŠ¡å™¨ä¸­æ¯<code>X</code>å°æ—¶æ‰§è¡Œ<code>bgsave</code>å¤‡ä»½ï¼Œå¹¶å°†<code>RDB</code>æ–‡ä»¶æ‹·è´åˆ°è¿œç¨‹æœºå™¨ä¸­ï¼Œç”¨äºç¾éš¾æ¢å¤ã€‚</li>
</ul>
<h4 id="RDBç¼ºç‚¹"><a href="#RDBç¼ºç‚¹" class="headerlink" title="RDBç¼ºç‚¹"></a>RDBç¼ºç‚¹</h4><ul>
<li><code>RDB</code>æ–¹å¼æ— è®ºæ˜¯æ‰§è¡ŒæŒ‡ä»¤è¿˜æ˜¯åˆ©ç”¨é…ç½®ï¼Œæ— æ³•åšåˆ°å®æ—¶æŒä¹…åŒ–ï¼Œå…·æœ‰è¾ƒå¤§çš„å¯èƒ½æ€§ä¸¢å¤±æ•°æ® </li>
<li><code>bgsave</code>æŒ‡ä»¤æ¯æ¬¡è¿è¡Œè¦æ‰§è¡Œ<code>fork</code>æ“ä½œåˆ›å»ºå­è¿›ç¨‹ï¼Œè¦ç‰ºç‰²æ‰ä¸€äº›æ€§èƒ½ </li>
<li><code>Redis</code>çš„ä¼—å¤šç‰ˆæœ¬ä¸­æœªè¿›è¡Œ<code>RDB</code>æ–‡ä»¶æ ¼å¼çš„ç‰ˆæœ¬ç»Ÿä¸€ï¼Œæœ‰å¯èƒ½å‡ºç°å„ç‰ˆæœ¬æœåŠ¡ä¹‹é—´æ•°æ®æ ¼å¼æ— æ³•å…¼å®¹ç°è±¡</li>
</ul>
<h2 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h2><h3 id="RDBå­˜å‚¨çš„å¼Šç«¯"><a href="#RDBå­˜å‚¨çš„å¼Šç«¯" class="headerlink" title="RDBå­˜å‚¨çš„å¼Šç«¯"></a>RDBå­˜å‚¨çš„å¼Šç«¯</h3><ul>
<li> å­˜å‚¨æ•°æ®é‡è¾ƒå¤§ï¼Œæ•ˆç‡è¾ƒä½ åŸºäºå¿«ç…§æ€æƒ³ï¼Œæ¯æ¬¡è¯»å†™éƒ½æ˜¯å…¨éƒ¨æ•°æ®ï¼Œå½“æ•°æ®é‡å·¨å¤§æ—¶ï¼Œæ•ˆç‡éå¸¸ä½ </li>
<li> å¤§æ•°æ®é‡ä¸‹çš„<code>IO</code>æ€§èƒ½è¾ƒä½ </li>
<li> åŸºäº<code>fork</code>åˆ›å»ºå­è¿›ç¨‹ï¼Œå†…å­˜äº§ç”Ÿé¢å¤–æ¶ˆè€— </li>
<li> å®•æœºå¸¦æ¥çš„æ•°æ®ä¸¢å¤±é£é™©</li>
</ul>
<h4 id="è§£å†³æ€è·¯-1"><a href="#è§£å†³æ€è·¯-1" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h4><ul>
<li> ä¸å†™å…¨æ•°æ®ï¼Œä»…è®°å½•éƒ¨åˆ†æ•°æ® </li>
<li> é™ä½åŒºåˆ†æ•°æ®æ˜¯å¦æ”¹å˜çš„éš¾åº¦ï¼Œæ”¹è®°å½•æ•°æ®ä¸ºè®°å½•æ“ä½œè¿‡ç¨‹ </li>
<li> å¯¹æ‰€æœ‰æ“ä½œå‡è¿›è¡Œè®°å½•ï¼Œæ’é™¤ä¸¢å¤±æ•°æ®çš„é£é™©</li>
</ul>
<h3 id="AOFæ¦‚å¿µ"><a href="#AOFæ¦‚å¿µ" class="headerlink" title="AOFæ¦‚å¿µ"></a>AOFæ¦‚å¿µ</h3><ul>
<li> <code>AOF</code>(append only file)æŒä¹…åŒ–ï¼šä»¥ç‹¬ç«‹æ—¥å¿—çš„æ–¹å¼è®°å½•æ¯æ¬¡å†™å‘½ä»¤ï¼Œé‡å¯æ—¶å†é‡æ–°æ‰§è¡Œ<code>AOF</code>æ–‡ä»¶ä¸­å‘½ä»¤ è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚ä¸<code>RDB</code>ç›¸æ¯”å¯ä»¥ç®€å•æè¿°ä¸ºæ”¹è®°å½•æ•°æ®ä¸ºè®°å½•æ•°æ®äº§ç”Ÿçš„è¿‡ç¨‹ </li>
<li> <code>AOF</code>çš„ä¸»è¦ä½œç”¨æ˜¯è§£å†³äº†æ•°æ®æŒä¹…åŒ–çš„å®æ—¶æ€§ï¼Œç›®å‰å·²ç»æ˜¯<code>Redis</code>æŒä¹…åŒ–çš„ä¸»æµæ–¹å¼</li>
</ul>
<h3 id="AOFå†™æ•°æ®è¿‡ç¨‹"><a href="#AOFå†™æ•°æ®è¿‡ç¨‹" class="headerlink" title="AOFå†™æ•°æ®è¿‡ç¨‹"></a>AOFå†™æ•°æ®è¿‡ç¨‹</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011152156869.png" srcset="/img/loading.gif" lazyload alt="image-20221011152156869"></p>
<h3 id="AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥-appendfsync"><a href="#AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥-appendfsync" class="headerlink" title="AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥(appendfsync)"></a>AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥(appendfsync)</h3><p> <strong>always(æ¯æ¬¡ï¼‰</strong> </p>
<p>â€‹    æ¯æ¬¡å†™å…¥æ“ä½œå‡åŒæ­¥åˆ°<code>AOF</code>æ–‡ä»¶ä¸­ï¼Œ<code>æ•°æ®é›¶è¯¯å·®ï¼Œæ€§èƒ½è¾ƒä½ </code></p>
<p> <strong>everysecï¼ˆæ¯ç§’ï¼‰</strong> </p>
<p>â€‹    æ¯ç§’å°†ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤åŒæ­¥åˆ°<code>AOF</code>æ–‡ä»¶ä¸­ï¼Œæ•°æ®<code>å‡†ç¡®æ€§è¾ƒé«˜ï¼Œæ€§èƒ½è¾ƒé«˜ </code></p>
<p>â€‹    åœ¨ç³»ç»Ÿçªç„¶å®•æœºçš„æƒ…å†µä¸‹ä¸¢å¤±<code>1</code>ç§’å†…çš„æ•°æ® </p>
<p> <strong>noï¼ˆç³»ç»Ÿæ§åˆ¶ï¼‰</strong> </p>
<p>â€‹    ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶æ¯æ¬¡åŒæ­¥åˆ°<code>AOF</code>æ–‡ä»¶çš„å‘¨æœŸï¼Œæ•´ä½“è¿‡ç¨‹<code>ä¸å¯æ§</code></p>
<h3 id="AOFç›¸å…³é…ç½®"><a href="#AOFç›¸å…³é…ç½®" class="headerlink" title="AOFç›¸å…³é…ç½®"></a>AOFç›¸å…³é…ç½®</h3><p><strong>é…ç½®</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">appendfilename filename<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>ä½œç”¨</strong></p>
<p><code>AOF</code>æŒä¹…åŒ–æ–‡ä»¶åï¼Œé»˜è®¤æ–‡ä»¶åæœª<code>appendonly.aof</code>ï¼Œå»ºè®®é…ç½®ä¸º<code>appendonly-ç«¯å£å·.aof</code></p>
<p><strong>é…ç½®</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">dir</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>ä½œç”¨</strong> </p>
<p>â€‹    <code>AOF</code>æŒä¹…åŒ–æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œä¸<code>RDB</code>æŒä¹…åŒ–æ–‡ä»¶ä¿æŒä¸€è‡´å³å¯</p>
<p><strong>æ¼”ç¤º</strong></p>
<p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å¯æœåŠ¡</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011164116974.png" srcset="/img/loading.gif" lazyload alt="image-20221011164116974"></p>
<p><strong>æ·»åŠ æ•°æ®</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> age <span class="token number">55</span>
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100201807.png" srcset="/img/loading.gif" lazyload alt="image-20221012100201807"></p>
<h3 id="AOFå†™æ•°æ®é‡åˆ°çš„é—®é¢˜"><a href="#AOFå†™æ•°æ®é‡åˆ°çš„é—®é¢˜" class="headerlink" title="AOFå†™æ•°æ®é‡åˆ°çš„é—®é¢˜"></a>AOFå†™æ•°æ®é‡åˆ°çš„é—®é¢˜</h3><p>å¦‚æœè¿ç»­æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤è¯¥å¦‚ä½•å¤„ç†</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221011165301074.png" srcset="/img/loading.gif" lazyload alt="image-20221011165301074"></p>
<h3 id="AOFé‡å†™"><a href="#AOFé‡å†™" class="headerlink" title="AOFé‡å†™"></a>AOFé‡å†™</h3><p>éšç€å‘½ä»¤ä¸æ–­å†™å…¥<code>AOF</code>ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>Redis</code>å¼•å…¥äº†<code>AOF</code>é‡å†™æœºåˆ¶å‹ç¼©æ–‡ä»¶ä½“ç§¯ã€‚<code>AOF</code>æ–‡ä»¶é‡ å†™æ˜¯å°†<code>Redis</code>è¿›ç¨‹å†…çš„æ•°æ®è½¬åŒ–ä¸ºå†™å‘½ä»¤åŒæ­¥åˆ°æ–°<code>AOF</code>æ–‡ä»¶çš„è¿‡ç¨‹ã€‚ç®€å•è¯´å°±æ˜¯å°†å¯¹åŒä¸€ä¸ªæ•°æ®çš„è‹¥å¹²ä¸ªæ¡å‘½ä»¤æ‰§è¡Œç»“ æœè½¬åŒ–æˆæœ€ç»ˆç»“æœæ•°æ®å¯¹åº”çš„æŒ‡ä»¤è¿›è¡Œè®°å½•ã€‚</p>
<h4 id="AOFé‡å†™ä½œç”¨"><a href="#AOFé‡å†™ä½œç”¨" class="headerlink" title="AOFé‡å†™ä½œç”¨"></a>AOFé‡å†™ä½œç”¨</h4><ul>
<li>é™ä½ç£ç›˜å ç”¨é‡ï¼Œæé«˜ç£ç›˜åˆ©ç”¨ç‡ </li>
<li>æé«˜æŒä¹…åŒ–æ•ˆç‡ï¼Œé™ä½æŒä¹…åŒ–å†™æ—¶é—´ï¼Œæé«˜IOæ€§èƒ½ </li>
<li>é™ä½æ•°æ®æ¢å¤ç”¨æ—¶ï¼Œæé«˜æ•°æ®æ¢å¤æ•ˆ</li>
</ul>
<h4 id="AOFé‡å†™è§„åˆ™"><a href="#AOFé‡å†™è§„åˆ™" class="headerlink" title="AOFé‡å†™è§„åˆ™"></a>AOFé‡å†™è§„åˆ™</h4><ul>
<li>è¿›ç¨‹å†…å·²è¶…æ—¶çš„æ•°æ®ä¸å†å†™å…¥æ–‡ä»¶ </li>
<li>å¿½ç•¥æ— æ•ˆæŒ‡ä»¤ï¼Œé‡å†™æ—¶ä½¿ç”¨è¿›ç¨‹å†…æ•°æ®ç›´æ¥ç”Ÿæˆï¼Œè¿™æ ·æ–°çš„AOFæ–‡ä»¶åªä¿ç•™æœ€ç»ˆæ•°æ®çš„å†™å…¥å‘½ä»¤ å¦‚<code>del key1ã€ hdel key2ã€srem key3ã€set key4 111ã€set key4 222</code>ç­‰ </li>
<li>å¯¹åŒä¸€æ•°æ®çš„å¤šæ¡å†™å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤ å¦‚<code>lpush list1 aã€lpush list1 bã€ lpush list1 c</code> å¯ä»¥è½¬åŒ–ä¸ºï¼š<code>lpush list1 a b c</code>ã€‚ ä¸ºé˜²æ­¢æ•°æ®é‡è¿‡å¤§é€ æˆå®¢æˆ·ç«¯ç¼“å†²åŒºæº¢å‡ºï¼Œå¯¹<code>listã€setã€hashã€zset</code>ç­‰ç±»å‹ï¼Œæ¯æ¡æŒ‡ä»¤æœ€å¤šå†™å…¥<code>64</code>ä¸ªå…ƒç´ </li>
</ul>
<h4 id="é‡å†™æ–¹å¼"><a href="#é‡å†™æ–¹å¼" class="headerlink" title="é‡å†™æ–¹å¼"></a>é‡å†™æ–¹å¼</h4><ul>
<li>æ‰‹åŠ¨é‡å†™</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bgrewriteaof<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li> è‡ªåŠ¨é‡å†™</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">auto-aof-rewrite-min-size size
auto-aof-rewrite-percentage percentage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<h4 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h4><ul>
<li>æ·»åŠ æ•°æ®ï¼Œè§‚å¯Ÿaofæ–‡ä»¶å˜åŒ–</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name <span class="token number">111</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name <span class="token number">222</span>
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100448914.png" srcset="/img/loading.gif" lazyload alt="image-20221012100448914"></p>
<ul>
<li>æ‰‹åŠ¨é‡å†™</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BGREWRITEAOF
Background append only file rewriting started<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012100544751.png" srcset="/img/loading.gif" lazyload alt="image-20221012100544751"></p>
<h4 id="AOFæ‰‹åŠ¨é‡å†™-â€”â€”-bgrewriteaofæŒ‡ä»¤å·¥ä½œåŸç†"><a href="#AOFæ‰‹åŠ¨é‡å†™-â€”â€”-bgrewriteaofæŒ‡ä»¤å·¥ä½œåŸç†" class="headerlink" title="AOFæ‰‹åŠ¨é‡å†™ â€”â€” bgrewriteaofæŒ‡ä»¤å·¥ä½œåŸç†"></a>AOFæ‰‹åŠ¨é‡å†™ â€”â€” bgrewriteaofæŒ‡ä»¤å·¥ä½œåŸç†</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012102219574.png" srcset="/img/loading.gif" lazyload alt="image-20221012102219574"></p>
<h4 id="AOFè‡ªåŠ¨é‡å†™æ–¹å¼"><a href="#AOFè‡ªåŠ¨é‡å†™æ–¹å¼" class="headerlink" title="AOFè‡ªåŠ¨é‡å†™æ–¹å¼"></a>AOFè‡ªåŠ¨é‡å†™æ–¹å¼</h4><ul>
<li>è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶è®¾ç½®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">auto-aof-rewrite-min-size size
auto-aof-rewrite-percentage percent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>è‡ªåŠ¨é‡å†™è§¦å‘æ¯”å¯¹å‚æ•°ï¼ˆ è¿è¡ŒæŒ‡ä»¤info Persistenceè·å–å…·ä½“ä¿¡æ¯ ï¼‰</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">aof_current_size
aof_base_size<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li>è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012102721225.png" srcset="/img/loading.gif" lazyload alt="image-20221012102721225"></p>
<h3 id="AOFå·¥ä½œæµç¨‹"><a href="#AOFå·¥ä½œæµç¨‹" class="headerlink" title="AOFå·¥ä½œæµç¨‹"></a>AOFå·¥ä½œæµç¨‹</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155613605.png" srcset="/img/loading.gif" lazyload alt="image-20221012155613605"></p>
<h3 id="AOFé‡å†™æµç¨‹"><a href="#AOFé‡å†™æµç¨‹" class="headerlink" title="AOFé‡å†™æµç¨‹"></a>AOFé‡å†™æµç¨‹</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155656032.png" srcset="/img/loading.gif" lazyload alt="image-20221012155656032"></p>
<h2 id="RDB-VS-AOF"><a href="#RDB-VS-AOF" class="headerlink" title="RDB VS AOF"></a>RDB VS AOF</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012155840377.png" srcset="/img/loading.gif" lazyload alt="image-20221012155840377"></p>
<h2 id="RDBä¸AOFçš„é€‰æ‹©ä¹‹æƒ‘"><a href="#RDBä¸AOFçš„é€‰æ‹©ä¹‹æƒ‘" class="headerlink" title="RDBä¸AOFçš„é€‰æ‹©ä¹‹æƒ‘"></a>RDBä¸AOFçš„é€‰æ‹©ä¹‹æƒ‘</h2><ul>
<li><strong>å¯¹æ•°æ®éå¸¸æ•æ„Ÿï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤çš„AOFæŒä¹…åŒ–æ–¹æ¡ˆ</strong> <ul>
<li>â€‹    <code>AOF</code>æŒä¹…åŒ–ç­–ç•¥ä½¿ç”¨<code>everysecond</code>ï¼Œæ¯ç§’é’Ÿ<code>fsync</code>ä¸€æ¬¡ã€‚è¯¥ç­–ç•¥<code>redis</code>ä»å¯ä»¥ä¿æŒå¾ˆå¥½çš„å¤„ç†æ€§èƒ½ï¼Œå½“å‡º ç°é—®é¢˜æ—¶ï¼Œæœ€å¤šä¸¢å¤±<code>0-1</code>ç§’å†…çš„æ•°æ®ã€‚ </li>
<li>â€‹    æ³¨æ„ï¼šç”±äº<code>AOF</code>æ–‡ä»¶å­˜å‚¨ä½“ç§¯è¾ƒå¤§ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒæ…¢ </li>
</ul>
</li>
<li><strong>æ•°æ®å‘ˆç°é˜¶æ®µæœ‰æ•ˆæ€§ï¼Œå»ºè®®ä½¿ç”¨RDBæŒä¹…åŒ–æ–¹æ¡ˆ</strong> <ul>
<li>â€‹    æ•°æ®å¯ä»¥è‰¯å¥½çš„åšåˆ°é˜¶æ®µå†…æ— ä¸¢å¤±ï¼ˆè¯¥é˜¶æ®µæ˜¯å¼€å‘è€…æˆ–è¿ç»´äººå‘˜æ‰‹å·¥ç»´æŠ¤çš„ï¼‰ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒå¿«ï¼Œé˜¶æ®µ ç‚¹æ•°æ®æ¢å¤é€šå¸¸é‡‡ç”¨<code>RDB</code>æ–¹æ¡ˆ </li>
<li>â€‹    æ³¨æ„ï¼šåˆ©ç”¨<code>RDB</code>å®ç°ç´§å‡‘çš„æ•°æ®æŒä¹…åŒ–ä¼šä½¿<code>Redis</code>é™çš„å¾ˆä½ï¼Œæ…é‡æ€»ç»“ï¼š </li>
</ul>
</li>
<li><strong>ç»¼åˆæ¯”å¯¹</strong> <ul>
<li>â€‹    <code>RDB</code>ä¸<code>AOF</code>çš„é€‰æ‹©å®é™…ä¸Šæ˜¯åœ¨åšä¸€ç§æƒè¡¡ï¼Œæ¯ç§éƒ½æœ‰åˆ©æœ‰å¼Š </li>
<li>â€‹    å¦‚ä¸èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œå¯¹ä¸šåŠ¡æ•°æ®éå¸¸æ•æ„Ÿï¼Œé€‰ç”¨<code>AOF</code> </li>
<li>â€‹    å¦‚èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œä¸”è¿½æ±‚å¤§æ•°æ®é›†çš„æ¢å¤é€Ÿåº¦ï¼Œé€‰ç”¨<code>RDB </code></li>
<li>â€‹    ç¾éš¾æ¢å¤é€‰ç”¨<code>RDB</code> </li>
<li>â€‹    åŒä¿é™©ç­–ç•¥ï¼ŒåŒæ—¶å¼€å¯ <code>RDB</code> å’Œ<code> AOF</code>ï¼Œé‡å¯åï¼Œ<code>Redis</code>ä¼˜å…ˆä½¿ç”¨ <code>AOF</code> æ¥æ¢å¤æ•°æ®ï¼Œé™ä½ä¸¢å¤±æ•°æ®çš„é‡</li>
</ul>
</li>
</ul>
<h2 id="æŒä¹…åŒ–åº”ç”¨åœºæ™¯"><a href="#æŒä¹…åŒ–åº”ç”¨åœºæ™¯" class="headerlink" title="æŒä¹…åŒ–åº”ç”¨åœºæ™¯"></a>æŒä¹…åŒ–åº”ç”¨åœºæ™¯</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012160408015.png" srcset="/img/loading.gif" lazyload alt="image-20221012160408015"></p>
<h1 id="Redis-äº‹åŠ¡"><a href="#Redis-äº‹åŠ¡" class="headerlink" title="Redis äº‹åŠ¡"></a>Redis äº‹åŠ¡</h1><h2 id="äº‹åŠ¡ç®€ä»‹"><a href="#äº‹åŠ¡ç®€ä»‹" class="headerlink" title="äº‹åŠ¡ç®€ä»‹"></a>äº‹åŠ¡ç®€ä»‹</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161432189.png" srcset="/img/loading.gif" lazyload alt="image-20221012161432189"></p>
<p><strong>ä»€ä¹ˆæ˜¯äº‹åŠ¡</strong></p>
<p>Redisæ‰§è¡ŒæŒ‡ä»¤è¿‡ç¨‹ä¸­ï¼Œå¤šæ¡è¿ç»­æ‰§è¡Œçš„æŒ‡ä»¤è¢«å¹²æ‰°ï¼Œæ‰“æ–­ï¼Œæ’é˜Ÿ</p>
<p>redisäº‹åŠ¡å°±æ˜¯ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œå°†ä¸€ç³»åˆ—é¢„å®šä¹‰å‘½ä»¤åŒ…è£…æˆä¸€ä¸ªæ•´ä½“ï¼ˆä¸€ä¸ªé˜Ÿåˆ—ï¼‰ã€‚å½“æ‰§è¡Œæ—¶ï¼Œä¸€æ¬¡æ€§ æŒ‰ç…§æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«æ‰“æ–­æˆ–è€…å¹²æ‰°ã€‚</p>
<p>ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§çš„æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161628529.png" srcset="/img/loading.gif" lazyload alt="image-20221012161628529"></p>
<h2 id="äº‹åŠ¡åŸºæœ¬æ“ä½œ"><a href="#äº‹åŠ¡åŸºæœ¬æ“ä½œ" class="headerlink" title="äº‹åŠ¡åŸºæœ¬æ“ä½œ"></a>äº‹åŠ¡åŸºæœ¬æ“ä½œ</h2><p><strong>äº‹åŠ¡çš„è¾¹ç•Œ</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012161728903.png" srcset="/img/loading.gif" lazyload alt="image-20221012161728903"></p>
<ul>
<li><strong>å¼€å¯äº‹åŠ¡</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">multi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>ä½œç”¨</strong> </li>
</ul>
<p>â€‹        è®¾å®šäº‹åŠ¡çš„å¼€å¯ä½ç½®ï¼Œæ­¤æŒ‡ä»¤æ‰§è¡Œåï¼Œåç»­çš„æ‰€æœ‰æŒ‡ä»¤å‡åŠ å…¥åˆ°äº‹åŠ¡ä¸­</p>
<ul>
<li><strong>æ‰§è¡Œäº‹åŠ¡</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">exec</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æ³¨æ„ï¼šåŠ å…¥äº‹åŠ¡çš„å‘½ä»¤æš‚æ—¶è¿›å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶æ²¡æœ‰ç«‹å³æ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œ<code>exec</code>å‘½ä»¤æ‰å¼€å§‹æ‰§è¡Œ</strong></p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 111
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name 
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 222
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
1<span class="token punctuation">)</span> OK
2<span class="token punctuation">)</span> <span class="token string">"111"</span>
3<span class="token punctuation">)</span> OK
4<span class="token punctuation">)</span> <span class="token string">"222"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>äº‹åŠ¡å®šä¹‰è¿‡ç¨‹ä¸­å‘ç°å‡ºäº†é—®é¢˜ï¼Œæ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>å–æ¶ˆäº‹åŠ¡</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">discard<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>ä½œç”¨ </p>
<p>â€‹    ç»ˆæ­¢å½“å‰äº‹åŠ¡çš„å®šä¹‰ï¼Œå‘ç”Ÿåœ¨<code>multi</code>ä¹‹åï¼Œ<code>exec</code>ä¹‹å‰</p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 111
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> DISCARD
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR EXEC without MULTI
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="äº‹åŠ¡çš„å·¥ä½œæµç¨‹"><a href="#äº‹åŠ¡çš„å·¥ä½œæµç¨‹" class="headerlink" title="äº‹åŠ¡çš„å·¥ä½œæµç¨‹"></a>äº‹åŠ¡çš„å·¥ä½œæµç¨‹</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012165810588.png" srcset="/img/loading.gif" lazyload alt="image-20221012165810588"></p>
<h2 id="äº‹åŠ¡çš„æ³¨æ„äº‹é¡¹"><a href="#äº‹åŠ¡çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="äº‹åŠ¡çš„æ³¨æ„äº‹é¡¹"></a>äº‹åŠ¡çš„æ³¨æ„äº‹é¡¹</h2><p><strong>å®šä¹‰äº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå‘½ä»¤æ ¼å¼è¾“å…¥é”™è¯¯æ€ä¹ˆåŠï¼Ÿ</strong></p>
<ul>
<li><strong>è¯­æ³•é”™è¯¯</strong> </li>
</ul>
<p>â€‹    æŒ‡å‘½ä»¤ä¹¦å†™æ ¼å¼æœ‰è¯¯ </p>
<ul>
<li><strong>å¤„ç†ç»“æœ</strong> </li>
</ul>
<p>â€‹    å¦‚æœå®šä¹‰çš„äº‹åŠ¡ä¸­æ‰€åŒ…å«çš„å‘½ä»¤å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œæ•´ä½“äº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤å‡ä¸ä¼šæ‰§è¡Œã€‚åŒ…æ‹¬é‚£äº›è¯­æ³•æ­£    ç¡®çš„å‘½ä»¤ã€‚</p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">SET</span> name 111
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> TES name 222
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR unknown command <span class="token string">'TES'</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®šä¹‰äº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå‘½ä»¤æ‰§è¡Œå‡ºç°é”™è¯¯æ€ä¹ˆåŠï¼Ÿ</strong></p>
<ul>
<li><strong>è¿è¡Œé”™è¯¯</strong> </li>
</ul>
<p>â€‹    æŒ‡å‘½ä»¤æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯æ— æ³•æ­£ç¡®çš„æ‰§è¡Œã€‚ä¾‹å¦‚å¯¹<code>list</code>è¿›è¡Œ<code>incr</code>æ“ä½œ </p>
<ul>
<li><strong>å¤„ç†ç»“æœ</strong> </li>
</ul>
<p>â€‹    èƒ½å¤Ÿæ­£ç¡®è¿è¡Œçš„å‘½ä»¤ä¼šæ‰§è¡Œï¼Œè¿è¡Œé”™è¯¯çš„å‘½ä»¤ä¸ä¼šè¢«æ‰§è¡Œ</p>
<p><strong>æ³¨æ„ï¼šå·²ç»æ‰§è¡Œå®Œæ¯•çš„å‘½ä»¤å¯¹åº”çš„æ•°æ®ä¸ä¼šè‡ªåŠ¨å›æ»šï¼Œéœ€è¦ç¨‹åºå‘˜è‡ªå·±åœ¨ä»£ç ä¸­å®ç°å›æ»šã€‚</strong></p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 111
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name 
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 222
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> lpush name 1 2 3
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
1<span class="token punctuation">)</span> OK
2<span class="token punctuation">)</span> <span class="token string">"111"</span>
3<span class="token punctuation">)</span> OK
4<span class="token punctuation">)</span> <span class="token string">"222"</span>
5<span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> WRONGTYPE Operation against a key holding the wrong kind of value
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="æ‰‹åŠ¨è¿›è¡Œäº‹åŠ¡å›æ»š"><a href="#æ‰‹åŠ¨è¿›è¡Œäº‹åŠ¡å›æ»š" class="headerlink" title="æ‰‹åŠ¨è¿›è¡Œäº‹åŠ¡å›æ»š"></a>æ‰‹åŠ¨è¿›è¡Œäº‹åŠ¡å›æ»š</h2><ul>
<li>è®°å½•æ“ä½œè¿‡ç¨‹ä¸­è¢«å½±å“çš„æ•°æ®ä¹‹å‰çš„çŠ¶æ€ <ul>
<li>â€‹    å•æ•°æ®ï¼šstring </li>
<li>â€‹    å¤šæ•°æ®ï¼šhashã€listã€setã€zset </li>
</ul>
</li>
<li>è®¾ç½®æŒ‡ä»¤æ¢å¤æ‰€æœ‰çš„è¢«ä¿®æ”¹çš„é¡¹ <ul>
<li>â€‹    å•æ•°æ®ï¼šç›´æ¥setï¼ˆæ³¨æ„å‘¨è¾¹å±æ€§ï¼Œä¾‹å¦‚æ—¶æ•ˆï¼‰ </li>
<li>â€‹    å¤šæ•°æ®ï¼šä¿®æ”¹å¯¹åº”å€¼æˆ–æ•´ä½“å…‹éš†å¤åˆ¶</li>
</ul>
</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221012181836503.png" srcset="/img/loading.gif" lazyload alt="image-20221012181836503"></p>
<h1 id="Redis-é”"><a href="#Redis-é”" class="headerlink" title="Redis é”"></a>Redis é”</h1><h2 id="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”é”"><a href="#åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”é”" class="headerlink" title="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”é”"></a>åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”é”</h2><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>å¤©çŒ«åŒ11çƒ­å–è¿‡ç¨‹ä¸­ï¼Œå¯¹å·²ç»å”®ç½„çš„è´§ç‰©è¿½åŠ è¡¥è´§ï¼Œ4ä¸ªä¸šåŠ¡å‘˜éƒ½æœ‰æƒé™è¿›è¡Œè¡¥è´§ã€‚è¡¥è´§çš„æ“ä½œå¯èƒ½æ˜¯ä¸€ç³» åˆ—çš„æ“ä½œï¼Œç‰µæ‰¯åˆ°å¤šä¸ªè¿ç»­æ“ä½œï¼Œå¦‚ä½•ä¿éšœä¸ä¼šé‡å¤æ“ä½œï¼Ÿ</p>
<p><strong>ä¸šåŠ¡åˆ†æ</strong></p>
<ul>
<li>å¤šä¸ªå®¢æˆ·ç«¯æœ‰å¯èƒ½åŒæ—¶æ“ä½œåŒä¸€ç»„æ•°æ®ï¼Œå¹¶ä¸”è¯¥æ•°æ®ä¸€æ—¦è¢«æ“ä½œä¿®æ”¹åï¼Œå°†ä¸é€‚ç”¨äºç»§ç»­æ“ä½œ </li>
<li>åœ¨æ“ä½œä¹‹å‰é”å®šè¦æ“ä½œçš„æ•°æ®ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œç»ˆæ­¢å½“å‰æ“ä½œ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>å¯¹ <code>key</code> æ·»åŠ ç›‘è§†é”ï¼Œåœ¨æ‰§è¡Œ<code>exec</code>å‰å¦‚æœ<code>key</code>å‘ç”Ÿäº†å˜åŒ–ï¼Œç»ˆæ­¢äº‹åŠ¡æ‰§è¡Œ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">watch</span> key1 <span class="token punctuation">[</span>key2â€¦â€¦<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>å–æ¶ˆå¯¹æ‰€æœ‰ key çš„ç›‘è§†</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unwatch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Tips 18ï¼š  <code>redis </code>åº”ç”¨åŸºäºçŠ¶æ€æ§åˆ¶çš„æ‰¹é‡ä»»åŠ¡æ‰§è¡Œ</p>
<p><strong>æ¼”ç¤º1.ç›‘æ§æ—¶ é”æœªè¢«ä¿®æ”¹</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> FLUSHDB
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> keys <span class="token operator">*</span>
<span class="token punctuation">(</span>empty list or <span class="token function">set</span><span class="token punctuation">)</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 123
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> age 321
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> watch name
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token string">"123"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> aa bb
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get aa
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
1<span class="token punctuation">)</span> OK
2<span class="token punctuation">)</span> <span class="token string">"bb"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º2.ç›‘æ§æ—¶ é”è¢«ä¿®æ”¹</strong></p>
<p><strong>å®¢æˆ·ç«¯1</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> watch name age
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> aa cc
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get aa
QUEUED<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯2</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token namespace">[root@hecs-33111 ~]</span><span class="token comment"># redis-cli -p 6379</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> name 111
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯1</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> watch name age
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> aa cc
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get aa
QUEUED
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXEC
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º3.äº‹åŠ¡å¿…é¡»åœ¨ç›‘è§†å†…éƒ¨å¼€å¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> MULTI
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> WATCH age
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR WATCH inside MULTI is not allowed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º4.å–æ¶ˆé”</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> WATCH name
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> get name
<span class="token string">"111"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> UNWATCH
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”"><a href="#åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”" class="headerlink" title="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”"></a>åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”</h2><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>å¤©çŒ«åŒ11çƒ­å–è¿‡ç¨‹ä¸­ï¼Œå¯¹å·²ç»å”®ç½„çš„è´§ç‰©è¿½åŠ è¡¥è´§ï¼Œä¸”è¡¥è´§å®Œæˆã€‚å®¢æˆ·è´­ä¹°çƒ­æƒ…é«˜æ¶¨ï¼Œ3ç§’å†…å°†æ‰€æœ‰å•†å“è´­ ä¹°å®Œæ¯•ã€‚æœ¬æ¬¡è¡¥è´§å·²ç»å°†åº“å­˜å…¨éƒ¨æ¸…ç©ºï¼Œå¦‚ä½•é¿å…æœ€åä¸€ä»¶å•†å“ä¸è¢«å¤šäººåŒæ—¶è´­ä¹°ï¼Ÿã€è¶…å–é—®é¢˜ã€‘</p>
<p><strong>ä¸šåŠ¡åˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨<code>watch</code>ç›‘æ§ä¸€ä¸ª<code>key</code>æœ‰æ²¡æœ‰æ”¹å˜å·²ç»ä¸èƒ½è§£å†³é—®é¢˜ï¼Œæ­¤å¤„è¦ç›‘æ§çš„æ˜¯å…·ä½“æ•°æ® </li>
<li>è™½ç„¶<code>redis</code>æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯å¤šä¸ªå®¢æˆ·ç«¯å¯¹åŒä¸€æ•°æ®åŒæ—¶è¿›è¡Œæ“ä½œæ—¶ï¼Œå¦‚ä½•é¿å…ä¸è¢«åŒæ—¶ä¿®æ”¹ï¼Ÿ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä½¿ç”¨ setnx è®¾ç½®ä¸€ä¸ªå…¬å…±é”</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setnx lock-key value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p> åˆ©ç”¨<code>setnx</code>å‘½ä»¤çš„è¿”å›å€¼ç‰¹å¾ï¼Œæœ‰å€¼åˆ™è¿”å›è®¾ç½®å¤±è´¥ï¼Œæ— å€¼åˆ™è¿”å›è®¾ç½®æˆåŠŸ </p>
<ul>
<li>â€‹    å¯¹äºè¿”å›è®¾ç½®æˆåŠŸçš„ï¼Œæ‹¥æœ‰æ§åˆ¶æƒï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„å…·ä½“ä¸šåŠ¡æ“ä½œ </li>
<li>â€‹    å¯¹äºè¿”å›è®¾ç½®å¤±è´¥çš„ï¼Œä¸å…·æœ‰æ§åˆ¶æƒï¼Œæ’é˜Ÿæˆ–ç­‰å¾…<br>æ“ä½œå®Œæ¯•é€šè¿‡delæ“ä½œé‡Šæ”¾é”</li>
</ul>
<p>æ³¨æ„ï¼šä¸Šè¿°è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ç§è®¾è®¡æ¦‚å¿µï¼Œä¾èµ–è§„èŒƒä¿éšœï¼Œå…·æœ‰é£é™©æ€§</p>
<p>Tips 19ï¼š  <code>redis</code> åº”ç”¨åŸºäºåˆ†å¸ƒå¼é”å¯¹åº”çš„åœºæ™¯æ§åˆ¶</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013125505629.png" srcset="/img/loading.gif" lazyload alt="image-20221013125505629"></p>
<p><strong>æ¼”ç¤º</strong></p>
<p><strong>å®¢æˆ·ç«¯1åŠ é”å¹¶ä¿®æ”¹ç›®æ ‡å˜é‡</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> num 10
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> INCRBY num <span class="token operator">-</span>1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯2ä¹Ÿè¿›è¡ŒåŠ é”ï¼ŒåŠ é”å¤±è´¥</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯1åˆ é™¤é”</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">set</span> num 10
OK
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> 
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> INCRBY num <span class="token operator">-</span>1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 9
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> <span class="token function">DEL</span> <span class="token function">lock-num</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯2åŠ é”æˆåŠŸ</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”æ”¹è‰¯"><a href="#åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”æ”¹è‰¯" class="headerlink" title="åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”æ”¹è‰¯"></a>åŸºäºç‰¹å®šæ¡ä»¶çš„äº‹åŠ¡æ‰§è¡Œâ€”â€”åˆ†å¸ƒå¼é”æ”¹è‰¯</h2><p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>ä¾èµ–åˆ†å¸ƒå¼é”çš„æœºåˆ¶ï¼ŒæŸä¸ªç”¨æˆ·æ“ä½œæ—¶å¯¹åº”å®¢æˆ·ç«¯å®•æœºï¼Œä¸”æ­¤æ—¶å·²ç»è·å–åˆ°é”ã€‚å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p><strong>ä¸šåŠ¡åˆ†æ</strong></p>
<ul>
<li>ç”±äºé”æ“ä½œç”±ç”¨æˆ·æ§åˆ¶åŠ é”è§£é”ï¼Œå¿…å®šä¼šå­˜åœ¨åŠ é”åæœªè§£é”çš„é£é™© </li>
<li>éœ€è¦è§£é”æ“ä½œä¸èƒ½ä»…ä¾èµ–ç”¨æˆ·æ§åˆ¶ï¼Œç³»ç»Ÿçº§åˆ«è¦ç»™å‡ºå¯¹åº”çš„ä¿åº•å¤„ç†æ–¹æ¡ˆ</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013131128283.png" srcset="/img/loading.gif" lazyload alt="image-20221013131128283"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä½¿ç”¨ <code>expire</code> ä¸ºé”<code>key</code>æ·»åŠ æ—¶é—´é™å®šï¼Œåˆ°æ—¶ä¸é‡Šæ”¾ï¼Œæ”¾å¼ƒé”</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">expire lock-key second
pexpire lock-key milliseconds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>ç”±äºæ“ä½œé€šå¸¸éƒ½æ˜¯å¾®ç§’æˆ–æ¯«ç§’çº§ï¼Œå› æ­¤è¯¥é”å®šæ—¶é—´ä¸å®œè®¾ç½®è¿‡å¤§ã€‚å…·ä½“æ—¶é—´éœ€è¦ä¸šåŠ¡æµ‹è¯•åç¡®è®¤ã€‚ </p>
<ul>
<li>ä¾‹å¦‚ï¼šæŒæœ‰é”çš„æ“ä½œæœ€é•¿æ‰§è¡Œæ—¶é—´<code>127ms</code>ï¼Œæœ€çŸ­æ‰§è¡Œæ—¶é—´<code>7ms</code>ã€‚ </li>
<li>æµ‹è¯•ç™¾ä¸‡æ¬¡æœ€é•¿æ‰§è¡Œæ—¶é—´å¯¹åº”å‘½ä»¤çš„æœ€å¤§è€—æ—¶ï¼Œæµ‹è¯•ç™¾ä¸‡æ¬¡ç½‘ç»œå»¶è¿Ÿå¹³å‡è€—æ—¶ </li>
<li>é”æ—¶é—´è®¾å®šæ¨èï¼šæœ€å¤§è€—æ—¶<code>*120%+å¹³å‡ç½‘ç»œå»¶è¿Ÿ*110%</code> </li>
<li>å¦‚æœ<code>ä¸šåŠ¡æœ€å¤§è€—æ—¶&lt;&lt;ç½‘ç»œå¹³å‡å»¶è¿Ÿ</code>ï¼Œé€šå¸¸ä¸º<code>2ä¸ªæ•°é‡çº§</code>ï¼Œå–å…¶ä¸­å•ä¸ªè€—æ—¶è¾ƒé•¿å³å¯</li>
</ul>
<p><strong>æ¼”ç¤º</strong></p>
<p><strong>å®¢æˆ·ç«¯1ï¼ŒåŠ é”å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> EXPIRE <span class="token function">lock-num</span> 20
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å®¢æˆ·ç«¯2ï¼Œå°è¯•åŠ é”</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETNX <span class="token function">lock-num</span> 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h1 id="Redis-åˆ é™¤ç­–ç•¥"><a href="#Redis-åˆ é™¤ç­–ç•¥" class="headerlink" title="Redis åˆ é™¤ç­–ç•¥"></a>Redis åˆ é™¤ç­–ç•¥</h1><h2 id="Redisä¸­çš„æ•°æ®ç‰¹å¾"><a href="#Redisä¸­çš„æ•°æ®ç‰¹å¾" class="headerlink" title="Redisä¸­çš„æ•°æ®ç‰¹å¾"></a>Redisä¸­çš„æ•°æ®ç‰¹å¾</h2><ul>
<li><p><code>Redis</code>æ˜¯ä¸€ç§å†…å­˜çº§æ•°æ®åº“ï¼Œæ‰€æœ‰æ•°æ®å‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡<code>TTL</code>æŒ‡ä»¤è·å–å…¶çŠ¶æ€ </p>
<ul>
<li><p><code>XX</code> ï¼šå…·æœ‰æ—¶æ•ˆæ€§çš„æ•°æ® </p>
</li>
<li><p><code>-1</code> ï¼šæ°¸ä¹…æœ‰æ•ˆçš„æ•°æ® </p>
</li>
<li><p><code>-2</code> ï¼šå·²ç»è¿‡æœŸçš„æ•°æ® æˆ– è¢«åˆ é™¤çš„æ•°æ® æˆ– æœªå®šä¹‰çš„æ•°æ®</p>
</li>
</ul>
</li>
</ul>
<p><strong>è¿‡æœŸçš„æ•°æ®çœŸçš„åˆ é™¤äº†å—ï¼Ÿ</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144136576.png" srcset="/img/loading.gif" lazyload alt="image-20221013144136576"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144200317.png" srcset="/img/loading.gif" lazyload alt="image-20221013144200317"></p>
<h2 id="æ•°æ®åˆ é™¤ç­–ç•¥"><a href="#æ•°æ®åˆ é™¤ç­–ç•¥" class="headerlink" title="æ•°æ®åˆ é™¤ç­–ç•¥"></a>æ•°æ®åˆ é™¤ç­–ç•¥</h2><ol>
<li><strong>å®šæ—¶åˆ é™¤</strong></li>
<li><strong>æƒ°æ€§åˆ é™¤</strong></li>
<li><strong>å®šæœŸåˆ é™¤</strong></li>
</ol>
<h3 id="æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"><a href="#æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„" class="headerlink" title="æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"></a>æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013144754957.png" srcset="/img/loading.gif" lazyload alt="image-20221013144754957"></p>
<h3 id="æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡"><a href="#æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡" class="headerlink" title="æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡"></a>æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡</h3><p>åœ¨å†…å­˜å ç”¨ä¸<code>CPU</code>å ç”¨ä¹‹é—´å¯»æ‰¾ä¸€ç§å¹³è¡¡ï¼Œé¡¾æ­¤å¤±å½¼éƒ½ä¼šé€ æˆæ•´ä½“<code>redis</code>æ€§èƒ½çš„ä¸‹é™ï¼Œç”šè‡³å¼•å‘<code>æœåŠ¡å™¨å®•æœº</code>æˆ–<code>å†…å­˜æ³„éœ²</code></p>
<h3 id="å®šæ—¶åˆ é™¤"><a href="#å®šæ—¶åˆ é™¤" class="headerlink" title="å®šæ—¶åˆ é™¤"></a>å®šæ—¶åˆ é™¤</h3><ul>
<li>åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“<code>key</code>è®¾ç½®æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸”è¿‡æœŸæ—¶é—´åˆ°è¾¾æ—¶ï¼Œç”±å®šæ—¶å™¨ä»»åŠ¡ç«‹å³æ‰§è¡Œå¯¹é”®çš„åˆ é™¤æ“ä½œ </li>
<li>ä¼˜ç‚¹ï¼šèŠ‚çº¦å†…å­˜ï¼Œåˆ°æ—¶å°±åˆ é™¤ï¼Œå¿«é€Ÿé‡Šæ”¾æ‰ä¸å¿…è¦çš„å†…å­˜å ç”¨ </li>
<li>ç¼ºç‚¹ï¼š<code>CPU</code>å‹åŠ›å¾ˆå¤§ï¼Œæ— è®º<code>CPU</code>æ­¤æ—¶è´Ÿè½½é‡å¤šé«˜ï¼Œå‡å ç”¨<code>CPU</code>ï¼Œä¼šå½±å“<code>redis</code>æœåŠ¡å™¨å“åº”æ—¶é—´å’ŒæŒ‡ä»¤ååé‡ </li>
<li>æ€»ç»“ï¼šç”¨å¤„ç†å™¨æ€§èƒ½æ¢å–å­˜å‚¨ç©ºé—´ï¼ˆæ‹¿æ—¶é—´æ¢ç©ºé—´ï¼‰</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013145837784.png" srcset="/img/loading.gif" lazyload alt="image-20221013145837784"></p>
<h3 id="æƒ°æ€§åˆ é™¤"><a href="#æƒ°æ€§åˆ é™¤" class="headerlink" title="æƒ°æ€§åˆ é™¤"></a>æƒ°æ€§åˆ é™¤</h3><ul>
<li>æ•°æ®åˆ°è¾¾è¿‡æœŸæ—¶é—´ï¼Œä¸åšå¤„ç†ã€‚ç­‰ä¸‹æ¬¡è®¿é—®è¯¥æ•°æ®æ—¶ <ul>
<li>å¦‚æœæœªè¿‡æœŸï¼Œè¿”å›æ•°æ® </li>
<li>å‘ç°å·²è¿‡æœŸï¼Œåˆ é™¤ï¼Œè¿”å›ä¸å­˜åœ¨ </li>
</ul>
</li>
<li>ä¼˜ç‚¹ï¼šèŠ‚çº¦CPUæ€§èƒ½ï¼Œå‘ç°å¿…é¡»åˆ é™¤çš„æ—¶å€™æ‰åˆ é™¤ </li>
<li>ç¼ºç‚¹ï¼šå†…å­˜å‹åŠ›å¾ˆå¤§ï¼Œå‡ºç°é•¿æœŸå ç”¨å†…å­˜çš„æ•°æ® </li>
<li>æ€»ç»“ï¼šç”¨å­˜å‚¨ç©ºé—´æ¢å–å¤„ç†å™¨æ€§èƒ½ ï¼ˆæ‹¿æ—¶é—´æ¢ç©ºé—´ï¼‰</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013150235170.png" srcset="/img/loading.gif" lazyload alt="image-20221013150235170"></p>
<h3 id="å®šæœŸåˆ é™¤"><a href="#å®šæœŸåˆ é™¤" class="headerlink" title="å®šæœŸåˆ é™¤"></a>å®šæœŸåˆ é™¤</h3><p><strong>ä¸¤ç§æ–¹æ¡ˆéƒ½èµ°æç«¯ï¼Œæœ‰æ²¡æœ‰æŠ˜ä¸­æ–¹æ¡ˆï¼Ÿ</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151212923.png" srcset="/img/loading.gif" lazyload alt="image-20221013151212923"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151238928.png" srcset="/img/loading.gif" lazyload alt="image-20221013151238928"></p>
<ul>
<li>å‘¨æœŸæ€§è½®è¯¢<code>redis</code>åº“ä¸­çš„æ—¶æ•ˆæ€§æ•°æ®ï¼Œé‡‡ç”¨éšæœºæŠ½å–çš„ç­–ç•¥ï¼Œåˆ©ç”¨è¿‡æœŸæ•°æ®å æ¯”çš„æ–¹å¼æ§åˆ¶åˆ é™¤é¢‘åº¦ </li>
<li>ç‰¹ç‚¹1ï¼š<code>CPU</code>æ€§èƒ½å ç”¨è®¾ç½®æœ‰å³°å€¼ï¼Œæ£€æµ‹é¢‘åº¦å¯è‡ªå®šä¹‰è®¾ç½® </li>
<li>ç‰¹ç‚¹2ï¼šå†…å­˜å‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œé•¿æœŸå ç”¨å†…å­˜çš„å†·æ•°æ®ä¼šè¢«æŒç»­æ¸…ç† </li>
<li>æ€»ç»“ï¼šå‘¨æœŸæ€§æŠ½æŸ¥å­˜å‚¨ç©ºé—´ <code>expireIfNeeded()</code> ï¼ˆéšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥ï¼‰</li>
</ul>
<h3 id="åˆ é™¤ç­–ç•¥æ¯”å¯¹"><a href="#åˆ é™¤ç­–ç•¥æ¯”å¯¹" class="headerlink" title="åˆ é™¤ç­–ç•¥æ¯”å¯¹"></a>åˆ é™¤ç­–ç•¥æ¯”å¯¹</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221013151547838.png" srcset="/img/loading.gif" lazyload alt="image-20221013151547838"></p>
<h2 id="é€å‡ºç®—æ³•"><a href="#é€å‡ºç®—æ³•" class="headerlink" title="é€å‡ºç®—æ³•"></a>é€å‡ºç®—æ³•</h2><h3 id="æ–°æ•°æ®è¿›å…¥æ£€æµ‹"><a href="#æ–°æ•°æ®è¿›å…¥æ£€æµ‹" class="headerlink" title="æ–°æ•°æ®è¿›å…¥æ£€æµ‹"></a>æ–°æ•°æ®è¿›å…¥æ£€æµ‹</h3><p>å½“æ–°æ•°æ®è¿›å…¥redisæ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³æ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li><code>Redis</code>ä½¿ç”¨å†…å­˜å­˜å‚¨æ•°æ®ï¼Œåœ¨æ‰§è¡Œæ¯ä¸€ä¸ªå‘½ä»¤å‰ï¼Œä¼šè°ƒç”¨<code>freeMemoryIfNeeded()</code>æ£€æµ‹å†…å­˜æ˜¯å¦å……è¶³ã€‚å¦‚ æœå†…å­˜ä¸æ»¡è¶³æ–°åŠ å…¥æ•°æ®çš„æœ€ä½å­˜å‚¨è¦æ±‚ï¼Œredisè¦ä¸´æ—¶åˆ é™¤ä¸€äº›æ•°æ®ä¸ºå½“å‰æŒ‡ä»¤æ¸…ç†å­˜å‚¨ç©ºé—´ã€‚æ¸…ç†æ•°æ® çš„ç­–ç•¥ç§°ä¸ºé€å‡ºç®—æ³•ã€‚ </li>
<li>æ³¨æ„ï¼šé€å‡ºæ•°æ®çš„è¿‡ç¨‹ä¸æ˜¯<code>100%</code>èƒ½å¤Ÿæ¸…ç†å‡ºè¶³å¤Ÿçš„å¯ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœä¸æˆåŠŸåˆ™åå¤æ‰§è¡Œã€‚å½“å¯¹æ‰€ æœ‰æ•°æ®å°è¯•å®Œæ¯•åï¼Œå¦‚æœä¸èƒ½è¾¾åˆ°å†…å­˜æ¸…ç†çš„è¦æ±‚ï¼Œå°†å‡ºç°é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014131638733.png" srcset="/img/loading.gif" lazyload alt="image-20221014131638733"></p>
<h3 id="å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®"><a href="#å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®" class="headerlink" title="å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®"></a>å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®</h3><ul>
<li>æœ€å¤§å¯ä½¿ç”¨å†…å­˜</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">maxmemory<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>å ç”¨ç‰©ç†å†…å­˜çš„æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ã€‚ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®éœ€æ±‚è®¾å®šï¼Œé€šå¸¸è®¾ç½®åœ¨50%ä»¥ä¸Šã€‚</p>
<ul>
<li>æ¯æ¬¡é€‰å–å¾…åˆ é™¤æ•°æ®çš„ä¸ªæ•°</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">maxmemory-samples<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>é€‰å–æ•°æ®æ—¶å¹¶ä¸ä¼šå…¨åº“æ‰«æï¼Œå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½æ¶ˆè€—ï¼Œé™ä½è¯»å†™æ€§èƒ½ã€‚å› æ­¤é‡‡ç”¨éšæœºè·å–æ•°æ®çš„æ–¹å¼ä½œä¸ºå¾…æ£€æµ‹åˆ é™¤æ•°æ®</p>
<ul>
<li>åˆ é™¤ç­–ç•¥</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">maxmemory-policy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¾¾åˆ°æœ€å¤§å†…å­˜åçš„ï¼Œå¯¹è¢«æŒ‘é€‰å‡ºæ¥çš„æ•°æ®è¿›è¡Œåˆ é™¤çš„ç­–ç•¥</p>
<p>ï¬ æ£€æµ‹æ˜“å¤±æ•°æ®ï¼ˆå¯èƒ½ä¼šè¿‡æœŸçš„æ•°æ®é›†<code>server.db[i].expires</code> ï¼‰ </p>
<p>â‘  <code>volatile-lru</code>ï¼šæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±° </p>
<p>â‘¡ <code>volatile-lfu</code>ï¼šæŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±° </p>
<p>â‘¢ <code>volatile-ttl</code>ï¼šæŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±° </p>
<p>â‘£ <code>volatile-random</code>ï¼šä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° </p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014132248229.png" srcset="/img/loading.gif" lazyload alt="image-20221014132248229"></p>
<p>ï¬ æ£€æµ‹å…¨åº“æ•°æ®ï¼ˆæ‰€æœ‰æ•°æ®é›†<code>server.db[i].dict </code>ï¼‰ </p>
<p>â‘¤ <code>allkeys-lru</code>ï¼šæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±° </p>
<p>â‘¥ <code>allkeys-lfu</code>ï¼šæŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±° </p>
<p>â‘¦ <code>allkeys-random</code>ï¼šä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° </p>
<p>ï¬ æ”¾å¼ƒæ•°æ®é©±é€ </p>
<p>â‘§ <code>no-enviction</code>ï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®ï¼ˆ<code>redis4.0</code>ä¸­é»˜è®¤ç­–ç•¥ï¼‰ï¼Œä¼šå¼•å‘é”™è¯¯<code>OOMï¼ˆOut Of Memoryï¼‰</code></p>
<p><strong>å‘½ä»¤é…ç½®</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">maxmemory-policy volatile-lru<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="æ•°æ®é€å‡ºç­–ç•¥é…ç½®ä¾æ®"><a href="#æ•°æ®é€å‡ºç­–ç•¥é…ç½®ä¾æ®" class="headerlink" title="æ•°æ®é€å‡ºç­–ç•¥é…ç½®ä¾æ®"></a>æ•°æ®é€å‡ºç­–ç•¥é…ç½®ä¾æ®</h3><p>ä½¿ç”¨<code>INFO</code>å‘½ä»¤è¾“å‡ºç›‘æ§ä¿¡æ¯ï¼ŒæŸ¥è¯¢ç¼“å­˜ <code>hit</code> å’Œ <code>miss</code> çš„æ¬¡æ•°ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒä¼˜<code>Redis</code>é…ç½®</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> INFO<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014133100016.png" srcset="/img/loading.gif" lazyload alt="image-20221014133100016"></p>
<h1 id="Redis-æ ¸å¿ƒé…ç½®"><a href="#Redis-æ ¸å¿ƒé…ç½®" class="headerlink" title="Redis æ ¸å¿ƒé…ç½®"></a>Redis æ ¸å¿ƒé…ç½®</h1><h2 id="æœåŠ¡å™¨ç«¯è®¾å®š"><a href="#æœåŠ¡å™¨ç«¯è®¾å®š" class="headerlink" title="æœåŠ¡å™¨ç«¯è®¾å®š"></a>æœåŠ¡å™¨ç«¯è®¾å®š</h2><ul>
<li>è®¾ç½®æœåŠ¡å™¨ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">daemonize yes<span class="token punctuation">|</span>no<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>ç»‘å®šä¸»æœºåœ°å€</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">bind 127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è®¾ç½®æœåŠ¡å™¨ç«¯å£å·</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">port 6379<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è®¾ç½®æ•°æ®åº“æ•°é‡</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">databases 16<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h2 id="æ—¥å¿—é…ç½®"><a href="#æ—¥å¿—é…ç½®" class="headerlink" title="æ—¥å¿—é…ç½®"></a>æ—¥å¿—é…ç½®</h2><ul>
<li>è®¾ç½®æœåŠ¡å™¨ä»¥æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">loglevel debug<span class="token punctuation">|</span>verbose<span class="token punctuation">|</span>notice<span class="token punctuation">|</span>warning<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>æ—¥å¿—è®°å½•æ–‡ä»¶å</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">logfile ç«¯å£å·.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>æ³¨æ„ï¼šæ—¥å¿—çº§åˆ«å¼€å‘æœŸè®¾ç½®ä¸º<code>verbose</code>å³å¯ï¼Œç”Ÿäº§ç¯å¢ƒä¸­é…ç½®ä¸º<code>notice</code>ï¼Œç®€åŒ–æ—¥å¿—è¾“å‡ºé‡ï¼Œé™ä½å†™æ—¥å¿—IOçš„é¢‘åº¦</p>
<h2 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h2><ul>
<li>è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥åˆ°è¾¾ä¸Šé™ï¼ŒRedisä¼šå…³é—­æ–°çš„è¿æ¥</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">maxclients 0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>å®¢æˆ·ç«¯é—²ç½®ç­‰å¾…æœ€å¤§æ—¶é•¿ï¼Œè¾¾åˆ°æœ€å¤§å€¼åå…³é—­è¿æ¥ã€‚å¦‚éœ€å…³é—­è¯¥åŠŸèƒ½ï¼Œè®¾ç½®ä¸º 0</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">timeout 300<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h2 id="å¤šæœåŠ¡å™¨å¿«æ·é…ç½®"><a href="#å¤šæœåŠ¡å™¨å¿«æ·é…ç½®" class="headerlink" title="å¤šæœåŠ¡å™¨å¿«æ·é…ç½®"></a>å¤šæœåŠ¡å™¨å¿«æ·é…ç½®</h2><p>å¯¼å…¥å¹¶åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œç”¨äºå¿«é€Ÿåˆ›å»º<code>redis</code>å…¬å…±é…ç½®è¾ƒå¤šçš„<code>redis</code>å®ä¾‹é…ç½®æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">include /path/server-ç«¯å£å·.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h1 id="Redis-é«˜çº§æ•°æ®ç±»å‹"><a href="#Redis-é«˜çº§æ•°æ®ç±»å‹" class="headerlink" title="Redis é«˜çº§æ•°æ®ç±»å‹"></a>Redis é«˜çº§æ•°æ®ç±»å‹</h1><h2 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014134814217.png" srcset="/img/loading.gif" lazyload alt="image-20221014134814217"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014134931474.png" srcset="/img/loading.gif" lazyload alt="image-20221014134931474"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014135302634.png" srcset="/img/loading.gif" lazyload alt="image-20221014135302634"></p>
<h3 id="Bitmapsç±»å‹çš„åŸºç¡€æ“ä½œ"><a href="#Bitmapsç±»å‹çš„åŸºç¡€æ“ä½œ" class="headerlink" title="Bitmapsç±»å‹çš„åŸºç¡€æ“ä½œ"></a>Bitmapsç±»å‹çš„åŸºç¡€æ“ä½œ</h3><ul>
<li>è·å–æŒ‡å®škeyå¯¹åº”åç§»é‡ä¸Šçš„bitå€¼</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">getbit key offset<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>è®¾ç½®æŒ‡å®škeyå¯¹åº”åç§»é‡ä¸Šçš„bitå€¼ï¼Œvalueåªèƒ½æ˜¯1æˆ–0</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setbit key offset value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT bits 0 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GETBIT bits 0
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GETBIT bits 10
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="Bitmapsç±»å‹çš„æ‰©å±•æ“ä½œ"><a href="#Bitmapsç±»å‹çš„æ‰©å±•æ“ä½œ" class="headerlink" title="Bitmapsç±»å‹çš„æ‰©å±•æ“ä½œ"></a>Bitmapsç±»å‹çš„æ‰©å±•æ“ä½œ</h3><p><strong>ä¸šåŠ¡åœºæ™¯</strong> </p>
<p><strong>ç”µå½±ç½‘ç«™</strong> </p>
<ul>
<li>ç»Ÿè®¡æ¯å¤©æŸä¸€éƒ¨ç”µå½±æ˜¯å¦è¢«ç‚¹æ’­ </li>
<li>ç»Ÿè®¡æ¯å¤©æœ‰å¤šå°‘éƒ¨ç”µå½±è¢«ç‚¹æ’­ </li>
<li>ç»Ÿè®¡æ¯å‘¨/æœˆ/å¹´æœ‰å¤šå°‘éƒ¨ç”µå½±è¢«ç‚¹æ’­ </li>
<li>ç»Ÿè®¡å¹´åº¦å“ªéƒ¨ç”µå½±æ²¡æœ‰è¢«ç‚¹æ’­</li>
</ul>
<p><strong>ä¸šåŠ¡åˆ†æ</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014140142843.png" srcset="/img/loading.gif" lazyload alt="image-20221014140142843"></p>
<ul>
<li>å¯¹æŒ‡å®škeyæŒ‰ä½è¿›è¡Œäº¤ã€å¹¶ã€éã€å¼‚æˆ–æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°destKeyä¸­</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">bitop op destKey key1 [key2...]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><p>andï¼šäº¤ </p>
</li>
<li><p>orï¼šå¹¶ </p>
</li>
<li><p>notï¼šé </p>
</li>
<li><p>xorï¼šå¼‚æˆ–</p>
</li>
<li><p>ç»Ÿè®¡æŒ‡å®škeyä¸­1çš„æ•°é‡</p>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bitcount key <span class="token punctuation">[</span>start end<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Tips 21ï¼š <code>redis</code> åº”ç”¨äºä¿¡æ¯çŠ¶æ€ç»Ÿè®¡</p>
<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880808 0 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880808 4 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880808 8 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880809 0 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880809 5 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT 20880809 8 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BITCOUNT 20880808
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 3
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BITCOUNT 20880809
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 3
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> SETBIT  20880808 6 1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 0
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BITCOUNT 20880808
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 4
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BITOP or 08-09 20880808 20880809
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 2
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> BITCOUNT 08-09
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 5
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h2><h3 id="ç»Ÿè®¡ç‹¬ç«‹UV"><a href="#ç»Ÿè®¡ç‹¬ç«‹UV" class="headerlink" title="ç»Ÿè®¡ç‹¬ç«‹UV"></a>ç»Ÿè®¡ç‹¬ç«‹UV</h3><ul>
<li>åŸå§‹æ–¹æ¡ˆï¼šset <ul>
<li>å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„idï¼ˆå­—ç¬¦ä¸²ï¼‰ </li>
</ul>
</li>
<li>æ”¹è¿›æ–¹æ¡ˆï¼šBitmaps <ul>
<li>å­˜å‚¨æ¯ä¸ªç”¨æˆ·çŠ¶æ€ï¼ˆbitï¼‰ </li>
</ul>
</li>
<li>å…¨æ–°çš„æ–¹æ¡ˆï¼šHyperloglog</li>
</ul>
<h3 id="åŸºæ•°"><a href="#åŸºæ•°" class="headerlink" title="åŸºæ•°"></a>åŸºæ•°</h3><ul>
<li>åŸºæ•°æ˜¯æ•°æ®é›†å»é‡åå…ƒç´ ä¸ªæ•° </li>
<li><code>HyperLogLog</code> æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ï¼Œè¿ç”¨äº†<code>LogLog</code>çš„ç®—æ³•</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014142336498.png" srcset="/img/loading.gif" lazyload alt="image-20221014142336498"></p>
<h3 id="HyperLogLogç±»å‹çš„åŸºæœ¬æ“ä½œ"><a href="#HyperLogLogç±»å‹çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="HyperLogLogç±»å‹çš„åŸºæœ¬æ“ä½œ"></a>HyperLogLogç±»å‹çš„åŸºæœ¬æ“ä½œ</h3><ul>
<li>æ·»åŠ æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pfadd key element <span class="token punctuation">[</span>element <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>ç»Ÿè®¡æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pfcount key <span class="token punctuation">[</span>key <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>åˆå¹¶æ•°æ®</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pfmerge destkey sourcekey <span class="token punctuation">[</span>sourcekey<span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>Tips 22ï¼š  redis åº”ç”¨äºç‹¬ç«‹ä¿¡æ¯ç»Ÿè®¡</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 001
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 001
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 001
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 001
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 001
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD hll 002
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> GET hll
"HYLL<span class="token punctuation">\</span>x01<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x00<span class="token punctuation">\</span>x80L<span class="token punctuation">\</span>x9f<span class="token punctuation">\</span>x84R<span class="token punctuation">\</span>xbf<span class="token punctuation">\</span>x80`<span class="token punctuation">\</span>x9d"
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFCOUNT hll
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis<span class="token operator">></span> PFADD  nosql  <span class="token string">"Redis"</span>  <span class="token string">"MongoDB"</span>  <span class="token string">"Memcached"</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">></span> PFADD  RDBMS  <span class="token string">"MySQL"</span> <span class="token string">"MSSQL"</span> <span class="token string">"PostgreSQL"</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">></span> PFMERGE  databases  nosql  RDBMS
OK
redis<span class="token operator">></span> PFCOUNT  databases
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>



<h3 id="ç›¸å…³è¯´æ˜"><a href="#ç›¸å…³è¯´æ˜" class="headerlink" title="ç›¸å…³è¯´æ˜"></a>ç›¸å…³è¯´æ˜</h3><ul>
<li>ç”¨äºè¿›è¡ŒåŸºæ•°ç»Ÿè®¡ï¼Œä¸æ˜¯é›†åˆï¼Œä¸ä¿å­˜æ•°æ®ï¼Œåªè®°å½•æ•°é‡è€Œä¸æ˜¯å…·ä½“æ•°æ® </li>
<li>æ ¸å¿ƒæ˜¯åŸºæ•°ä¼°ç®—ç®—æ³•ï¼Œæœ€ç»ˆæ•°å€¼<strong>å­˜åœ¨ä¸€å®šè¯¯å·®</strong> </li>
<li>è¯¯å·®èŒƒå›´ï¼šåŸºæ•°ä¼°è®¡çš„ç»“æœæ˜¯ä¸€ä¸ªå¸¦æœ‰ <code>0.81%</code> æ ‡å‡†é”™è¯¯çš„è¿‘ä¼¼å€¼ </li>
<li>è€—ç©ºé—´æå°ï¼Œæ¯ä¸ª<code>hyperloglog key</code>å ç”¨äº†<code>12K</code>çš„å†…å­˜ç”¨äºæ ‡è®°åŸºæ•° </li>
<li><code>pfadd</code>å‘½ä»¤ä¸æ˜¯ä¸€æ¬¡æ€§åˆ†é…<code>12K</code>å†…å­˜ä½¿ç”¨ï¼Œä¼šéšç€åŸºæ•°çš„å¢åŠ å†…å­˜é€æ¸å¢å¤§ </li>
<li><code>Pfmerge</code>å‘½ä»¤åˆå¹¶åå ç”¨çš„å­˜å‚¨ç©ºé—´ä¸º<code>12K</code>ï¼Œæ— è®ºåˆå¹¶ä¹‹å‰æ•°æ®é‡å¤šå°‘</li>
</ul>
<h2 id="GEO"><a href="#GEO" class="headerlink" title="GEO"></a>GEO</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014162507268.png" srcset="/img/loading.gif" lazyload alt="image-20221014162507268"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221014162532151.png" srcset="/img/loading.gif" lazyload alt="image-20221014162532151"></p>
<h3 id="GEOç±»å‹çš„åŸºæœ¬æ“ä½œ"><a href="#GEOç±»å‹çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="GEOç±»å‹çš„åŸºæœ¬æ“ä½œ"></a>GEOç±»å‹çš„åŸºæœ¬æ“ä½œ</h3><ul>
<li><strong>æ·»åŠ åæ ‡ç‚¹</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">geoadd key longitude latitude member <span class="token punctuation">[</span>longitude latitude member <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>è·å–åæ ‡ç‚¹</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">geopos key member <span class="token punctuation">[</span>member <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>è®¡ç®—åæ ‡ç‚¹è·ç¦»</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">geodist key member1 member2 <span class="token punctuation">[</span>unit<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 1 1 a
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 2 2 b
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOPOS geos a
1<span class="token punctuation">)</span> 1<span class="token punctuation">)</span> <span class="token string">"0.99999994039535522"</span>
   2<span class="token punctuation">)</span> <span class="token string">"0.99999945914297683"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b
<span class="token string">"157270.0561"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b m
<span class="token string">"157270.0561"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b km
<span class="token string">"157.2701"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>


<ul>
<li><strong>æ ¹æ®åæ ‡èŒƒå›´å†…çš„æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">georadius key longitude latitude radius m<span class="token operator">|</span>km<span class="token operator">|</span>ft<span class="token operator">|</span>mi <span class="token punctuation">[</span>withcoord<span class="token punctuation">]</span> <span class="token punctuation">[</span>withdist<span class="token punctuation">]</span> <span class="token punctuation">[</span>withhash<span class="token punctuation">]</span> <span class="token punctuation">[</span>count count<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>æ ¹æ®ç‚¹æ±‚èŒƒå›´å†…æ•°æ®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">georadiusbymember key member radius m<span class="token operator">|</span>km<span class="token operator">|</span>ft<span class="token operator">|</span>mi <span class="token punctuation">[</span>withcoord<span class="token punctuation">]</span> <span class="token punctuation">[</span>withdist<span class="token punctuation">]</span> <span class="token punctuation">[</span>withhash<span class="token punctuation">]</span> <span class="token punctuation">[</span>count count<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li> <strong>è®¡ç®—ç»çº¬åº¦</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">geohash key member <span class="token punctuation">[</span>member <span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b
<span class="token string">"157270.0561"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b m
<span class="token string">"157270.0561"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEODIST geos a b km
<span class="token string">"157.2701"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 1 1 1<span class="token punctuation">,</span>1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 1 2 1<span class="token punctuation">,</span>2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 1 3 1<span class="token punctuation">,</span>3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 2 1 2<span class="token punctuation">,</span>1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 2 2 2<span class="token punctuation">,</span>2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 2 3 2<span class="token punctuation">,</span>3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 3 1 3<span class="token punctuation">,</span>1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 3 2 3<span class="token punctuation">,</span>2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 3 3 3<span class="token punctuation">,</span>3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOADD geos 5 5 5<span class="token punctuation">,</span>5
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 1
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEORADIUSBYMEMBER geos 2<span class="token punctuation">,</span>2 180 km
 1<span class="token punctuation">)</span> <span class="token string">"1,1"</span>
 2<span class="token punctuation">)</span> <span class="token string">"a"</span>
 3<span class="token punctuation">)</span> <span class="token string">"2,1"</span>
 4<span class="token punctuation">)</span> <span class="token string">"1,2"</span>
 5<span class="token punctuation">)</span> <span class="token string">"2,2"</span>
 6<span class="token punctuation">)</span> <span class="token string">"b"</span>
 7<span class="token punctuation">)</span> <span class="token string">"3,1"</span>
 8<span class="token punctuation">)</span> <span class="token string">"3,2"</span>
 9<span class="token punctuation">)</span> <span class="token string">"1,3"</span>
10<span class="token punctuation">)</span> <span class="token string">"2,3"</span>
11<span class="token punctuation">)</span> <span class="token string">"3,3"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEORADIUSBYMEMBER geos 2<span class="token punctuation">,</span>2 120 km
1<span class="token punctuation">)</span> <span class="token string">"1,2"</span>
2<span class="token punctuation">)</span> <span class="token string">"2,2"</span>
3<span class="token punctuation">)</span> <span class="token string">"b"</span>
4<span class="token punctuation">)</span> <span class="token string">"2,3"</span>
5<span class="token punctuation">)</span> <span class="token string">"2,1"</span>
6<span class="token punctuation">)</span> <span class="token string">"3,2"</span>
127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEORADIUSBYMEMBER geos 2<span class="token punctuation">,</span>2 1800 km
 1<span class="token punctuation">)</span> <span class="token string">"1,1"</span>
 2<span class="token punctuation">)</span> <span class="token string">"a"</span>
 3<span class="token punctuation">)</span> <span class="token string">"2,1"</span>
 4<span class="token punctuation">)</span> <span class="token string">"1,2"</span>
 5<span class="token punctuation">)</span> <span class="token string">"2,2"</span>
 6<span class="token punctuation">)</span> <span class="token string">"b"</span>
 7<span class="token punctuation">)</span> <span class="token string">"3,1"</span>
 8<span class="token punctuation">)</span> <span class="token string">"3,2"</span>
 9<span class="token punctuation">)</span> <span class="token string">"1,3"</span>
10<span class="token punctuation">)</span> <span class="token string">"2,3"</span>
11<span class="token punctuation">)</span> <span class="token string">"3,3"</span>
12<span class="token punctuation">)</span> <span class="token string">"5,5"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEORADIUS geos 1<span class="token punctuation">.</span>5 1<span class="token punctuation">.</span>5 90 km
1<span class="token punctuation">)</span> <span class="token string">"1,2"</span>
2<span class="token punctuation">)</span> <span class="token string">"2,2"</span>
3<span class="token punctuation">)</span> <span class="token string">"b"</span>
4<span class="token punctuation">)</span> <span class="token string">"1,1"</span>
5<span class="token punctuation">)</span> <span class="token string">"a"</span>
6<span class="token punctuation">)</span> <span class="token string">"2,1"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:6379> GEOHASH geos 2<span class="token punctuation">,</span>2
1<span class="token punctuation">)</span> <span class="token string">"s037ms06g70"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p>Tips 23ï¼š  redis åº”ç”¨äºåœ°ç†ä½ç½®è®¡ç®—</p>
<h1 id="Redis-ä¸»ä»å¤åˆ¶"><a href="#Redis-ä¸»ä»å¤åˆ¶" class="headerlink" title="Redis ä¸»ä»å¤åˆ¶"></a>Redis ä¸»ä»å¤åˆ¶</h1><h2 id="ä¸»ä»å¤åˆ¶ç®€ä»‹"><a href="#ä¸»ä»å¤åˆ¶ç®€ä»‹" class="headerlink" title="ä¸»ä»å¤åˆ¶ç®€ä»‹"></a>ä¸»ä»å¤åˆ¶ç®€ä»‹</h2><p><strong>äº’è”ç½‘â€œä¸‰é«˜â€æ¶æ„</strong></p>
<ul>
<li><strong>é«˜å¹¶å‘</strong> </li>
<li><strong>é«˜æ€§èƒ½</strong> </li>
<li><strong>é«˜å¯ç”¨</strong></li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017163836418.png" srcset="/img/loading.gif" lazyload alt="image-20221017163836418"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017163847015.png" srcset="/img/loading.gif" lazyload alt="image-20221017163847015"></p>
<h3 id="ä½ çš„â€œRedisâ€æ˜¯å¦é«˜å¯ç”¨"><a href="#ä½ çš„â€œRedisâ€æ˜¯å¦é«˜å¯ç”¨" class="headerlink" title="ä½ çš„â€œRedisâ€æ˜¯å¦é«˜å¯ç”¨"></a><strong>ä½ çš„â€œRedisâ€æ˜¯å¦é«˜å¯ç”¨</strong></h3><p>å•æœº<code>redis</code>çš„é£é™©ä¸é—®é¢˜ </p>
<ul>
<li>é—®é¢˜1.æœºå™¨æ•…éšœ <ul>
<li>ç°è±¡ï¼šç¡¬ç›˜æ•…éšœã€ç³»ç»Ÿå´©æºƒ </li>
<li>æœ¬è´¨ï¼šæ•°æ®ä¸¢å¤±ï¼Œå¾ˆå¯èƒ½å¯¹ä¸šåŠ¡é€ æˆç¾éš¾æ€§æ‰“å‡» </li>
<li>ç»“è®ºï¼šåŸºæœ¬ä¸Šä¼šæ”¾å¼ƒä½¿ç”¨<code>redis</code>. </li>
</ul>
</li>
<li>é—®é¢˜2.å®¹é‡ç“¶é¢ˆ <ul>
<li>ç°è±¡ï¼šå†…å­˜ä¸è¶³ï¼Œä»<code>16G</code>å‡çº§åˆ°<code>64G</code>ï¼Œä»<code>64G</code>å‡çº§åˆ°<code>128G</code>ï¼Œæ— é™å‡çº§å†…å­˜ </li>
<li>æœ¬è´¨ï¼šç©·ï¼Œç¡¬ä»¶æ¡ä»¶è·Ÿä¸ä¸Š </li>
<li>ç»“è®ºï¼šæ”¾å¼ƒä½¿ç”¨<code>redis</code> </li>
</ul>
</li>
<li>ç»“è®ºï¼š <ul>
<li>â€‹    ä¸ºäº†é¿å…å•ç‚¹<code>Redis</code>æœåŠ¡å™¨æ•…éšœï¼Œå‡†å¤‡å¤šå°æœåŠ¡å™¨ï¼Œäº’ç›¸è¿é€šã€‚å°†æ•°æ®å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸åŒçš„æœ åŠ¡å™¨ä¸Šï¼Œ<strong>è¿æ¥åœ¨ä¸€èµ·</strong>ï¼Œå¹¶ä¿è¯æ•°æ®æ˜¯<strong>åŒæ­¥</strong>çš„ã€‚å³ä½¿æœ‰å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œå…¶ä»–æœåŠ¡å™¨ä¾ç„¶å¯ä»¥ç»§ç»­ æä¾›æœåŠ¡ï¼Œå®ç°<code>Redis</code>çš„é«˜å¯ç”¨ï¼ŒåŒæ—¶å®ç°æ•°æ®<strong>å†—ä½™å¤‡ä»½</strong>ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ"><a href="#å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ" class="headerlink" title="å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ"></a>å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ</h3><ul>
<li>æä¾›æ•°æ®æ–¹ï¼šmaster <ul>
<li>ä¸»æœåŠ¡å™¨ï¼Œä¸»èŠ‚ç‚¹ï¼Œä¸»åº“ </li>
<li>ä¸»å®¢æˆ·ç«¯ </li>
</ul>
</li>
<li>æ¥æ”¶æ•°æ®æ–¹ï¼šslave <ul>
<li>ä»æœåŠ¡å™¨ï¼Œä»èŠ‚ç‚¹ï¼Œä»åº“ </li>
<li>ä»å®¢æˆ·ç«¯ </li>
</ul>
</li>
<li>éœ€è¦è§£å†³çš„é—®é¢˜ï¼š<ul>
<li> æ•°æ®åŒæ­¥ </li>
</ul>
</li>
<li>æ ¸å¿ƒå·¥ä½œï¼š <ul>
<li>masterçš„æ•°æ®å¤åˆ¶åˆ°slaveä¸­</li>
</ul>
</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017164832371.png" srcset="/img/loading.gif" lazyload alt="image-20221017164832371"></p>
<h3 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h3><p>ä¸»ä»å¤åˆ¶å³å°†<code>master</code>ä¸­çš„æ•°æ®å³æ—¶ã€æœ‰æ•ˆçš„å¤åˆ¶åˆ°<code>slave</code>ä¸­ </p>
<p>ç‰¹å¾ï¼šä¸€ä¸ª<code>master</code>å¯ä»¥æ‹¥æœ‰å¤šä¸ª<code>slave</code>ï¼Œä¸€ä¸ª<code>slave</code>åªå¯¹åº”ä¸€ä¸ª<code>master </code></p>
<p>èŒè´£ï¼š </p>
<ul>
<li><strong>master</strong>: <ul>
<li>å†™æ•°æ® </li>
<li>æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œå°†å‡ºç°å˜åŒ–çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°<code>slave </code></li>
<li>è¯»æ•°æ®ï¼ˆå¯å¿½ç•¥ï¼‰ </li>
</ul>
</li>
<li><strong>slave</strong>: <ul>
<li>è¯»æ•°æ® </li>
<li>å†™æ•°æ®ï¼ˆç¦æ­¢ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="é«˜å¯ç”¨é›†ç¾¤"><a href="#é«˜å¯ç”¨é›†ç¾¤" class="headerlink" title="é«˜å¯ç”¨é›†ç¾¤"></a>é«˜å¯ç”¨é›†ç¾¤</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017165447946.png" srcset="/img/loading.gif" lazyload alt="image-20221017165447946"></p>
<h3 id="ä¸»ä»å¤åˆ¶çš„ä½œç”¨"><a href="#ä¸»ä»å¤åˆ¶çš„ä½œç”¨" class="headerlink" title="ä¸»ä»å¤åˆ¶çš„ä½œç”¨"></a>ä¸»ä»å¤åˆ¶çš„ä½œç”¨</h3><ul>
<li>è¯»å†™åˆ†ç¦»ï¼š<code>master</code>å†™ã€<code>slave</code>è¯»ï¼Œæé«˜æœåŠ¡å™¨çš„è¯»å†™è´Ÿè½½èƒ½åŠ› </li>
<li>è´Ÿè½½å‡è¡¡ï¼šåŸºäºä¸»ä»ç»“æ„ï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±<code>slave</code>åˆ†æ‹…<code>master</code>è´Ÿè½½ï¼Œå¹¶æ ¹æ®éœ€æ±‚çš„å˜åŒ–ï¼Œæ”¹å˜<code>slave</code>çš„æ•° é‡ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…æ•°æ®è¯»å–è´Ÿè½½ï¼Œå¤§å¤§æé«˜<code>Redis</code>æœåŠ¡å™¨å¹¶å‘é‡ä¸æ•°æ®ååé‡ </li>
<li>æ•…éšœæ¢å¤ï¼šå½“<code>master</code>å‡ºç°é—®é¢˜æ—¶ï¼Œç”±<code>slave</code>æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ </li>
<li>æ•°æ®å†—ä½™ï¼šå®ç°æ•°æ®çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ </li>
<li>é«˜å¯ç”¨åŸºçŸ³ï¼šåŸºäºä¸»ä»å¤åˆ¶ï¼Œæ„å»ºå“¨å…µæ¨¡å¼ä¸é›†ç¾¤ï¼Œå®ç°<code>Redis</code>çš„é«˜å¯ç”¨æ–¹æ¡ˆ</li>
</ul>
<h2 id="ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹"><a href="#ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹" class="headerlink" title="ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹"></a>ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹</h2><ul>
<li><p>ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µ </p>
<ul>
<li><p> <strong>å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰</strong> </p>
</li>
<li><p> <strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong> </p>
</li>
<li><p> <strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong></p>
</li>
</ul>
</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017200718612.png" srcset="/img/loading.gif" lazyload alt="image-20221017200718612"></p>
<h3 id="é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥é˜¶æ®µ"><a href="#é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥é˜¶æ®µ" class="headerlink" title="é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥é˜¶æ®µ"></a>é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥é˜¶æ®µ</h3><p>å»ºç«‹<code>slave</code>åˆ°<code>master</code>çš„è¿æ¥ï¼Œä½¿<code>master</code>èƒ½å¤Ÿè¯†åˆ«<code>slave</code>ï¼Œå¹¶ä¿å­˜<code>slave</code>ç«¯å£å·</p>
<h4 id="å»ºç«‹è¿æ¥é˜¶æ®µå·¥ä½œæµç¨‹"><a href="#å»ºç«‹è¿æ¥é˜¶æ®µå·¥ä½œæµç¨‹" class="headerlink" title="å»ºç«‹è¿æ¥é˜¶æ®µå·¥ä½œæµç¨‹"></a>å»ºç«‹è¿æ¥é˜¶æ®µå·¥ä½œæµç¨‹</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017201122179.png" srcset="/img/loading.gif" lazyload alt="image-20221017201122179"></p>
<h4 id="ä¸»ä»è¿æ¥ï¼ˆslaveè¿æ¥masterï¼‰"><a href="#ä¸»ä»è¿æ¥ï¼ˆslaveè¿æ¥masterï¼‰" class="headerlink" title="ä¸»ä»è¿æ¥ï¼ˆslaveè¿æ¥masterï¼‰"></a>ä¸»ä»è¿æ¥ï¼ˆslaveè¿æ¥masterï¼‰</h4><ul>
<li><strong>æ–¹å¼ä¸€ï¼šå®¢æˆ·ç«¯å‘é€å‘½ä»¤</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">slaveof &lt;masterip> &lt;masterport><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>æ–¹å¼äºŒï¼šå¯åŠ¨æœåŠ¡å™¨å‚æ•°</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">redis-server <span class="token operator">-</span>slaveof &lt;masterip> &lt;masterport><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><strong>æ–¹å¼ä¸‰ï¼šæœåŠ¡å™¨é…ç½®</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">slaveof &lt;masterip> &lt;masterport><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><p><code>slave</code>ç³»ç»Ÿä¿¡æ¯</p>
<ul>
<li><p>master_link_down_since_seconds </p>
</li>
<li><p>masterhost </p>
</li>
<li><p>masterport</p>
</li>
</ul>
</li>
<li><p><code>master</code>ç³»ç»Ÿä¿¡æ¯</p>
<ul>
<li>slave_listening_port(å¤šä¸ª)</li>
</ul>
</li>
</ul>
<p><strong>æ¼”ç¤º</strong></p>
<ul>
<li><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶å…³é—­å®ˆæŠ¤è¿›ç¨‹å’Œæ—¥å¿—</strong></li>
</ul>
<p><strong>redis-6379.conf</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">port</span> <span class="token value attr-value">6379</span>
<span class="token key attr-name">daemonize</span> <span class="token value attr-value">no</span>
<span class="token comment">#logfile "6379.log"</span>
<span class="token key attr-name">dir</span> <span class="token value attr-value">/root/redis-4.0.0/data</span>
<span class="token key attr-name">dbfilename</span> <span class="token value attr-value">dump-6379.rdb</span>
<span class="token key attr-name">rdbcompression</span> <span class="token value attr-value">yes</span>
<span class="token key attr-name">rdbchecksum</span> <span class="token value attr-value">yes</span>
<span class="token key attr-name">save</span> <span class="token value attr-value">10 2</span>
<span class="token key attr-name">appendonly</span> <span class="token value attr-value">yes</span>
<span class="token key attr-name">appendfsync</span> <span class="token value attr-value">always</span>
<span class="token key attr-name">appendfilename</span> <span class="token value attr-value">appendonly-6379.aof</span>
<span class="token key attr-name">bind</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">databases</span> <span class="token value attr-value">16</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>redis-6380.conf</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">port</span> <span class="token value attr-value">6380</span>
<span class="token key attr-name">daemonize</span> <span class="token value attr-value">no</span>
<span class="token comment">#logfile "6380.log"</span>
<span class="token key attr-name">dir</span> <span class="token value attr-value">/root/redis-4.0.0/data</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<ul>
<li><strong>å¯åŠ¨å¤šä¸ªredisæœåŠ¡</strong></li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017202520833.png" srcset="/img/loading.gif" lazyload alt="image-20221017202520833"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017202628618.png" srcset="/img/loading.gif" lazyload alt="image-20221017202628618"></p>
<ul>
<li><strong>slaveæœåŠ¡å™¨è¿æ¥masteræœåŠ¡å™¨</strong></li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -p 6380</span>
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> 
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> 
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> SLAVEOF <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203447084.png" srcset="/img/loading.gif" lazyload alt="image-20221017203447084"></p>
<p><strong>è§‚å¯ŸæœåŠ¡å™¨è¿æ¥ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203710563.png" srcset="/img/loading.gif" lazyload alt="image-20221017203710563"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017203741205.png" srcset="/img/loading.gif" lazyload alt="image-20221017203741205"></p>
<p><strong>åŒæ­¥æ•ˆæœæµ‹è¯•</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204007153.png" srcset="/img/loading.gif" lazyload alt="image-20221017204007153"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204029344.png" srcset="/img/loading.gif" lazyload alt="image-20221017204029344"></p>
<p><strong>ç¬¬äºŒç§è¿æ¥æ–¹å¼(å¯åŠ¨æ—¶è¿æ¥)</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 redis-4.0.0<span class="token punctuation">]</span><span class="token comment"># redis-server conf/redis-6380.conf --slaveof 127.0.0.1 6379</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>ç¬¬ä¸‰ç§è¿æ¥æ–¹å¼ï¼ˆé…ç½®æ–‡ä»¶è¿æ¥ï¼‰</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">port</span> <span class="token value attr-value">6380</span>
<span class="token key attr-name">daemonize</span> <span class="token value attr-value">no</span>
<span class="token comment">#logfile "6380.log"</span>
<span class="token key attr-name">dir</span> <span class="token value attr-value">/root/redis-4.0.0/data</span>
<span class="token key attr-name">slaveof</span> <span class="token value attr-value">127.0.0.1 6379</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æŸ¥çœ‹ä¿¡æ¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204901267.png" srcset="/img/loading.gif" lazyload alt="image-20221017204901267"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017204924813.png" srcset="/img/loading.gif" lazyload alt="image-20221017204924813"></p>
<h4 id="ä¸»ä»æ–­å¼€è¿æ¥"><a href="#ä¸»ä»æ–­å¼€è¿æ¥" class="headerlink" title="ä¸»ä»æ–­å¼€è¿æ¥"></a>ä¸»ä»æ–­å¼€è¿æ¥</h4><ul>
<li>å®¢æˆ·ç«¯å‘é€å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">slaveof no one<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¯´æ˜ï¼š </p>
<ul>
<li>â€‹    <code>slave</code>æ–­å¼€è¿æ¥åï¼Œä¸ä¼šåˆ é™¤å·²æœ‰æ•°æ®ï¼Œåªæ˜¯ä¸å†æ¥å—<code>master</code>å‘é€çš„æ•°æ®</li>
</ul>
<h4 id="æˆæƒè®¿é—®"><a href="#æˆæƒè®¿é—®" class="headerlink" title="æˆæƒè®¿é—®"></a>æˆæƒè®¿é—®</h4><ul>
<li><code>master</code>å®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">requirepass <span class="token operator">&lt;</span>password<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><code>master</code>é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">config <span class="token builtin class-name">set</span> requirepass <span class="token operator">&lt;</span>password<span class="token operator">></span>
config get requirepass<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<ul>
<li><code>slave</code>å®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">auth <span class="token operator">&lt;</span>password<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>slaveé…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">masterauth <span class="token operator">&lt;</span>password<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>slaveå¯åŠ¨æœåŠ¡å™¨è®¾ç½®å¯†ç </li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-server â€“a <span class="token operator">&lt;</span>password<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<h3 id="é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥é˜¶æ®µå·¥ä½œæµç¨‹"><a href="#é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥é˜¶æ®µå·¥ä½œæµç¨‹" class="headerlink" title="é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥é˜¶æ®µå·¥ä½œæµç¨‹"></a>é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥é˜¶æ®µå·¥ä½œæµç¨‹</h3><ul>
<li>åœ¨<code>slave</code>åˆæ¬¡è¿æ¥<code>master</code>åï¼Œå¤åˆ¶<code>master</code>ä¸­çš„æ‰€æœ‰æ•°æ®åˆ°<code>slave </code></li>
<li>å°†<code>slave</code>çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°æˆ<code>master</code>å½“å‰çš„æ•°æ®åº“çŠ¶æ€</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017212932073.png" srcset="/img/loading.gif" lazyload alt="image-20221017212932073"></p>
<h4 id="æ•°æ®åŒæ­¥é˜¶æ®µmasterè¯´æ˜"><a href="#æ•°æ®åŒæ­¥é˜¶æ®µmasterè¯´æ˜" class="headerlink" title="æ•°æ®åŒæ­¥é˜¶æ®µmasterè¯´æ˜"></a>æ•°æ®åŒæ­¥é˜¶æ®µmasterè¯´æ˜</h4><ol>
<li>å¦‚æœ<code>master</code>æ•°æ®é‡å·¨å¤§ï¼Œæ•°æ®åŒæ­¥é˜¶æ®µåº”é¿å¼€æµé‡é«˜å³°æœŸï¼Œé¿å…é€ æˆ<code>master</code>é˜»å¡ï¼Œå½±å“ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œ </li>
<li>å¤åˆ¶ç¼“å†²åŒºå¤§å°è®¾å®šä¸åˆç†ï¼Œä¼šå¯¼è‡´æ•°æ®æº¢å‡ºã€‚å¦‚è¿›è¡Œå…¨é‡å¤åˆ¶å‘¨æœŸå¤ªé•¿ï¼Œè¿›è¡Œéƒ¨åˆ†å¤åˆ¶æ—¶å‘ç°æ•°æ®å·² ç»å­˜åœ¨ä¸¢å¤±çš„æƒ…å†µï¼Œå¿…é¡»è¿›è¡Œç¬¬äºŒæ¬¡å…¨é‡å¤åˆ¶ï¼Œè‡´ä½¿<code>slave</code>é™·å…¥æ­»å¾ªç¯çŠ¶æ€ã€‚</li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">repl-backlog-size</span> <span class="token value attr-value">1mb</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ol start="3">
<li><code>master</code>å•æœºå†…å­˜å ç”¨ä¸»æœºå†…å­˜çš„æ¯”ä¾‹ä¸åº”è¿‡å¤§ï¼Œå»ºè®®ä½¿ç”¨<code>50%-70%</code>çš„å†…å­˜ï¼Œç•™ä¸‹<code>30%-50%</code>çš„å†…å­˜ç”¨äºæ‰§ è¡Œ<code>bgsave</code>å‘½ä»¤å’Œåˆ›å»ºå¤åˆ¶ç¼“å†²åŒº</li>
</ol>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017213705310.png" srcset="/img/loading.gif" lazyload alt="image-20221017213705310"></p>
<h4 id="æ•°æ®åŒæ­¥é˜¶æ®µslaveè¯´æ˜"><a href="#æ•°æ®åŒæ­¥é˜¶æ®µslaveè¯´æ˜" class="headerlink" title="æ•°æ®åŒæ­¥é˜¶æ®µslaveè¯´æ˜"></a>æ•°æ®åŒæ­¥é˜¶æ®µslaveè¯´æ˜</h4><ol>
<li>ä¸ºé¿å…<code>slave</code>è¿›è¡Œå…¨é‡å¤åˆ¶ã€éƒ¨åˆ†å¤åˆ¶æ—¶æœåŠ¡å™¨å“åº”é˜»å¡æˆ–æ•°æ®ä¸åŒæ­¥ï¼Œå»ºè®®å…³é—­æ­¤æœŸé—´çš„å¯¹å¤–æœåŠ¡</li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">slave-serve-stale-data <span class="token function">yes</span><span class="token operator">|</span>no<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ol start="2">
<li>æ•°æ®åŒæ­¥é˜¶æ®µï¼Œ<code>master</code>å‘é€ç»™<code>slave</code>ä¿¡æ¯å¯ä»¥ç†è§£<code>master</code>æ˜¯<code>slave</code>çš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¸»åŠ¨å‘<code>slave</code>å‘é€ å‘½ä»¤ </li>
<li>å¤šä¸ª<code>slave</code>åŒæ—¶å¯¹<code>master</code>è¯·æ±‚æ•°æ®åŒæ­¥ï¼Œ<code>master</code>å‘é€çš„<code>RDB</code>æ–‡ä»¶å¢å¤šï¼Œä¼šå¯¹å¸¦å®½é€ æˆå·¨å¤§å†²å‡»ï¼Œå¦‚æœ <code>master</code>å¸¦å®½ä¸è¶³ï¼Œå› æ­¤æ•°æ®åŒæ­¥éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œé€‚é‡é”™å³°</li>
<li><code>slave</code>è¿‡å¤šæ—¶ï¼Œå»ºè®®è°ƒæ•´æ‹“æ‰‘ç»“æ„ï¼Œç”±ä¸€ä¸»å¤šä»ç»“æ„å˜ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œä¸­é—´çš„èŠ‚ç‚¹æ—¢æ˜¯<code>master</code>ï¼Œä¹Ÿæ˜¯ <code>slave</code>ã€‚æ³¨æ„ä½¿ç”¨æ ‘çŠ¶ç»“æ„æ—¶ï¼Œç”±äºå±‚çº§æ·±åº¦ï¼Œå¯¼è‡´æ·±åº¦è¶Šé«˜çš„<code>slave</code>ä¸æœ€é¡¶å±‚<code>master</code>é—´æ•°æ®åŒæ­¥å»¶è¿Ÿ è¾ƒå¤§ï¼Œæ•°æ®ä¸€è‡´æ€§å˜å·®ï¼Œåº”è°¨æ…é€‰æ‹©</li>
</ol>
<h3 id="é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­é˜¶æ®µ"><a href="#é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­é˜¶æ®µ" class="headerlink" title="é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­é˜¶æ®µ"></a>é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­é˜¶æ®µ</h3><ul>
<li>å½“<code>master</code>æ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹åï¼Œå¯¼è‡´ä¸»ä»æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ï¼Œæ­¤æ—¶éœ€è¦è®©ä¸»ä»æ•°æ®åŒæ­¥åˆ°ä¸€è‡´çš„ çŠ¶æ€ï¼ŒåŒæ­¥çš„åŠ¨ä½œç§°ä¸ºå‘½ä»¤ä¼ æ’­ </li>
<li><code>master</code>å°†æ¥æ”¶åˆ°çš„æ•°æ®å˜æ›´å‘½ä»¤å‘é€ç»™<code>slave</code>ï¼Œ<code>slave</code>æ¥æ”¶å‘½ä»¤åæ‰§è¡Œå‘½ä»¤ </li>
<li>ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µ <ul>
<li><strong>å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰</strong> </li>
<li><strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong> </li>
<li><strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong></li>
</ul>
</li>
</ul>
<h4 id="å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶"><a href="#å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶" class="headerlink" title="å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶"></a>å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214240292.png" srcset="/img/loading.gif" lazyload alt="image-20221017214240292"></p>
<h4 id="æœåŠ¡å™¨è¿è¡ŒIDï¼ˆrunidï¼‰"><a href="#æœåŠ¡å™¨è¿è¡ŒIDï¼ˆrunidï¼‰" class="headerlink" title="æœåŠ¡å™¨è¿è¡ŒIDï¼ˆrunidï¼‰"></a>æœåŠ¡å™¨è¿è¡ŒIDï¼ˆrunidï¼‰</h4><ul>
<li>æ¦‚å¿µï¼šæœåŠ¡å™¨è¿è¡ŒIDæ˜¯æ¯ä¸€å°æœåŠ¡å™¨æ¯æ¬¡è¿è¡Œçš„èº«ä»½è¯†åˆ«ç ï¼Œä¸€å°æœåŠ¡å™¨å¤šæ¬¡è¿è¡Œå¯ä»¥ç”Ÿæˆå¤šä¸ªè¿è¡Œid </li>
<li>ç»„æˆï¼šè¿è¡Œidç”±40ä½å­—ç¬¦ç»„æˆï¼Œæ˜¯ä¸€ä¸ªéšæœºçš„åå…­è¿›åˆ¶å­—ç¬¦ ä¾‹å¦‚ï¼šfdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce </li>
<li>ä½œç”¨ï¼šè¿è¡Œidè¢«ç”¨äºåœ¨æœåŠ¡å™¨é—´è¿›è¡Œä¼ è¾“ï¼Œè¯†åˆ«èº«ä»½ å¦‚æœæƒ³ä¸¤æ¬¡æ“ä½œå‡å¯¹åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œï¼Œå¿…é¡»æ¯æ¬¡æ“ä½œæºå¸¦å¯¹åº”çš„è¿è¡Œidï¼Œç”¨äºå¯¹æ–¹è¯†åˆ« </li>
<li>å®ç°æ–¹å¼ï¼šè¿è¡Œidåœ¨æ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œmasteråœ¨é¦–æ¬¡è¿æ¥slaveæ—¶ï¼Œä¼šå°†è‡ªå·±çš„è¿è¡ŒIDå‘ é€ç»™slaveï¼Œslaveä¿å­˜æ­¤IDï¼Œé€šè¿‡info Serverå‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹èŠ‚ç‚¹çš„runid</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214743888.png" srcset="/img/loading.gif" lazyload alt="image-20221017214743888"></p>
<h4 id="å¤åˆ¶ç¼“å†²åŒº"><a href="#å¤åˆ¶ç¼“å†²åŒº" class="headerlink" title="å¤åˆ¶ç¼“å†²åŒº"></a>å¤åˆ¶ç¼“å†²åŒº</h4><p>æ¦‚å¿µï¼šå¤åˆ¶ç¼“å†²åŒºï¼Œåˆåå¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡º<code>ï¼ˆFIFOï¼‰</code>çš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„å‘½ ä»¤ï¼Œæ¯æ¬¡ä¼ æ’­å‘½ä»¤ï¼Œ<code>master</code>éƒ½ä¼šå°†ä¼ æ’­çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤åˆ¶ç¼“å†²åŒº</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221017214956086.png" srcset="/img/loading.gif" lazyload alt="image-20221017214956086"></p>
<h4 id="å¤åˆ¶ç¼“å†²åŒºå†…éƒ¨å·¥ä½œåŸç†"><a href="#å¤åˆ¶ç¼“å†²åŒºå†…éƒ¨å·¥ä½œåŸç†" class="headerlink" title="å¤åˆ¶ç¼“å†²åŒºå†…éƒ¨å·¥ä½œåŸç†"></a>å¤åˆ¶ç¼“å†²åŒºå†…éƒ¨å·¥ä½œåŸç†</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018164806918.png" srcset="/img/loading.gif" lazyload alt="image-20221018164806918"></p>
<ul>
<li>æ¦‚å¿µï¼šå¤åˆ¶ç¼“å†²åŒºï¼Œåˆåå¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡º<code>ï¼ˆFIFOï¼‰</code>çš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„å‘½ ä»¤ï¼Œæ¯æ¬¡ä¼ æ’­å‘½ä»¤ï¼Œ<code>master</code>éƒ½ä¼šå°†ä¼ æ’­çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤åˆ¶ç¼“å†²åŒº <ul>
<li>å¤åˆ¶ç¼“å†²åŒºé»˜è®¤æ•°æ®å­˜å‚¨ç©ºé—´å¤§å°æ˜¯<code>1M</code>ï¼Œç”±äºå­˜å‚¨ç©ºé—´å¤§å°æ˜¯å›ºå®šçš„ï¼Œå½“å…¥é˜Ÿå…ƒç´ çš„æ•°é‡å¤§äºé˜Ÿ åˆ—é•¿åº¦æ—¶ï¼Œæœ€å…ˆå…¥é˜Ÿçš„å…ƒç´ ä¼šè¢«å¼¹å‡ºï¼Œè€Œæ–°å…ƒç´ ä¼šè¢«æ”¾å…¥é˜Ÿåˆ— </li>
</ul>
</li>
<li>ç”±æ¥ï¼šæ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå¦‚æœå¼€å¯æœ‰<code>AOF</code>æˆ–è¢«è¿æ¥æˆä¸º<code>master</code>èŠ‚ç‚¹ï¼Œå³åˆ›å»ºå¤åˆ¶ç¼“å†²åŒº </li>
<li>ä½œç”¨ï¼šç”¨äºä¿å­˜<code>master</code>æ”¶åˆ°çš„æ‰€æœ‰æŒ‡ä»¤ï¼ˆä»…å½±å“æ•°æ®å˜æ›´çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚<code>setï¼Œselect</code>ï¼‰ </li>
<li>æ•°æ®æ¥æºï¼šå½“<code>master</code>æ¥æ”¶åˆ°ä¸»å®¢æˆ·ç«¯çš„æŒ‡ä»¤æ—¶ï¼Œé™¤äº†å°†æŒ‡ä»¤æ‰§è¡Œï¼Œä¼šå°†è¯¥æŒ‡ä»¤å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­</li>
</ul>
<h4 id="ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰"><a href="#ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰" class="headerlink" title="ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰"></a>ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰</h4><ul>
<li>æ¦‚å¿µï¼šä¸€ä¸ªæ•°å­—ï¼Œæè¿°å¤åˆ¶ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤å­—èŠ‚ä½ç½® </li>
<li>åˆ†ç±»ï¼š <ul>
<li><code>master</code>å¤åˆ¶åç§»é‡ï¼šè®°å½•å‘é€ç»™æ‰€æœ‰<code>slave</code>çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆå¤šä¸ªï¼‰ </li>
<li><code>slave</code>å¤åˆ¶åç§»é‡ï¼šè®°å½•<code>slave</code>æ¥æ”¶<code>master</code>å‘é€è¿‡æ¥çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆä¸€ä¸ªï¼‰ </li>
</ul>
</li>
<li>æ•°æ®æ¥æºï¼š <ul>
<li><code>master</code>ç«¯ï¼šå‘é€ä¸€æ¬¡è®°å½•ä¸€æ¬¡ </li>
<li><code>slave</code>ç«¯ï¼šæ¥æ”¶ä¸€æ¬¡è®°å½•ä¸€æ¬¡ </li>
</ul>
</li>
<li>ä½œç”¨ï¼šåŒæ­¥ä¿¡æ¯ï¼Œæ¯”å¯¹<code>master</code>ä¸<code>slave</code>çš„å·®å¼‚ï¼Œå½“<code>slave</code>æ–­çº¿åï¼Œæ¢å¤æ•°æ®ä½¿ç”¨</li>
</ul>
<h4 id="æ•°æ®åŒæ­¥-å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹"><a href="#æ•°æ®åŒæ­¥-å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹" class="headerlink" title="æ•°æ®åŒæ­¥+å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹"></a>æ•°æ®åŒæ­¥+å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018165949891.png" srcset="/img/loading.gif" lazyload alt="image-20221018165949891"></p>
<h4 id="å¿ƒè·³æœºåˆ¶"><a href="#å¿ƒè·³æœºåˆ¶" class="headerlink" title="å¿ƒè·³æœºåˆ¶"></a>å¿ƒè·³æœºåˆ¶</h4><ul>
<li>è¿›å…¥å‘½ä»¤ä¼ æ’­é˜¶æ®µå€™ï¼Œ<code>master</code>ä¸<code>slave</code>é—´éœ€è¦è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œä½¿ç”¨å¿ƒè·³æœºåˆ¶è¿›è¡Œç»´æŠ¤ï¼Œå®ç°åŒæ–¹è¿æ¥ä¿æŒåœ¨çº¿ </li>
<li><code>master</code>å¿ƒè·³ï¼š <ul>
<li>æŒ‡ä»¤ï¼šPING </li>
<li>å‘¨æœŸï¼šç”±<code>repl-ping-slave-period</code>å†³å®šï¼Œé»˜è®¤10ç§’ </li>
<li>ä½œç”¨ï¼šåˆ¤æ–­<code>slave</code>æ˜¯å¦åœ¨çº¿ </li>
<li>æŸ¥è¯¢ï¼šINFO replication è·å–slaveæœ€åä¸€æ¬¡è¿æ¥æ—¶é—´é—´éš”ï¼Œ<code>lag</code>é¡¹ç»´æŒåœ¨0æˆ–1è§†ä¸ºæ­£å¸¸ </li>
</ul>
</li>
<li>slaveå¿ƒè·³ä»»åŠ¡ <ul>
<li>æŒ‡ä»¤ï¼šREPLCONF ACK {offset} </li>
<li>å‘¨æœŸï¼š1ç§’ </li>
<li>ä½œç”¨1ï¼šæ±‡æŠ¥<code>slave</code>è‡ªå·±çš„å¤åˆ¶åç§»é‡ï¼Œè·å–æœ€æ–°çš„æ•°æ®å˜æ›´æŒ‡ä»¤ </li>
<li>ä½œç”¨2ï¼šåˆ¤æ–­<code>master</code>æ˜¯å¦åœ¨çº¿</li>
</ul>
</li>
</ul>
<h4 id="å¿ƒè·³é˜¶æ®µæ³¨æ„äº‹é¡¹"><a href="#å¿ƒè·³é˜¶æ®µæ³¨æ„äº‹é¡¹" class="headerlink" title="å¿ƒè·³é˜¶æ®µæ³¨æ„äº‹é¡¹"></a>å¿ƒè·³é˜¶æ®µæ³¨æ„äº‹é¡¹</h4><ul>
<li>å½“<code>slave</code>å¤šæ•°æ‰çº¿ï¼Œæˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œ<code>master</code>ä¸ºä¿éšœæ•°æ®ç¨³å®šæ€§ï¼Œå°†æ‹’ç»æ‰€æœ‰ä¿¡æ¯åŒæ­¥æ“ä½œ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">min-slaves-to-write</span> <span class="token value attr-value">2</span>
<span class="token key attr-name">min-slaves-max-lag</span> <span class="token value attr-value">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><code>slave</code>æ•°é‡å°‘äº2ä¸ªï¼Œæˆ–è€…æ‰€æœ‰<code>slave</code>çš„å»¶è¿Ÿéƒ½å¤§äºç­‰äº10ç§’æ—¶ï¼Œå¼ºåˆ¶å…³é—­<code>master</code>å†™åŠŸèƒ½ï¼Œåœæ­¢æ•°æ®åŒæ­¥</p>
<ul>
<li><code>slave</code>æ•°é‡ç”±<code>slave</code>å‘é€<code>REPLCONF ACK</code>å‘½ä»¤åšç¡®è®¤ </li>
<li><code>slave</code>å»¶è¿Ÿç”±<code>slave</code>å‘é€<code>REPLCONF ACK</code>å‘½ä»¤åšç¡®è®¤</li>
</ul>
<h4 id="ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰"><a href="#ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰" class="headerlink" title="ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰"></a>ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰</h4><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018171711366.png" srcset="/img/loading.gif" lazyload alt="image-20221018171711366"></p>
<h2 id="ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜"><a href="#ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜" class="headerlink" title="ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜"></a>ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜</h2><h3 id="é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ1ï¼‰"><a href="#é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ1ï¼‰" class="headerlink" title="é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ1ï¼‰"></a>é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ1ï¼‰</h3><p>ä¼´éšç€ç³»ç»Ÿçš„è¿è¡Œï¼Œ<code>master</code>çš„æ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸€æ—¦<code>master</code>é‡å¯ï¼Œ<code>runid</code>å°†å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´å…¨éƒ¨<code>slave</code>çš„ å…¨é‡å¤åˆ¶æ“ä½œ </p>
<p>å†…éƒ¨ä¼˜åŒ–è°ƒæ•´æ–¹æ¡ˆï¼š </p>
<ol>
<li><code>master</code>å†…éƒ¨åˆ›å»º<code>master_replid</code>å˜é‡ï¼Œä½¿ç”¨<code>runid</code>ç›¸åŒçš„ç­–ç•¥ç”Ÿæˆï¼Œé•¿åº¦<code>41</code>ä½ï¼Œå¹¶å‘é€ç»™æ‰€æœ‰slave </li>
<li>åœ¨<code>master</code>å…³é—­æ—¶æ‰§è¡Œå‘½ä»¤ <code>shutdown save</code>ï¼Œè¿›è¡Œ<code>RDB</code>æŒä¹…åŒ–,å°†<code>runid</code>ä¸<code>offset</code>ä¿å­˜åˆ°RDBæ–‡ä»¶ä¸­ <ul>
<li>repl-id repl-offset  </li>
<li>é€šè¿‡<code>redis-check-rdb</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯ </li>
</ul>
</li>
<li><code>master</code>é‡å¯ååŠ è½½<code>RDB</code>æ–‡ä»¶ï¼Œæ¢å¤æ•°æ® <ul>
<li>é‡å¯åï¼Œå°†<code>RDB</code>æ–‡ä»¶ä¸­ä¿å­˜çš„<code>repl-id</code>ä¸<code>repl-offset</code>åŠ è½½åˆ°å†…å­˜ä¸­ <ul>
<li>master_repl_id = repl master_repl_offset = repl-offset </li>
<li>é€šè¿‡<code>info</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯ </li>
</ul>
</li>
</ul>
</li>
</ol>
<p>ä½œç”¨ï¼š æœ¬æœºä¿å­˜ä¸Šæ¬¡<code>runid</code>ï¼Œé‡å¯åæ¢å¤è¯¥å€¼ï¼Œä½¿æ‰€æœ‰<code>slave</code>è®¤ä¸ºè¿˜æ˜¯ä¹‹å‰çš„<code>master</code></p>
<h3 id="é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ2ï¼‰"><a href="#é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ2ï¼‰" class="headerlink" title="é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ2ï¼‰"></a>é¢‘ç¹çš„å…¨é‡å¤åˆ¶ï¼ˆ2ï¼‰</h3><ul>
<li>é—®é¢˜ç°è±¡ <ul>
<li>ç½‘ç»œç¯å¢ƒä¸ä½³ï¼Œå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œ<code>slave</code>ä¸æä¾›æœåŠ¡ </li>
</ul>
</li>
<li>é—®é¢˜åŸå›  <ul>
<li>å¤åˆ¶ç¼“å†²åŒºè¿‡å°ï¼Œæ–­ç½‘å<code>slave</code>çš„<code>offset</code>è¶Šç•Œï¼Œè§¦å‘å…¨é‡å¤åˆ¶ </li>
</ul>
</li>
<li>æœ€ç»ˆç»“æœ <ul>
<li><code>slave</code>åå¤è¿›è¡Œå…¨é‡å¤åˆ¶ </li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆ <ul>
<li>ä¿®æ”¹å¤åˆ¶ç¼“å†²åŒºå¤§å°</li>
</ul>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">repl-backlog-size<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>å»ºè®®è®¾ç½®å¦‚ä¸‹</li>
</ul>
<ol>
<li>æµ‹ç®—ä»<code>master</code>åˆ°<code>slave</code>çš„é‡è¿å¹³å‡æ—¶é•¿<code>second </code></li>
<li>è·å–<code>master</code>å¹³å‡æ¯ç§’äº§ç”Ÿå†™å‘½ä»¤æ•°æ®æ€»é‡<code>write_size_per_second </code></li>
<li>æœ€ä¼˜å¤åˆ¶ç¼“å†²åŒºç©ºé—´ = <code>2 * second * write_size_per_second</code></li>
</ol>
<h3 id="é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ1ï¼‰"><a href="#é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ1ï¼‰" class="headerlink" title="é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ1ï¼‰"></a>é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ1ï¼‰</h3><ul>
<li>é—®é¢˜ç°è±¡ <ul>
<li><code>master</code>çš„<code>CPU</code>å ç”¨è¿‡é«˜ æˆ– <code>slave</code>é¢‘ç¹æ–­å¼€è¿æ¥ </li>
</ul>
</li>
<li>é—®é¢˜åŸå›  <ul>
<li><code>slave</code>æ¯1ç§’å‘é€<code>REPLCONF ACK</code>å‘½ä»¤åˆ°<code>master </code></li>
<li>å½“<code>slave</code>æ¥åˆ°äº†æ…¢æŸ¥è¯¢æ—¶ï¼ˆ<code>keys *</code> ï¼Œ<code>hgetall</code>ç­‰ï¼‰ï¼Œä¼šå¤§é‡å ç”¨<code>CPU</code>æ€§èƒ½ </li>
<li><code>master</code>æ¯1ç§’è°ƒç”¨å¤åˆ¶å®šæ—¶å‡½æ•°r<code>eplicationCron()</code>ï¼Œæ¯”å¯¹<code>slave</code>å‘ç°é•¿æ—¶é—´æ²¡æœ‰è¿›è¡Œå“åº” </li>
</ul>
</li>
<li>æœ€ç»ˆç»“æœ <ul>
<li><code>master</code>å„ç§èµ„æºï¼ˆè¾“å‡ºç¼“å†²åŒºã€å¸¦å®½ã€è¿æ¥ç­‰ï¼‰è¢«ä¸¥é‡å ç”¨ </li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆ <ul>
<li>é€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œç¡®è®¤æ˜¯å¦é‡Šæ”¾<code>slave</code></li>
</ul>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">repl-timeout<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¯¥å‚æ•°å®šä¹‰äº†è¶…æ—¶æ—¶é—´çš„é˜ˆå€¼ï¼ˆé»˜è®¤<code>60ç§’</code>ï¼‰ï¼Œè¶…è¿‡è¯¥å€¼ï¼Œé‡Šæ”¾<code>slave</code></p>
<h3 id="é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ2ï¼‰"><a href="#é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ2ï¼‰" class="headerlink" title="é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ2ï¼‰"></a>é¢‘ç¹çš„ç½‘ç»œä¸­æ–­ï¼ˆ2ï¼‰</h3><ul>
<li>é—®é¢˜ç°è±¡ <ul>
<li><code>slave</code>ä¸<code>master</code>è¿æ¥æ–­å¼€ </li>
</ul>
</li>
<li>é—®é¢˜åŸå›  <ul>
<li><code>master</code>å‘é€<code>ping</code>æŒ‡ä»¤é¢‘åº¦è¾ƒä½ </li>
<li><code>master</code>è®¾å®šè¶…æ—¶æ—¶é—´è¾ƒçŸ­ </li>
<li><code>ping</code>æŒ‡ä»¤åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¸¢åŒ… </li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆ <ul>
<li>æé«˜<code>ping</code>æŒ‡ä»¤å‘é€çš„é¢‘åº¦</li>
</ul>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">repl-ping-slave-period<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¶…æ—¶æ—¶é—´<code>repl-time</code>çš„æ—¶é—´è‡³å°‘æ˜¯<code>ping</code>æŒ‡ä»¤é¢‘åº¦çš„5åˆ°10å€ï¼Œå¦åˆ™<code>slave</code>å¾ˆå®¹æ˜“åˆ¤å®šè¶…æ—¶</p>
<h3 id="æ•°æ®ä¸ä¸€è‡´"><a href="#æ•°æ®ä¸ä¸€è‡´" class="headerlink" title="æ•°æ®ä¸ä¸€è‡´"></a>æ•°æ®ä¸ä¸€è‡´</h3><ul>
<li>é—®é¢˜ç°è±¡ <ul>
<li>å¤šä¸ª<code>slave</code>è·å–ç›¸åŒæ•°æ®ä¸åŒæ­¥ </li>
</ul>
</li>
<li>é—®é¢˜åŸå›  <ul>
<li>ç½‘ç»œä¿¡æ¯ä¸åŒæ­¥ï¼Œæ•°æ®å‘é€æœ‰å»¶è¿Ÿ </li>
</ul>
</li>
<li>è§£å†³æ–¹æ¡ˆ <ul>
<li>ä¼˜åŒ–ä¸»ä»é—´çš„ç½‘ç»œç¯å¢ƒï¼Œé€šå¸¸æ”¾ç½®åœ¨åŒä¸€ä¸ªæœºæˆ¿éƒ¨ç½²ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å™¨æ—¶è¦æ³¨æ„æ­¤ç°è±¡ </li>
<li>ç›‘æ§ä¸»ä»èŠ‚ç‚¹å»¶è¿Ÿï¼ˆé€šè¿‡<code>offset</code>ï¼‰åˆ¤æ–­ï¼Œå¦‚æœ<code>slave</code>å»¶è¿Ÿè¿‡å¤§ï¼Œæš‚æ—¶å±è”½ç¨‹åºå¯¹è¯¥<code>slave</code>çš„æ•°æ®è®¿é—®</li>
</ul>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">slave-serve-stale-data</span> <span class="token value attr-value">yes|no</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>å¼€å¯åä»…å“åº”<code>info</code>ã€<code>slaveof</code>ç­‰å°‘æ•°å‘½ä»¤ï¼ˆæ…ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜ï¼‰</p>
<h1 id="Redis-å“¨å…µæ¨¡å¼"><a href="#Redis-å“¨å…µæ¨¡å¼" class="headerlink" title="Redis å“¨å…µæ¨¡å¼"></a><strong>Redis å“¨å…µæ¨¡å¼</strong></h1><h2 id="å“¨å…µç®€ä»‹"><a href="#å“¨å…µç®€ä»‹" class="headerlink" title="å“¨å…µç®€ä»‹"></a>å“¨å…µç®€ä»‹</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018182810865.png" srcset="/img/loading.gif" lazyload alt="image-20221018182810865"></p>
<p><strong>å“¨å…µ</strong></p>
<p>å“¨å…µ(sentinel) æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºå¯¹ä¸»ä»ç»“æ„ä¸­çš„æ¯å°æœåŠ¡å™¨è¿›è¡Œ<strong>ç›‘æ§</strong>ï¼Œå½“å‡ºç°æ•…éšœæ—¶é€šè¿‡æŠ•ç¥¨æœºåˆ¶<strong>é€‰æ‹©</strong>æ–°çš„ <code>master</code>å¹¶å°†æ‰€æœ‰<code>slave</code>è¿æ¥åˆ°æ–°çš„<code>master</code>ã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018182922458.png" srcset="/img/loading.gif" lazyload alt="image-20221018182922458"></p>
<p><strong>å“¨å…µçš„ä½œç”¨</strong></p>
<ul>
<li>ç›‘æ§ <ul>
<li>ä¸æ–­çš„æ£€æŸ¥<code>master</code>å’Œ<code>slave</code>æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚ </li>
<li><code>master</code>å­˜æ´»æ£€æµ‹ã€<code>master</code>ä¸<code>slave</code>è¿è¡Œæƒ…å†µæ£€æµ‹ </li>
</ul>
</li>
<li>é€šçŸ¥ï¼ˆæé†’ï¼‰ <ul>
<li>å½“è¢«ç›‘æ§çš„æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œå‘å…¶ä»–ï¼ˆå“¨å…µé—´ï¼Œå®¢æˆ·ç«¯ï¼‰å‘é€é€šçŸ¥ã€‚ </li>
</ul>
</li>
<li>è‡ªåŠ¨æ•…éšœè½¬ç§» <ul>
<li>æ–­å¼€<code>master</code>ä¸<code>slave</code>è¿æ¥ï¼Œé€‰å–ä¸€ä¸ª<code>slave</code>ä½œä¸º<code>master</code>ï¼Œå°†å…¶ä»–<code>slave</code>è¿æ¥åˆ°æ–°çš„<code>master</code>ï¼Œå¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯æ–°çš„æœ åŠ¡å™¨åœ°å€ </li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼š å“¨å…µä¹Ÿæ˜¯ä¸€å°<code>redis</code>æœåŠ¡å™¨ï¼Œåªæ˜¯ä¸æä¾›æ•°æ®æœåŠ¡ é€šå¸¸å“¨å…µé…ç½®æ•°é‡ä¸ºå•æ•°</p>
<h2 id="é…ç½®å“¨å…µ"><a href="#é…ç½®å“¨å…µ" class="headerlink" title="é…ç½®å“¨å…µ"></a>é…ç½®å“¨å…µ</h2><ul>
<li>é…ç½®ä¸€æ‹–äºŒçš„ä¸»ä»ç»“æ„ </li>
<li>é…ç½®ä¸‰ä¸ªå“¨å…µï¼ˆé…ç½®ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰ <ul>
<li>å‚çœ‹<code>sentinel.conf </code></li>
</ul>
</li>
<li>å¯åŠ¨å“¨å…µ</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">redis-sentinel</span> <span class="token value attr-value">sentinel-ç«¯å£å·.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æ¼”ç¤º</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018211141094.png" srcset="/img/loading.gif" lazyload alt="image-20221018211141094"></p>
<p><strong>è§‚å¯Ÿæ–‡ä»¶ä¿¡æ¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">[root@hecs-33111</span> <span class="token value attr-value">redis-4.0.0]# cat sentinel.conf | grep -v "#" | grep -v "^$"</span>
<span class="token key attr-name">port</span> <span class="token value attr-value">26379</span>
<span class="token key attr-name">dir</span> <span class="token value attr-value">/tmp</span>
<span class="token key attr-name">sentinel</span> <span class="token value attr-value">monitor mymaster 127.0.0.1 6379 2</span>
<span class="token key attr-name">sentinel</span> <span class="token value attr-value">down-after-milliseconds mymaster 30000</span>
<span class="token key attr-name">sentinel</span> <span class="token value attr-value">parallel-syncs mymaster 1</span>
<span class="token key attr-name">sentinel</span> <span class="token value attr-value">failover-timeout mymaster 180000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å°†é…ç½®æ–‡ä»¶æ‹·è´ä¸€ä»½è‡³æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> sentinel.conf <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">"#"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">"^$"</span> <span class="token operator">></span> ./conf/sentinel-26379.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018211919137.png" srcset="/img/loading.gif" lazyload alt="image-20221018211919137"></p>
<p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018212228270.png" srcset="/img/loading.gif" lazyload alt="image-20221018212228270"></p>
<p><strong>å†æ‹·è´ä¸¤ä»½å“¨å…µçš„é…ç½®æ–‡ä»¶</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/26379/26380/g' sentinel-26379.conf > sentinel-26380.conf </span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/26379/26381/g' sentinel-26379.conf > sentinel-26381.conf </span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># cat sentinel-26380.conf </span>
port <span class="token number">26380</span>
<span class="token function">dir</span> /root/redis-4.0.0/data
sentinel monitor mymaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">2</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>
sentinel failover-timeout mymaster <span class="token number">180000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å†æ‹·è´ä¸€ä»½slaveçš„é…ç½®</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6380/6381/g' redis-6380.conf > redis-6381.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># cat redis-6381.conf </span>
port <span class="token number">6381</span>
daemonize no
<span class="token comment">#logfile "6381.log"</span>
<span class="token function">dir</span> /root/redis-4.0.0/data
slaveof <span class="token number">127.0</span>.0.1 <span class="token number">6379</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ¸…ç©ºdataæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰ä¿¡æ¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 data<span class="token punctuation">]</span><span class="token comment"># rm -rf *</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>å¯åŠ¨master</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213515776.png" srcset="/img/loading.gif" lazyload alt="image-20221018213515776"></p>
<p><strong>å¯åŠ¨ä¸¤ä¸ªslave</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213813008.png" srcset="/img/loading.gif" lazyload alt="image-20221018213813008"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018213903729.png" srcset="/img/loading.gif" lazyload alt="image-20221018213903729"></p>
<p><strong>å¯åŠ¨å“¨å…µ1</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-sentinel  conf/sentinel-26379.conf <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214102909.png" srcset="/img/loading.gif" lazyload alt="image-20221018214102909"></p>
<p><strong>å®¢æˆ·ç«¯è¿æ¥å“¨å…µ1è§‚å¯Ÿä¿¡æ¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 /<span class="token punctuation">]</span><span class="token comment"># redis-cli -p 26379</span>
<span class="token number">127.0</span>.0.1:2637<span class="token operator"><span class="token file-descriptor important">9</span>></span> info<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214557474.png" srcset="/img/loading.gif" lazyload alt="image-20221018214557474"></p>
<p><strong>è§‚å¯Ÿé…ç½®æ–‡ä»¶ å·²ç»å‘ç”Ÿå˜åŒ–</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018214924564.png" srcset="/img/loading.gif" lazyload alt="image-20221018214924564"></p>
<p><strong>å¯åŠ¨å“¨å…µ2</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215154820.png" srcset="/img/loading.gif" lazyload alt="image-20221018215154820"></p>
<p><strong>è§‚å¯Ÿåˆ°å“¨å…µ1çš„ç›¸å…³ä¿¡æ¯</strong></p>
<p><strong>è§‚å¯Ÿå“¨å…µ1çš„æ—¥å¿—ä¿¡æ¯å¯ä»¥è§‚å¯Ÿåˆ°å“¨å…µ2çš„ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215320585.png" srcset="/img/loading.gif" lazyload alt="image-20221018215320585"></p>
<p><strong>è§‚å¯Ÿç°æœ‰ä¸¤ä¸ªå“¨å…µçš„é…ç½®æ–‡ä»¶ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215520080.png" srcset="/img/loading.gif" lazyload alt="image-20221018215520080"></p>
<p><strong>å¯åŠ¨å“¨å…µ3</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215630899.png" srcset="/img/loading.gif" lazyload alt="image-20221018215630899"></p>
<p><strong>è§‚å¯Ÿåˆ°è¯†åˆ«å‡ºä¸¤ä¸ªå“¨å…µä¿¡æ¯</strong></p>
<p><strong>è§‚å¯Ÿå“¨å…µ1çš„é…ç½®æ–‡ä»¶ å¯ä»¥æŸ¥çœ‹åˆ°æ–°å¢å“¨å…µä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221018215802938.png" srcset="/img/loading.gif" lazyload alt="image-20221018215802938"></p>
<p><strong>éªŒè¯masterä¸ä¸¤ä¸ªslaveçš„è¿é€šæ€§</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name weishao
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> get name
<span class="token string">"weishao"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>></span> get name
<span class="token string">"weishao"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><strong>CTRL+Cä½¿å¾—masterå®•æœº</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151305171.png" srcset="/img/loading.gif" lazyload alt="image-20221019151305171"></p>
<p><strong>è§‚å¯Ÿå“¨å…µ1çš„ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151729961.png" srcset="/img/loading.gif" lazyload alt="image-20221019151729961"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019151925079.png" srcset="/img/loading.gif" lazyload alt="image-20221019151925079"></p>
<h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><h3 id="ä¸»ä»åˆ‡æ¢"><a href="#ä¸»ä»åˆ‡æ¢" class="headerlink" title="ä¸»ä»åˆ‡æ¢"></a><strong>ä¸»ä»åˆ‡æ¢</strong></h3><ul>
<li>å“¨å…µåœ¨è¿›è¡Œä¸»ä»åˆ‡æ¢è¿‡ç¨‹ä¸­ç»å†ä¸‰ä¸ªé˜¶æ®µ <ul>
<li>ç›‘æ§ </li>
<li>é€šçŸ¥ </li>
<li>æ•…éšœè½¬ç§»</li>
</ul>
</li>
</ul>
<h3 id="é˜¶æ®µä¸€ï¼šç›‘æ§é˜¶æ®µ"><a href="#é˜¶æ®µä¸€ï¼šç›‘æ§é˜¶æ®µ" class="headerlink" title="é˜¶æ®µä¸€ï¼šç›‘æ§é˜¶æ®µ"></a>é˜¶æ®µä¸€ï¼šç›‘æ§é˜¶æ®µ</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019155153179.png" srcset="/img/loading.gif" lazyload alt="image-20221019155153179"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019202524994.png" srcset="/img/loading.gif" lazyload alt="image-20221019202524994"></p>
<h3 id="é˜¶æ®µäºŒï¼šé€šçŸ¥é˜¶æ®µ"><a href="#é˜¶æ®µäºŒï¼šé€šçŸ¥é˜¶æ®µ" class="headerlink" title="é˜¶æ®µäºŒï¼šé€šçŸ¥é˜¶æ®µ"></a>é˜¶æ®µäºŒï¼šé€šçŸ¥é˜¶æ®µ</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019202725003.png" srcset="/img/loading.gif" lazyload alt="image-20221019202725003"></p>
<h3 id="é˜¶æ®µä¸‰ï¼šæ•…éšœè½¬ç§»é˜¶æ®µ"><a href="#é˜¶æ®µä¸‰ï¼šæ•…éšœè½¬ç§»é˜¶æ®µ" class="headerlink" title="é˜¶æ®µä¸‰ï¼šæ•…éšœè½¬ç§»é˜¶æ®µ"></a>é˜¶æ®µä¸‰ï¼šæ•…éšœè½¬ç§»é˜¶æ®µ</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019203036948.png" srcset="/img/loading.gif" lazyload alt="image-20221019203036948"></p>
<p><strong>é€‰æ‹©é¢†å¤´çš„sentineè¿›è¡Œæ¸…ç†ï¼Œé€‰ä¸¾è¿‡ç¨‹</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019203813171.png" srcset="/img/loading.gif" lazyload alt="image-20221019203813171"></p>
<p><strong>é¢†å¤´çš„sentinelé€‰æ‹©æ–°çš„slaveä½œä¸ºmaster</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019204608998.png" srcset="/img/loading.gif" lazyload alt="image-20221019204608998"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>ç›‘æ§ <ul>
<li>åŒæ­¥ä¿¡æ¯ </li>
</ul>
</li>
<li>é€šçŸ¥ <ul>
<li>ä¿æŒè”é€š </li>
</ul>
</li>
<li>æ•…éšœè½¬ç§» <ul>
<li>å‘ç°é—®é¢˜ </li>
<li>ç«é€‰è´Ÿè´£äºº </li>
<li>ä¼˜é€‰æ–°master </li>
<li>æ–°<code>master</code>ä¸Šä»»ï¼Œå…¶ä»–<code>slave</code>åˆ‡æ¢<code>master</code>ï¼ŒåŸ<code>master</code>ä½œä¸º<code>slave</code>æ•…éšœå›å¤åè¿æ¥</li>
</ul>
</li>
</ul>
<h1 id="Redis-é›†ç¾¤"><a href="#Redis-é›†ç¾¤" class="headerlink" title="Redis é›†ç¾¤"></a>Redis é›†ç¾¤</h1><h2 id="é›†ç¾¤ç®€ä»‹"><a href="#é›†ç¾¤ç®€ä»‹" class="headerlink" title="é›†ç¾¤ç®€ä»‹"></a>é›†ç¾¤ç®€ä»‹</h2><p><strong>ç°çŠ¶é—®é¢˜</strong></p>
<p><strong>ä¸šåŠ¡å‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„å³°å€¼ç“¶é¢ˆ</strong></p>
<ul>
<li><code>redis</code>æä¾›çš„æœåŠ¡<code>OPS</code>å¯ä»¥è¾¾åˆ°10ä¸‡/ç§’ï¼Œå½“å‰ä¸šåŠ¡OPSå·²ç»è¾¾åˆ°10ä¸‡/ç§’ </li>
<li>å†…å­˜å•æœºå®¹é‡è¾¾åˆ°<code>256G</code>ï¼Œå½“å‰ä¸šåŠ¡éœ€æ±‚å†…å­˜å®¹é‡<code>1T </code></li>
<li>ä½¿ç”¨é›†ç¾¤çš„æ–¹å¼å¯ä»¥å¿«é€Ÿè§£å†³ä¸Šè¿°é—®é¢˜</li>
</ul>
<p><strong>é›†ç¾¤æ¶æ„</strong></p>
<p> é›†ç¾¤å°±æ˜¯ä½¿ç”¨ç½‘ç»œå°†è‹¥å¹²å°è®¡ç®—æœºè”é€šèµ·æ¥ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„ç®¡ç†æ–¹å¼ï¼Œä½¿å…¶å¯¹å¤–å‘ˆç°å•æœºçš„æœåŠ¡æ•ˆæœ</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019210603285.png" srcset="/img/loading.gif" lazyload alt="image-20221019210603285"></p>
<p><strong>é›†ç¾¤ä½œç”¨</strong></p>
<ul>
<li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„è®¿é—®å‹åŠ›ï¼Œå®ç°è´Ÿè½½å‡è¡¡ </li>
<li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ï¼Œå®ç°å¯æ‰©å±•æ€§ </li>
<li>é™ä½å•å°æœåŠ¡å™¨å®•æœºå¸¦æ¥çš„ä¸šåŠ¡ç¾éš¾</li>
</ul>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019210730122.png" srcset="/img/loading.gif" lazyload alt="image-20221019210730122"></p>
<h2 id="Redisé›†ç¾¤ç»“æ„è®¾è®¡"><a href="#Redisé›†ç¾¤ç»“æ„è®¾è®¡" class="headerlink" title="Redisé›†ç¾¤ç»“æ„è®¾è®¡"></a>Redisé›†ç¾¤ç»“æ„è®¾è®¡</h2><h3 id="æ•°æ®å­˜å‚¨è®¾è®¡"><a href="#æ•°æ®å­˜å‚¨è®¾è®¡" class="headerlink" title="æ•°æ®å­˜å‚¨è®¾è®¡"></a>æ•°æ®å­˜å‚¨è®¾è®¡</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211136036.png" srcset="/img/loading.gif" lazyload alt="image-20221019211136036"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211257396.png" srcset="/img/loading.gif" lazyload alt="image-20221019211257396"></p>
<h3 id="é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡"><a href="#é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡" class="headerlink" title="é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡"></a>é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡</h3><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019211557357.png" srcset="/img/loading.gif" lazyload alt="image-20221019211557357"></p>
<h2 id="clusteré›†ç¾¤æ­å»º"><a href="#clusteré›†ç¾¤æ­å»º" class="headerlink" title="clusteré›†ç¾¤æ­å»º"></a>clusteré›†ç¾¤æ­å»º</h2><h3 id="æ­å»ºæ–¹å¼"><a href="#æ­å»ºæ–¹å¼" class="headerlink" title="æ­å»ºæ–¹å¼"></a>æ­å»ºæ–¹å¼</h3><ul>
<li>åŸç”Ÿå®‰è£…ï¼ˆå•æ¡å‘½ä»¤ï¼‰ <ul>
<li>é…ç½®æœåŠ¡å™¨ï¼ˆ3ä¸»3ä»ï¼‰ </li>
<li>å»ºç«‹é€šä¿¡ï¼ˆMeetï¼‰ </li>
<li>åˆ†æ§½ï¼ˆSlotï¼‰ </li>
<li>æ­å»ºä¸»ä»ï¼ˆmaster-slaveï¼‰ </li>
</ul>
</li>
<li>å·¥å…·å®‰è£…ï¼ˆæ‰¹å¤„ç†ï¼‰</li>
</ul>
<h3 id="Clusteré…ç½®"><a href="#Clusteré…ç½®" class="headerlink" title="Clusteré…ç½®"></a>Clusteré…ç½®</h3><ul>
<li><p>æ·»åŠ èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">cluster-enabled</span> <span class="token value attr-value">yes|no</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>clusteré…ç½®æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶å±äºè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å¹¶æŸ¥è¯¢æ–‡ä»¶å†…å®¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">cluster-config-file</span> <span class="token value attr-value">&lt;filename></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>èŠ‚ç‚¹æœåŠ¡å“åº”è¶…æ—¶æ—¶é—´ï¼Œç”¨äºåˆ¤å®šè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿æˆ–åˆ‡æ¢ä¸ºä»èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">cluster-node-timeout</span> <span class="token value attr-value">&lt;milliseconds></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>masterè¿æ¥çš„slaveæœ€å°æ•°é‡</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">cluster-migration-barrier</span> <span class="token value attr-value">&lt;count></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

</li>
</ul>
<h3 id="ClusterèŠ‚ç‚¹æ“ä½œå‘½ä»¤"><a href="#ClusterèŠ‚ç‚¹æ“ä½œå‘½ä»¤" class="headerlink" title="ClusterèŠ‚ç‚¹æ“ä½œå‘½ä»¤"></a>ClusterèŠ‚ç‚¹æ“ä½œå‘½ä»¤</h3><ul>
<li><p>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cluster nodes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>è¿›å…¥ä¸€ä¸ªä»èŠ‚ç‚¹ redisï¼Œåˆ‡æ¢å…¶ä¸»èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cluster replicate <span class="token operator">&lt;</span>master-id<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>å‘ç°ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°å¢ä¸»èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cluster meet ip:port<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>å¿½ç•¥ä¸€ä¸ªæ²¡æœ‰soltçš„èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cluster forget <span class="token operator">&lt;</span>id<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>æ‰‹åŠ¨æ•…éšœè½¬ç§»</p>
  <figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cluster failover<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

</li>
</ul>
<h3 id="redis-tribå‘½ä»¤"><a href="#redis-tribå‘½ä»¤" class="headerlink" title="redis-tribå‘½ä»¤"></a>redis-tribå‘½ä»¤</h3><ul>
<li><p>æ·»åŠ èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-trib.rb add-node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>åˆ é™¤èŠ‚ç‚¹</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-trib.rb del-node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>
</li>
<li><p>é‡æ–°åˆ†ç‰‡</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-trib.rb reshard<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

</li>
</ul>
<h3 id="æ¼”ç¤º-1"><a href="#æ¼”ç¤º-1" class="headerlink" title="æ¼”ç¤º"></a><strong>æ¼”ç¤º</strong></h3><h4 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h4><p><strong>æ¸…ç©ºdata</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 data<span class="token punctuation">]</span><span class="token comment"># rm -rf *</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>é…ç½®redis-6379é›†ç¾¤çš„é…ç½®</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019212827549.png" srcset="/img/loading.gif" lazyload alt="image-20221019212827549"></p>
<p><strong>å¤åˆ¶é…ç½®æ–‡ä»¶ä¸º6ä»½</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6380/g' redis-6379.conf >redis-6380.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6381/g' redis-6379.conf >redis-6381.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6382/g' redis-6379.conf >redis-6382.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6383/g' redis-6379.conf >redis-6383.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6384/g' redis-6379.conf >redis-6384.conf</span>
<span class="token punctuation">[</span>root@hecs-33111 conf<span class="token punctuation">]</span><span class="token comment"># sed 's/6379/6385/g' redis-6379.conf >redis-6385.conf</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æ ¹æ®é…ç½®æ–‡ä»¶ä¾æ¬¡å¯åŠ¨redis-server</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 redis-4.0.0<span class="token punctuation">]</span><span class="token comment"># redis-server conf/redis-6379.conf </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019213943319.png" srcset="/img/loading.gif" lazyload alt="image-20221019213943319"></p>
<p><strong>è§‚å¯ŸæœåŠ¡å·²ç»å…¨éƒ¨å¯åŠ¨</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019214204996.png" srcset="/img/loading.gif" lazyload alt="image-20221019214204996"></p>
<p><strong>è§‚å¯Ÿå¯åŠ¨å‘½ä»¤</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019215041069.png" srcset="/img/loading.gif" lazyload alt="image-20221019215041069"></p>
<p>æ‰§è¡Œæ­¤å‘½ä»¤éœ€è¦å®‰è£…<code>ruby</code>å’Œ<code>ruby gem</code></p>
<p><strong>å®‰è£…ruby</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> ruby<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>å®‰è£…ruby gem</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">yum install rubygems -y<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æŸ¥çœ‹rubyå’Œruby gemå®‰è£…ç‰ˆæœ¬</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># ruby -v</span>
ruby <span class="token number">2.5</span>.9p229 <span class="token punctuation">(</span><span class="token number">2021</span>-04-05 revision <span class="token number">67939</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>x86_64-linux<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># gem -v</span>
<span class="token number">2.7</span>.6.3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>å¯åŠ¨é›†ç¾¤</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># ./redis-trib.rb create --replicas 1 127.0.0.1:6379 127.0.0.1:6380 127.0.0.1:6381 127.0.0.1:6382 127.0.0.1:6383 127.0.0.1:6384</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><strong>æŠ¥é”™</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019221124005.png" srcset="/img/loading.gif" lazyload alt="image-20221019221124005"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># gem install redis</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221019221255502.png" srcset="/img/loading.gif" lazyload alt="image-20221019221255502"></p>
<p><strong>è§‚å¯Ÿåˆ°dataç›®å½•ä¸‹å·²ç»ç”Ÿæˆäº†ä¸€äº›é…ç½®æ–‡ä»¶</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020103923017.png" srcset="/img/loading.gif" lazyload alt="image-20221020103923017"></p>
<p><strong>è§‚å¯Ÿ6379çš„èŠ‚ç‚¹ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104041099.png" srcset="/img/loading.gif" lazyload alt="image-20221020104041099"></p>
<p><strong>è¦†ç›–é…ç½®</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104442095.png" srcset="/img/loading.gif" lazyload alt="image-20221020104442095"></p>
<p><strong>èŠ‚ç‚¹å¼€å§‹åŠ å…¥</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104543307.png" srcset="/img/loading.gif" lazyload alt="image-20221020104543307"></p>
<p><strong>è§‚å¯Ÿ6379é…ç½®æ–‡ä»¶å˜åŒ–</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020104914459.png" srcset="/img/loading.gif" lazyload alt="image-20221020104914459"></p>
<p><strong>è§‚å¯Ÿ6379æ­¤æ—¶çš„æ—¥å¿—ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020105340354.png" srcset="/img/loading.gif" lazyload alt="image-20221020105340354"></p>
<h4 id="è®¾ç½®ä¸è·å–æ•°æ®"><a href="#è®¾ç½®ä¸è·å–æ•°æ®" class="headerlink" title="è®¾ç½®ä¸è·å–æ•°æ®"></a><strong>è®¾ç½®ä¸è·å–æ•°æ®</strong></h4><p><strong>è¿æ¥redisé›†ç¾¤</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># redis-cli -c</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><strong>è®¾ç½®æ•°æ®</strong></p>
<p><strong>æ ¹æ®keyè®¡ç®—å‡ºæ§½ä½ï¼Œå¹¶ä¸”é‡å®šå‘è‡³æ§½ä½</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020105938279.png" srcset="/img/loading.gif" lazyload alt="image-20221020105938279"></p>
<p><strong>è¿æ¥é›†ç¾¤å†…æŒ‡å®šä½ç½®çš„redisæœåŠ¡å™¨</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-cli <span class="token parameter variable">-c</span> <span class="token parameter variable">-p</span> <span class="token number">6382</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@hecs-33111 src<span class="token punctuation">]</span><span class="token comment"># redis-cli -c -p 6382</span>
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">2</span>></span> 
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">2</span>></span> 
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">2</span>></span> 
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">2</span>></span> get name
-<span class="token operator">></span> Redirected to slot <span class="token punctuation">[</span><span class="token number">5798</span><span class="token punctuation">]</span> located at <span class="token number">127.0</span>.0.1:6380
<span class="token string">"itheima"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="ä¸»ä»ä¸‹çº¿ä¸ä¸»ä»åˆ‡æ¢"><a href="#ä¸»ä»ä¸‹çº¿ä¸ä¸»ä»åˆ‡æ¢" class="headerlink" title="ä¸»ä»ä¸‹çº¿ä¸ä¸»ä»åˆ‡æ¢"></a><strong>ä¸»ä»ä¸‹çº¿ä¸ä¸»ä»åˆ‡æ¢</strong></h4><p><strong>å…³é—­slave1 è§‚å¯Ÿmaster1æ—¥å¿—ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020110725445.png" srcset="/img/loading.gif" lazyload alt="image-20221020110725445"></p>
<p><strong>å…¶ä½™redisæœåŠ¡å™¨æ˜¾ç¤ºçš„ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020110909594.png" srcset="/img/loading.gif" lazyload alt="image-20221020110909594"></p>
<p><strong>å°†slave1æ¢å¤è¿æ¥è§‚å¯Ÿmaster1çš„ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111001703.png" srcset="/img/loading.gif" lazyload alt="image-20221020111001703"></p>
<p><strong>å…³é—­master1ï¼Œè§‚å¯Ÿslave1æ—¥å¿—ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111147479.png" srcset="/img/loading.gif" lazyload alt="image-20221020111147479"></p>
<p><strong>slave1æ›¿ä»£master1æˆä¸ºæ–°çš„master</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020111637321.png" srcset="/img/loading.gif" lazyload alt="image-20221020111637321"></p>
<p><strong>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> CLUSTER NODES<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020112004426.png" srcset="/img/loading.gif" lazyload alt="image-20221020112004426"></p>
<p><strong>æ¢å¤6379ï¼Œè§‚å¯Ÿæ—¥å¿—ä¿¡æ¯</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020113758577.png" srcset="/img/loading.gif" lazyload alt="image-20221020113758577"></p>
<h1 id="Redis-ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ"><a href="#Redis-ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="Redis ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ"></a>Redis ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ</h1><h2 id="ç¼“å­˜é¢„çƒ­"><a href="#ç¼“å­˜é¢„çƒ­" class="headerlink" title="ç¼“å­˜é¢„çƒ­"></a>ç¼“å­˜é¢„çƒ­</h2><p><strong>â€œå®•æœºâ€</strong></p>
<p>æœåŠ¡å™¨å¯åŠ¨åè¿…é€Ÿå®•æœº</p>
<p><strong>é—®é¢˜æ’æŸ¥</strong></p>
<ol>
<li>è¯·æ±‚æ•°é‡è¾ƒé«˜ </li>
<li>ä¸»ä»ä¹‹é—´æ•°æ®ååé‡è¾ƒå¤§ï¼Œæ•°æ®åŒæ­¥æ“ä½œé¢‘åº¦è¾ƒé«˜</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p><strong>å‰ç½®å‡†å¤‡å·¥ä½œ</strong>ï¼š </p>
<ol>
<li><p>æ—¥å¸¸ä¾‹è¡Œç»Ÿè®¡æ•°æ®è®¿é—®è®°å½•ï¼Œç»Ÿè®¡è®¿é—®é¢‘åº¦è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ® </p>
</li>
<li><p>åˆ©ç”¨LRUæ•°æ®åˆ é™¤ç­–ç•¥ï¼Œæ„å»ºæ•°æ®ç•™å­˜é˜Ÿåˆ— ä¾‹å¦‚ï¼šstormä¸kafkaé…åˆ </p>
<p><strong>å‡†å¤‡å·¥ä½œ</strong>ï¼š </p>
<ol>
<li><p>å°†ç»Ÿè®¡ç»“æœä¸­çš„æ•°æ®åˆ†ç±»ï¼Œæ ¹æ®çº§åˆ«ï¼Œredisä¼˜å…ˆåŠ è½½çº§åˆ«è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ® </p>
</li>
<li><p>åˆ©ç”¨åˆ†å¸ƒå¼å¤šæœåŠ¡å™¨åŒæ—¶è¿›è¡Œæ•°æ®è¯»å–ï¼Œæé€Ÿæ•°æ®åŠ è½½è¿‡ç¨‹ </p>
</li>
<li><p>çƒ­ç‚¹æ•°æ®ä¸»ä»åŒæ—¶é¢„çƒ­ </p>
<p><strong>å®æ–½</strong>ï¼š </p>
<ol>
<li>ä½¿ç”¨è„šæœ¬ç¨‹åºå›ºå®šè§¦å‘æ•°æ®é¢„çƒ­è¿‡ç¨‹ </li>
<li>å¦‚æœæ¡ä»¶å…è®¸ï¼Œä½¿ç”¨äº†CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ï¼Œæ•ˆæœä¼šæ›´å¥½</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>æ€»ç»“</strong></p>
<p>ç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿå¯åŠ¨å‰ï¼Œæå‰å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“ å­˜çš„é—®é¢˜ï¼ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼</p>
<h2 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h2><p><strong>æ•°æ®åº“æœåŠ¡å™¨å´©æºƒï¼ˆ1ï¼‰</strong></p>
<ol>
<li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æ•°æ®åº“è¿æ¥é‡æ¿€å¢ </li>
<li>åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¤„ç†è¯·æ±‚ </li>
<li>å¤§é‡408ï¼Œ500é”™è¯¯é¡µé¢å‡ºç° </li>
<li>å®¢æˆ·åå¤åˆ·æ–°é¡µé¢è·å–æ•°æ® </li>
<li>æ•°æ®åº“å´©æºƒ </li>
<li>åº”ç”¨æœåŠ¡å™¨å´©æºƒ </li>
<li>é‡å¯åº”ç”¨æœåŠ¡å™¨æ— æ•ˆ </li>
<li>RedisæœåŠ¡å™¨å´©æºƒ </li>
<li>Redisé›†ç¾¤å´©æºƒ </li>
<li>é‡å¯æ•°æ®åº“åå†æ¬¡è¢«ç¬é—´æµé‡æ”¾å€’</li>
</ol>
<p><strong>é—®é¢˜æ’æŸ¥</strong></p>
<ol>
<li>åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´å†…ï¼Œç¼“å­˜ä¸­è¾ƒå¤šçš„keyé›†ä¸­è¿‡æœŸ </li>
<li>æ­¤å‘¨æœŸå†…è¯·æ±‚è®¿é—®è¿‡æœŸçš„æ•°æ®ï¼Œredisæœªå‘½ä¸­ï¼Œrediså‘æ•°æ®åº“è·å–æ•°æ® </li>
<li>æ•°æ®åº“åŒæ—¶æ¥æ”¶åˆ°å¤§é‡çš„è¯·æ±‚æ— æ³•åŠæ—¶å¤„ç† </li>
<li>Rediså¤§é‡è¯·æ±‚è¢«ç§¯å‹ï¼Œå¼€å§‹å‡ºç°è¶…æ—¶ç°è±¡ </li>
<li>æ•°æ®åº“æµé‡æ¿€å¢ï¼Œæ•°æ®åº“å´©æºƒ </li>
<li>é‡å¯åä»ç„¶é¢å¯¹ç¼“å­˜ä¸­æ— æ•°æ®å¯ç”¨ </li>
<li>RedisæœåŠ¡å™¨èµ„æºè¢«ä¸¥é‡å ç”¨ï¼ŒRedisæœåŠ¡å™¨å´©æºƒ </li>
<li>Redisé›†ç¾¤å‘ˆç°å´©å¡Œï¼Œé›†ç¾¤ç“¦è§£ </li>
<li>åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¾—åˆ°æ•°æ®å“åº”è¯·æ±‚ï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨æœåŠ¡å™¨å´©æºƒ </li>
<li>åº”ç”¨æœåŠ¡å™¨ï¼Œredisï¼Œæ•°æ®åº“å…¨éƒ¨é‡å¯ï¼Œæ•ˆæœä¸ç†æƒ³</li>
</ol>
<p><strong>é—®é¢˜åˆ†æ</strong></p>
<ul>
<li>çŸ­æ—¶é—´èŒƒå›´å†… </li>
<li>å¤§é‡keyé›†ä¸­è¿‡æœŸ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆé“ï¼‰</strong></p>
<ol>
<li><p><strong>æ›´å¤šçš„é¡µé¢é™æ€åŒ–å¤„ç†</strong> </p>
</li>
<li><p><strong>æ„å»ºå¤šçº§ç¼“å­˜æ¶æ„</strong> </p>
<p>â€‹    Nginxç¼“å­˜+redisç¼“å­˜+ehcacheç¼“å­˜ </p>
</li>
<li><p><strong>æ£€æµ‹Mysqlä¸¥é‡è€—æ—¶ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–</strong> </p>
<p>â€‹    å¯¹æ•°æ®åº“çš„ç“¶é¢ˆæ’æŸ¥ï¼šä¾‹å¦‚è¶…æ—¶æŸ¥è¯¢ã€è€—æ—¶è¾ƒé«˜äº‹åŠ¡ç­‰ </p>
</li>
<li><p><strong>ç¾éš¾é¢„è­¦æœºåˆ¶</strong> </p>
<p>â€‹    ç›‘æ§redisæœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡ </p>
<ul>
<li><p>CPUå ç”¨ã€CPUä½¿ç”¨ç‡ </p>
</li>
<li><p>å†…å­˜å®¹é‡ </p>
</li>
</ul>
<ul>
<li>æŸ¥è¯¢å¹³å‡å“åº”æ—¶é—´ </li>
</ul>
<ul>
<li>çº¿ç¨‹æ•° </li>
</ul>
</li>
<li><p><strong>é™æµã€é™çº§</strong> </p>
</li>
</ol>
<p>â€‹    çŸ­æ—¶é—´èŒƒå›´å†…ç‰ºç‰²ä¸€äº›å®¢æˆ·ä½“éªŒï¼Œé™åˆ¶ä¸€éƒ¨åˆ†è¯·æ±‚è®¿é—®ï¼Œé™ä½åº”ç”¨æœåŠ¡å™¨å‹åŠ›ï¼Œå¾…ä¸šåŠ¡ä½é€Ÿè¿è½¬åå†é€æ­¥æ”¾å¼€è®¿é—®</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆæœ¯ï¼‰</strong></p>
<ol>
<li><p><strong>LRUä¸LFUåˆ‡æ¢</strong> </p>
</li>
<li><p><strong>æ•°æ®æœ‰æ•ˆæœŸç­–ç•¥è°ƒæ•´</strong> </p>
<p>æ ¹æ®ä¸šåŠ¡æ•°æ®æœ‰æ•ˆæœŸè¿›è¡Œåˆ†ç±»é”™å³°ï¼ŒAç±»90åˆ†é’Ÿï¼ŒBç±»80åˆ†é’Ÿï¼ŒCç±»70åˆ†é’Ÿ </p>
<p>è¿‡æœŸæ—¶é—´ä½¿ç”¨å›ºå®šæ—¶é—´+éšæœºå€¼çš„å½¢å¼ï¼Œç¨€é‡Šé›†ä¸­åˆ°æœŸçš„keyçš„æ•°é‡ </p>
</li>
<li><p><strong>è¶…çƒ­æ•°æ®ä½¿ç”¨æ°¸ä¹…key</strong> </p>
</li>
<li><p><strong>å®šæœŸç»´æŠ¤ï¼ˆè‡ªåŠ¨+äººå·¥ï¼‰</strong> </p>
<p>å¯¹å³å°†è¿‡æœŸæ•°æ®åšè®¿é—®é‡åˆ†æï¼Œç¡®è®¤æ˜¯å¦å»¶æ—¶ï¼Œé…åˆè®¿é—®é‡ç»Ÿè®¡ï¼Œåšçƒ­ç‚¹æ•°æ®çš„å»¶æ—¶ </p>
</li>
<li><p><strong>åŠ é” æ…ç”¨ï¼</strong></p>
</li>
</ol>
<p><strong>æ€»ç»“</strong></p>
<p>ç¼“å­˜é›ªå´©å°±æ˜¯ç¬é—´è¿‡æœŸæ•°æ®é‡å¤ªå¤§ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚å¦‚èƒ½å¤Ÿæœ‰æ•ˆé¿å…è¿‡æœŸæ—¶é—´é›†ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³é›ªå´©ç°è±¡çš„å‡ºç° ï¼ˆçº¦40%ï¼‰ï¼Œé…åˆå…¶ä»–ç­–ç•¥ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ç›‘æ§æœåŠ¡å™¨çš„è¿è¡Œæ•°æ®ï¼Œæ ¹æ®è¿è¡Œè®°å½•åšå¿«é€Ÿè°ƒæ•´ã€‚</p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020162205314.png" srcset="/img/loading.gif" lazyload alt="image-20221020162205314"></p>
<h2 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h2><p><strong>æ•°æ®åº“æœåŠ¡å™¨å´©æºƒï¼ˆ2ï¼‰</strong></p>
<ol>
<li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­ </li>
<li>æ•°æ®åº“è¿æ¥é‡ç¬é—´æ¿€å¢ </li>
<li>RedisæœåŠ¡å™¨æ— å¤§é‡keyè¿‡æœŸ </li>
<li>Rediså†…å­˜å¹³ç¨³ï¼Œæ— æ³¢åŠ¨ </li>
<li>RedisæœåŠ¡å™¨CPUæ­£å¸¸ </li>
<li>æ•°æ®åº“å´©æºƒ</li>
</ol>
<p><strong>é—®é¢˜æ’æŸ¥</strong></p>
<ol>
<li>Redisä¸­æŸä¸ªkeyè¿‡æœŸï¼Œè¯¥keyè®¿é—®é‡å·¨å¤§ </li>
<li>å¤šä¸ªæ•°æ®è¯·æ±‚ä»æœåŠ¡å™¨ç›´æ¥å‹åˆ°Redisåï¼Œå‡æœªå‘½ä¸­ </li>
<li>Redisåœ¨çŸ­æ—¶é—´å†…å‘èµ·äº†å¤§é‡å¯¹æ•°æ®åº“ä¸­åŒä¸€æ•°æ®çš„è®¿é—®</li>
</ol>
<p><strong>é—®é¢˜åˆ†æ</strong></p>
<ul>
<li>å•ä¸ªkeyé«˜çƒ­æ•°æ® </li>
<li>keyè¿‡æœŸ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆæœ¯ï¼‰</strong></p>
<ol>
<li><p><strong>é¢„å…ˆè®¾å®š</strong> </p>
<p>â€‹    ä»¥ç”µå•†ä¸ºä¾‹ï¼Œæ¯ä¸ªå•†å®¶æ ¹æ®åº—é“ºç­‰çº§ï¼ŒæŒ‡å®šè‹¥å¹²æ¬¾ä¸»æ‰“å•†å“ï¼Œåœ¨è´­ç‰©èŠ‚æœŸé—´ï¼ŒåŠ å¤§æ­¤ç±»ä¿¡æ¯    keyçš„è¿‡æœŸæ—¶é•¿ </p>
<p>â€‹    æ³¨æ„ï¼šè´­ç‰©èŠ‚ä¸ä»…ä»…æŒ‡å½“å¤©ï¼Œä»¥åŠåç»­è‹¥å¹²å¤©ï¼Œè®¿é—®å³°å€¼å‘ˆç°é€æ¸é™ä½çš„è¶‹åŠ¿ </p>
</li>
<li><p><strong>ç°åœºè°ƒæ•´</strong> </p>
<p>â€‹    ç›‘æ§è®¿é—®é‡ï¼Œå¯¹è‡ªç„¶æµé‡æ¿€å¢çš„æ•°æ®å»¶é•¿è¿‡æœŸæ—¶é—´æˆ–è®¾ç½®ä¸ºæ°¸ä¹…æ€§key </p>
</li>
<li><p><strong>åå°åˆ·æ–°æ•°æ®</strong> </p>
<p>â€‹    å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼Œé«˜å³°æœŸæ¥ä¸´ä¹‹å‰ï¼Œåˆ·æ–°æ•°æ®æœ‰æ•ˆæœŸï¼Œç¡®ä¿ä¸ä¸¢å¤± </p>
</li>
<li><p><strong>äºŒçº§ç¼“å­˜</strong> </p>
<p>â€‹    è®¾ç½®ä¸åŒçš„å¤±æ•ˆæ—¶é—´ï¼Œä¿éšœä¸ä¼šè¢«åŒæ—¶æ·˜æ±°å°±è¡Œ </p>
</li>
<li><p><strong>åŠ é”</strong> </p>
<p>â€‹    åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢è¢«å‡»ç©¿ï¼Œä½†æ˜¯è¦æ³¨æ„ä¹Ÿæ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œæ…é‡ï¼</p>
</li>
</ol>
<p><strong>æ€»ç»“</strong></p>
<p>ç¼“å­˜å‡»ç©¿å°±æ˜¯å•ä¸ªé«˜çƒ­æ•°æ®è¿‡æœŸçš„ç¬é—´ï¼Œæ•°æ®è®¿é—®é‡è¾ƒå¤§ï¼Œæœªå‘½ä¸­redisåï¼Œå‘èµ·äº†å¤§é‡å¯¹åŒä¸€æ•°æ®çš„æ•°æ®åº“è®¿é—®ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸šåŠ¡æ•°æ®åˆ†æä¸é¢„é˜²æ–¹é¢è¿›è¡Œï¼Œé…åˆè¿è¡Œç›‘æ§æµ‹è¯•ä¸å³æ—¶è°ƒæ•´ç­–ç•¥ï¼Œæ¯•ç«Ÿå•ä¸ªkeyçš„è¿‡æœŸç›‘æ§éš¾åº¦è¾ƒé«˜ï¼Œé…åˆé›ªå´©å¤„ç†ç­–ç•¥å³å¯ã€‚</p>
<h2 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h2><p><strong>æ•°æ®åº“æœåŠ¡å™¨å´©æºƒï¼ˆ3ï¼‰</strong></p>
<ol>
<li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­ </li>
<li>åº”ç”¨æœåŠ¡å™¨æµé‡éšæ—¶é—´å¢é‡è¾ƒå¤§ </li>
<li>RedisæœåŠ¡å™¨å‘½ä¸­ç‡éšæ—¶é—´é€æ­¥é™ä½ </li>
<li>Rediså†…å­˜å¹³ç¨³ï¼Œå†…å­˜æ— å‹åŠ› </li>
<li>RedisæœåŠ¡å™¨CPUå ç”¨æ¿€å¢ </li>
<li>æ•°æ®åº“æœåŠ¡å™¨å‹åŠ›æ¿€å¢ </li>
<li>æ•°æ®åº“å´©æºƒ</li>
</ol>
<p><strong>é—®é¢˜æ’æŸ¥</strong></p>
<ol>
<li>Redisä¸­å¤§é¢ç§¯å‡ºç°æœªå‘½ä¸­ </li>
<li>å‡ºç°éæ­£å¸¸URLè®¿é—®</li>
</ol>
<p><strong>é—®é¢˜åˆ†æ</strong></p>
<ul>
<li>è·å–çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œæ•°æ®åº“æŸ¥è¯¢æœªå¾—åˆ°å¯¹åº”æ•°æ® </li>
<li>Redisè·å–åˆ°nullæ•°æ®æœªè¿›è¡ŒæŒä¹…åŒ–ï¼Œç›´æ¥è¿”å› </li>
<li>ä¸‹æ¬¡æ­¤ç±»æ•°æ®åˆ°è¾¾é‡å¤ä¸Šè¿°è¿‡ç¨‹ </li>
<li>å‡ºç°é»‘å®¢æ”»å‡»æœåŠ¡å™¨</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆæœ¯ï¼‰</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020164447238.png" srcset="/img/loading.gif" lazyload alt="image-20221020164447238"></p>
<p><strong>æ€»ç»“</strong></p>
<p>ç¼“å­˜å‡»ç©¿è®¿é—®äº†ä¸å­˜åœ¨çš„æ•°æ®ï¼Œè·³è¿‡äº†åˆæ³•æ•°æ®çš„redisæ•°æ®ç¼“å­˜é˜¶æ®µï¼Œæ¯æ¬¡è®¿é—®æ•°æ®åº“ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚é€šå¸¸æ­¤ç±» æ•°æ®çš„å‡ºç°é‡æ˜¯ä¸€ä¸ªè¾ƒä½çš„å€¼ï¼Œå½“å‡ºç°æ­¤ç±»æƒ…å†µä»¥æ¯’æ”»æ¯’ï¼Œå¹¶åŠæ—¶æŠ¥è­¦ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸´æ—¶é¢„æ¡ˆé˜²èŒƒæ–¹é¢å¤šåšæ–‡ç« ã€‚ </p>
<p>æ— è®ºæ˜¯é»‘åå•è¿˜æ˜¯ç™½åå•ï¼Œéƒ½æ˜¯å¯¹æ•´ä½“ç³»ç»Ÿçš„å‹åŠ›ï¼Œè­¦æŠ¥è§£é™¤åå°½å¿«ç§»é™¤ã€‚</p>
<h2 id="æ€§èƒ½æŒ‡æ ‡ç›‘æ§"><a href="#æ€§èƒ½æŒ‡æ ‡ç›‘æ§" class="headerlink" title="æ€§èƒ½æŒ‡æ ‡ç›‘æ§"></a>æ€§èƒ½æŒ‡æ ‡ç›‘æ§</h2><p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165330711.png" srcset="/img/loading.gif" lazyload alt="image-20221020165330711"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165344324.png" srcset="/img/loading.gif" lazyload alt="image-20221020165344324"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165518327.png" srcset="/img/loading.gif" lazyload alt="image-20221020165518327"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165557352.png" srcset="/img/loading.gif" lazyload alt="image-20221020165557352"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165707597.png" srcset="/img/loading.gif" lazyload alt="image-20221020165707597"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165743895.png" srcset="/img/loading.gif" lazyload alt="image-20221020165743895"></p>
<p><strong>ç›‘æ§æ–¹å¼</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020165841955.png" srcset="/img/loading.gif" lazyload alt="image-20221020165841955"></p>
<p><strong>benchmark</strong></p>
<ul>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-benchmark <span class="token punctuation">[</span>-h <span class="token punctuation">]</span> <span class="token punctuation">[</span>-p <span class="token punctuation">]</span> <span class="token punctuation">[</span>-c <span class="token punctuation">]</span> <span class="token punctuation">[</span>-n <span class="token operator">&lt;</span>requests<span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">[</span>-k <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li>èŒƒä¾‹1</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-benchmark<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¯´æ˜ï¼š50ä¸ªè¿æ¥ï¼Œ10000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</p>
<ul>
<li>èŒƒä¾‹2</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-benchmark <span class="token parameter variable">-c</span> <span class="token number">100</span> <span class="token parameter variable">-n</span> <span class="token number">5000</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>è¯´æ˜ï¼š100ä¸ªè¿æ¥ï¼Œ5000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</p>
<p><strong>æ¼”ç¤º</strong></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020170658042.png" srcset="/img/loading.gif" lazyload alt="image-20221020170658042"></p>
<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020170824761.png" srcset="/img/loading.gif" lazyload alt="image-20221020170824761"></p>
<p><strong>monitor</strong></p>
<ul>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">monitor<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<p>æ‰“å°æœåŠ¡å™¨è°ƒè¯•ä¿¡æ¯</p>
<p><strong>showlong</strong></p>
<ul>
<li>å‘½ä»¤</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">slowlog <span class="token punctuation">[</span>operator<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<ul>
<li><p>get ï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿— </p>
</li>
<li><p>len ï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿—æ¡ç›®æ•° </p>
</li>
<li><p>reset ï¼šé‡ç½®æ…¢æŸ¥è¯¢æ—¥å¿—</p>
</li>
<li><p>ç›¸å…³é…ç½®</p>
</li>
</ul>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">slowlog-log-slower-than <span class="token number">1000</span> <span class="token comment">#è®¾ç½®æ…¢æŸ¥è¯¢çš„æ—¶é—´ä¸‹çº¿ï¼Œå•ä½ï¼šå¾®å¦™</span>
slowlog-max-len <span class="token number">100</span> <span class="token comment">#è®¾ç½®æ…¢æŸ¥è¯¢å‘½ä»¤å¯¹åº”çš„æ—¥å¿—æ˜¾ç¤ºé•¿åº¦ï¼Œå•ä½ï¼šå‘½ä»¤æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure>

<p><img src="/img/%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98-Redis/image-20221020171634657.png" srcset="/img/loading.gif" lazyload alt="image-20221020171634657"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">æ•°æ®åº“</a>
  
  
    <span>></span>
    
  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/" class="category-chain-item">Redis</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>é»‘é©¬ç¨‹åºå‘˜-Redis</div>
      <div>https://weishao-996.github.io/2022/10/08/é»‘é©¬ç¨‹åºå‘˜-Redis/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Wei Shao</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´10æœˆ8æ—¥</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/08/MacOS-M1%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85-HomeBrew/" title="MacOS-M1è½¯ä»¶å®‰è£…-HomeBrew">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MacOS-M1è½¯ä»¶å®‰è£…-HomeBrew</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/14/%E9%9D%A2%E8%AF%95-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="é¢è¯•-è®¡ç®—æœºç½‘ç»œ">
                        <span class="hidden-mobile">é¢è¯•-è®¡ç®—æœºç½‘ç»œ</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'weishao-996/commit-utterance');
      s.setAttribute('issue-term', 'title');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script  src="https://lib.baomitu.com/prism/1.27.0/plugins/line-numbers/prism-line-numbers.min.js" ></script>

  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
